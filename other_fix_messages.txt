meson: Fix install dir of man pages

Regressed when reworking documentation in 2.15.

Fixes #985.

---
ci: Fix MSVC test by setting CMake generator manually

Visual Studio 2017 was removed from the Windows runners, but CMake still
picked it up for some reason.

---
dict: Rework reference counting

Use C11 atomics if available. Otherwise, fall back to pthread mutex
inlined in xmlDict struct or Win32 atomics.

This should fix lock contention reported in #970.

---
doc: Improve documentation of error levels

---
io: Fix argument type

See c70d88f1 and #951.

---
io: Fix reading from pipes like stdin on Windows

On Windows, lseek doesn't return an error on unseekable streams like
pipes.

Fixes #951.

---
CMake: Fix dlopen check

Systems can have dlopen symbol in various libraries. For example, on
Haiku, dlopen is in 'root' library, which is linked by default.

The CMAKE_DL_LIBS variable is automatically set by CMake and contains
the name of the library or libraries that contain dynamic loading
functionality. CMakePushCheckState checks for the symbol in isolation,
so the required libraries variable can be modified.

---
doc: Small fix

---
tree: Fix xmlGetNodePath

- Fix quadratic behavior
- Don't truncate names

Fixes #715.

---
doc: Generate documentation with Doxygen 1.14

The 1.14.0 release fixes a serious bug with autolinks.

Note that the downstream tests now run on Ubuntu with libxml2 and
libxslt built on Arch. This seems to work but could break at a later
point.

Fixes #929.

---
doc: Fix installation with newer Doxygen

Newer versions don't generate PNG files anymore. Simply use *.* as
wildcard.

---
xmllint: Fix --xinclude --path

Use resource loader for XInclude. Regressed with f96dca9c.

---
Fix CMake iconv handling after change to private dependency

---
Fix relaxng is parsed to an infinite attrs->next loop

Test data for the bug.

---
globals: Fix documentation of xmlThrDef* functions

---
valid: Readd more argument checks in xmlAddElementDecl

Fix crashes with API fuzzer.

---
doc: Fix autolink errors

Fix links, remove links to internal functions.

---
error: Fix initGenericErrorDefaultFunc compatibility macro again

Now it really should work as before.

---
valid: Readd argument check in xmlAddElementDecl

Fix crashes with API fuzzer.

---
Fix unidiomatic use of vsnprintf().

* Don't terminate an already-terminated buffer.
* Consistently use 1024-byte buffers.
* While here, consistently use ap for a va_list.

---
doc: Document unused error domains

---
html: Add some comments regarding HTML5 serialization

It seems that the specification of the HTML output method in XSLT 1.0
had a lot of influence on how the HTML serializer in libxml2 ended up:

https://www.w3.org/TR/xslt-10/#section-HTML-Output-Method

There are two remaining behaviors suggested by XSLT 1.0 that don't match
the HTML5 fragment serialization algorithm:

We escape non-ASCII characters in URI attributes (the list of which is
probably outdated). This was originally recommended in appendix B of the
HTML 4.01 spec, but only for user agents:

https://www.w3.org/TR/html401/appendix/notes.html#h-B.2.1

From my experience, any tool that processes HTML should escape as little
as possible. For example, we used to escape many more characters which
are invalid in URIs, but often used in template languages. (Note that we
still escape whitespace and control chars.) Nevertheless, I guess that
some libxslt users continue to expect this behavior from libxml2.

Then we collapse Boolean attributes using an outdated list. This is
mostly a cosmetic issue, but a somewhat important one for libxslt users.

We probably need a serialization option for the xmlsave module that
enables fully HTML5-conformant output.

---
io: Make xmlOutputBufferCreate* not free encoder on error

Revert a530ff12 which was an inadvertent API change.

---
Fix -Wunterminated-string-initialization warnings

Don't use strings for table.

---
encoding: Fix -Wswitch warning

---
io: Fix stack use after scope

Short-lived regression.

---
save: Fix serialization of attribute defaults containing &lt;

Long-standing bug that produced invalid XML.

---
doc: Fix some damage from automated conversions

Add some newlines, fix returns.

---
doc: Fix briefs in tree docs

---
io: Fix negation of potentially unsigned value

---
fuzz: Fix out-of-tree build

---
doc: Fix varargs

---
doc: Misc fixes to error docs

---
doc: Fix doc installation with Autotools

---
gitlab-ci: Treat Doxygen warnings as error

---
doc: Fix autolinks to functions

Unfortunately, autolinks in .c files aren't converted by Doxygen for
some reason.

---
doc: Fix xmlTextWriter struct name

---
doc: Fix xmlsave format hint

Don't recommend deprecated symbols.

---
doc: Prepare for conversion to Doxygen

Fix many params in internal functions (not really necessary but Doxygen
warns about that in XML mode).

Fix formatting in a few corner cases that automatic conversion can't
handle.

Rearrange some DOC_DISABLE blocks.

---
doc: Fix DocBook warnings

Add empty <contrib> elements to silence warnings from the DocBook
stylesheets.

---
cmake: Fix installation directories in libxml2-config.cmake

Use AX_RECURSIVE_EVAL with Autotools and remove hack using parent
directories.

Fixes #898.

---
io: Fix linkage of __xml*BufferCreateFilename functions

Make these functions usable on Windows.

---
save: Fix xmlDocDump with encoding

Short-lived regression.

---
save: Fix XML escape table

Regressed with 2adcde39.

---
save: Fix xmlSave with NULL encoding

Regressed with cc45f618.

---
meson: Fix libdl detection fallback

Require dlopen, always set HAVE_DLOPEN.

---
python: Add a test to reproduce bug #889

---
python: Fix file variable not defined during exception

---
error: Fix initGenericErrorDefaultFunc compatibility macro

---
cmake, meson: Fix Darwin versions

---
globals: Fix --with-thread-alloc build

---
tree: Fix xmlTextMerge with NULL args

Restore pre-2.13 behavior. Fixes #875.

---
hash: Fix false positive from -fanalyzer

---
encoding: Support input-only and output-only converters

Make it possible to open an encoding handler only for input or output.
This avoids the creation of unnecessary converters.

Should also fix #863.

---
encoding: Detect truncated multi-byte sequences with ICU

Unlike iconv or the internal converters, ICU consumes truncated multi-
byte sequences at the end of an input buffer. We currently check for a
non-empty raw input buffer to detect truncated sequences, so this fails
with ICU.

It might be possible to inspect the pivot buffer pointers, but it seems
cleaner to implement a `flush` flag for some encoding and I/O functions.
After flushing, we can check for U_TRUNCATED_CHAR_FOUND with ICU, or
detect remaining input with other converters.

Also fix detection of truncated sequences for HTML, XML content and
DTDs with iconv.

---
html: Fix areBlanks check

Short-lived regression from 71122421.

---
malloc-fail: Fix type confusion in xmlSchemaCheckAGPropsCorrect

Attribute groups must be marked as containing references also if an OOM
error occurred. Otherwise, references won't be resolved, leading to type
confusion in xmlSchemaCheckAGPropsCorrect later in the fixup phase.

I'm not sure why xmlSchemaFixupComponents is called at all if an error
occurred. This has lead to similar issues in the past. On the other
hand, continuing in the presence of errors helps when fuzzing.

See #344.

---
globals: Fix Windows build

---
error: Convert initGenericErrorDefaultFunc to macro

---
cmake: Fix WITH_RELAXNG option

Dependent options must come after dependencies.

---
io: Fix `compressed` flag for uncompressed stdin

This could cause xmlstarlet to generate compressed output unexpectedly.

Regressed with a78843be. Should fix #869.

---
SAX2: Fix ctxt->nodemem check

In some error cases and maybe other situations, nodemem can have a
value of -1.

---
meson: Fix Python module build

---
fuzz: Fix failure injection in schema fuzzer

---
Fix C4296 warning: Resolve comparison of unsigned int with 0

---
html: Fix check for partial named character references

Digits are allowed after the first character.

---
html: Handle error from htmlFindOutputEncoder

---
tests: Look for xmlconf in source directory

Add -d option to runxmlconf for automake.

Fix extraction of xmlconf.tar.gz on Windows.

Make runxmlconf work with Meson CI.

---
xmllint: Fix SIGBUS with --memory option

If the input file size is a multiple of page size, the byte after the
file's content is on a new page and accessing it will lead to SIGBUS.

Remove XML_INPUT_BUF_ZERO_TERMINATED hint for mmapped files.

Regressed with a221cd78.

Fixes #864.

---
tests: Fix error return in testHugeEncodedChunk

Fixes #859.

---
fuzz: Work around glibc iconv() bug

---
Use __has_attribute to check for __counted_by__ support

The initial clang patch to support __counted_by__ was landed and
reverted several times. There are some clang toolchains (e.g. the
Android toolchain) that report themselves as version 18 but do not
support __counted_by__. While it is debatable if Android should be
shipping a pre-release clang, using __has_attribute should be a bit
simpler overall.

Note that this doesn't migrate everything else to use __has_attribute:
while clang has always supported __has_attribute, gcc didn't support
it until a bit later.

---
tests: Fix expected errors in runxmlconf

The extra failure if regexps weren't enabled was actually a regression
fixed by the previous commit.

---
gitlab-ci: Disable cmake:mingw for now

Executing /mingw64/bin/cmake.exe with any arguments fails without error
message and exit code 127 since 2025-01-21. I have no idea why.

---
dict: Handle ENOSYS from getentropy gracefully

Also add some comments.

Should fix #854.

---
Fix typos

---
README: Fix CMake example options

zlib is disabled by default now.

---
uri: Fix handling of Windows drive letters

Allow drive letters in URI paths. Technically, these should be treated
as URI schemes, but this is not what users expect. This also makes sure
that paths with drive letters are resolved as filesystem paths and
unescaped, for example when used in libxslt's document() function.

Should fix #832.

---
meson: Fix setup with ICU as sibling subproject

Meson wrapdb provides a wrap for ICU, so libxml2 and ICU could both be
built as subprojects of the same Meson parent project.  In this case, with
the icu option enabled, setup was failing with:

    subprojects/libxml2-2.13.5/meson.build:603:22: ERROR: Could not get an internal variable and no default provided for <InternalDependency dep228908115162702543524838879388991448872: True>

This is because we can't get a dependency variable from a subproject that
hasn't been built yet.  Fall back to assuming DEFS is empty, as it is on
my system.


---
fuzz: Fix comments

---
tree: Fix variable name in xmlAddChild documentation

---
xmllint: Improve error reports from reader

---
xmllint: Store error stream in global state

---
reader: Fix return value of xmlTextReaderReadString again

Make sure to return NULL for node types except elements or text to match
the old behavior.

Note that CDATA sections are still treated like text nodes and will have
their content returned.

Fixes #838.

---
doc: Fix documentation

---
autotools: Set AC_CONFIG_AUX_DIR

This should make sure that autoreconf doesn't mess with parent
directories.

Should fix #833.

---
valid: Fix and check return value of nodeVPush

---
save: Fix handling of catastrophic errors

Don't overwrite catastrophic errors xmlSaveErr.

Overwrite non-catastrophic errors in xmlOutputBufferClose.

---
save: Forward error from closing IO in xmlSaveFinish

---
gitlab-ci: Stop including gnome-release-service-ci-templates

This raises a "not found or access denied" error now.

---
fuzz: Fix IO error check in reader fuzzer

---
Fix typo

---
valid: Reset context before validating

Reset last error and "stopped" flag. Otherwise new errors could be
ignored.

---
cmake: Fix indentation in libxml2-config.cmake.in

---
example: Fix indentation in icu.c, mention in NEWS

---
cmake: Fix compatibility in package version file

See https://github.com/microsoft/vcpkg/issues/42315

---
tests: Fix sanitizer version check on old Apple clang

See #669.

---
xmlIO: Fix reading from non-regular files like pipes

Commit 7e14c05d removed unnecessary copying of uncompressed input
through zlib or xzlib. This broke input from non-regular files like
pipes which can't be reopened. Try to detect such files by checking
whether they're seekable and always pipe them through zlib or xzlib.

Also remove seemingly unnecessary calls to gzread and gzrewind to
support unseekable files.

Fixes https://gitlab.gnome.org/GNOME/libxslt/-/issues/124.

---
xmlreader: Fix return value of xmlTextReaderReadString

Return NULL if the node has no children or the children were already
deleted to match the 2.12 behavior.

Fixes #817.

---
nanohttp: Fix another stdout file descriptor

---
nanohttp: Fix stdout file descriptor

Fixes #813.

---
string: Fix va_copy fallback

Fix va_copy fallback reworked in 5cffba83.

Should fix #812.

---
python/tests: fix typos

Typos were found with codespell.

---
Avoid Python 'licence' distribution option is deprecated; use 'license' error

---
test: Fix XML_PARSE_HTML constant

---
html: Fix line numbers with CRs

---
html: Fix EOF handling in start tags

---
html: Fix EOF handling in comments

---
html: Fix bogus end tags

---
html: Start to fix EOF and U+0000 handling

---
meson: Fix duplicate listing of libxml2.devhelp2

The duplication caused a warning when uninstalling.

---
encoding: Fix table entry for "UTF16"

---
include: Check whether _MSC_VER is defined

Should fix #795.

---
python: Fix SAX driver with character streams

This apparently broke with Python 3.5 which introduced character
streams.

Fixes #790.

---
io: don't set the executable bit when creating files

Issue seems to have been introduced in
0bef93bf24def68c448af0e71844b942e0ed93ec.

---
xmlcatalog: Improved fix for #699

---
catalog: Fix regression in xmlCatalogAdd

Don't load system catalog.

---
autotools: Fix EXTRA_DIST

Fixes #786.

---
nanohttp: Avoid ctype(3) misuse.

fix https://gitlab.gnome.org/GNOME/libxml2/-/issues/780

---
malloc-fail: Fix null-deref in xmlPatPushState

---
io: Always consume encoding handler when creating output buffers

Also free encoding handler in error case.

Remove xmlAllocOutputBufferInternal which was identical to
xmlAllocOutputBuffer.

---
shell: Only use readline on terminals

Should fix xmllint shell tests.

---
build: Fix config.h macros

We have to emulate AC_CHECK_DECLS. Instead of leaving the macro
undefined if a symbol wasn't found, it has to be set to 0.

---
build: Use AC_CHECK_DECLS/check_symbol_exists for getentropy

This assumes that getentropy is declared in sys/random.h.

Should fix issues on iOS. See #774.

---
xinclude: Fix fallback for text includes

Fixes #772.

---
threads: Fix 32-bit Windows build

Should fix #771.

---
buf: Fix maxSize behavior

Short-lived regression.

---
buf: Fix xmlBufBackToBuffer

Short-lived regression.

---
error: Make xmlLastError const

---
buf: Rework xmlBuf code

Always use what the old implementation called the "IO" allocation
scheme, allowing to move the content pointer past the initial
allocation. This is inexpensive and allows efficient shrinking.

Optimize xmlBufGrow, reusing shrunken memory as much as possible.

Simplify xmlBufAdd.

Make xmlBufBackToBuffer return an error on overflow.

Make "size" exclude the terminating NULL byte.

Always provide an initial size.

Reintroduce static buffers.

Remove xmlBufResize and several other functions.

---
error: Add helper functions to print errors and abort

---
io: Fix return value of xmlFileRead

This broke in commit 6d27c54.

Fixes #766.

---
fuzz: Fix spaceMax

---
Undeprecate some symbols for now

- xmlKeepBlanksDefault is needed as a work-around for
  xmlParseBalancedChunk, see issue #727.
- ctxt->options already has an accessor and will be deprecated
  later.
- input->cur, input->base, input->end: See #762.

---
encoding: Fix xmlParseCharEncoding

Make "UTF-16" return the UTF16LE handler as before.

Fix error return.

---
tree: Fix handling of empty strings in xmlNodeParseContent

We shouldn't create an empty text node to match the old behavior.

Fixes #759.

---
encoding: Remove duplicate code

Fix recent commit.

---
encoding: Fix ICU build

---
valid: Restore ID lookup

Revert a change from d025cfbb and don't overwrite ID table entries, so
that the first attribute will be returned if there are duplicate IDs.

This requires two other changes:

- Attributes in entity content are never added to the ID table. This
  seems reasonable.

- Remove the optimization to skip ID lookup when copying and the target
  document has an empty ID table. This also seems more correct since the
  document could have ID declarations nevertheless or we could be
  copying xml:ids into the document for the first time.

Fixes #757.

---
SAX2: Fix HTML IDs

Short-lived regression. Fixes #755.

---
save: Fix "Factor out xmlSaveWriteIndent"

---
HTML: Rework UTF8ToHtml

Optimize code. Check for XML_ENC_ERR_SPACE. Use error macros.

---
error: Remove underscores from xmlRaiseError

---
encoding: Restore old lookup order in xmlOpenCharEncodingHandler

When looking up encodings with xmlLookupCharEncodingHandler, the
returned handler can have a different name than requested
(capitalization, internal aliases). This should eventually be fixed.
For now we revert part of commit 5b893fa9, start the lookup with
xmlFindHandler and add an explicit check for UTF-8.

Should fix the encoding name issue mentioned in #749.

---
uri: Fix documentation of xmlBuildRelativeURI

---
autotools: Fix pkg.m4 check

---
uri: Only set file scheme for special Windows paths

Fixes 2ce70cde.

Also fix a test case.

---
configure.ac: fix bashisms

'==' is a bashism, so use the POSIX '=' instead.

---
uri: Handle filesystem paths in xmlBuildRelativeURISafe

This mainly fixes issues on Windows but should also fix a few general
corner cases.

Should fix #745.

---
encoding: Fix encoding lookup with xmlOpenCharEncodingHandler

Make xmlOpenCharEncodingHandler call xmlParseCharEncoding first so we
prefer our own handlers for names like "UTF8". Only UTF-16 needs an
exception.

Make callers check the return value. For UTF-8, a NULL encoding doesn't
mean an error.

Remove unnecessary UTF-8 check from htmlFindOutputEncoder. Don't try to
look up ASCII handler since the HTML handler is always available.

Fix return code of xmlParseCharEncoding.

Should fix #744.

---
README: Fix Meson examples

---
build: Fix XML_LIBDIR usage

---
autotools: Use pkg-config to check for libreadline

This handles static linking properly and avoids overlinking.

Change the --with-readline default to no as it was before and raise an
error if libreadline couldn't be found.

Do the same for libhistory.

---
uri: Fix xmlBuildURI with NULL base

Don't try to parse URI if base is NULL. Fixes functions like xmlParseDTD
with certain filenames.

Should fix #742.

---
meson: fix icu and iconv om BSDs again

libdir is needed when searching for iconv, not includedir.

Remove OpenBSD from the bsd list. Something is wrong there and iconv.h
is installed somewhere else.

Signed-off-by: Rosen Penev <rosenp@gmail.com>

---
tests: Add XInclude test for issue #733

---
reader: Fix xmlTextReaderReadString

Regressed in commit 7cbf609a.

Should fix #738.

---
meson: add DEFS to CFLAGS

Adding a configuration flag as an include directory is wrong and errors
on BSDs.

ERROR: Include dir -DU_DISABLE_RENAMING=1 does not exist.

Matches the autotools build now.

Requires has_argument to fix non BSDs because of an annoying meson
quirk.

Signed-off-by: Rosen Penev <rosenp@gmail.com>

---
Fix previous commit

---
xinclude: Add missing include

Gambas fails to compile with

    error: 'xmlStructuredErrorFunc' has not been declared

---
Fix typo in NEWS (--with-html -> --with-http)

---
win32, msvc: fix missing linking against Bcrypt.lib

Fixes this link error:

dict.obj : error LNK2019: unresolved external symbol BCryptGenRandom referenced in function xmlInitRandom

Commit 2e9e758d1ecb52b73a43db79d326c18d7d94c8d7 (dict: Get random seed
from system PRNG, 2023-12-24) updated cmake, but not nmake, correct
this.

---
xmllint: Rewrite HTML error output

---
runtest: Work around broken EUC-JP support in musl iconv

Should fix #728.

---
runtest: Check for IBM-1141 encoding handler

Should fix #729.

---
meson: fix usage as a subproject

include directories must be passed to that projects can use headers.

Also add override_dependencies to make sure that it's used when
available as a subproject.

Signed-off-by: Rosen Penev <rosenp@gmail.com>

---
autotools: Fix pthread detection on FreeBSD

pthread_join is defined by libc, so check for pthread_create instead.

Should fix #725.

---
build: Clean up configuration options

Remove run-debug from meson. Fix documentation.

---
doc: Update and fix documentation

---
xmllint: Fix --pedantic option

Regressed in 74c84a8c.

---
fuzz: Fix reader fuzzer

---
xmllint: Add macro for error stream

Prepare for fuzzing.

---
xmllint: Fix --insert option

Make sure that parent is an element when calling
xmlValidGetValidElements.

---
xmllint: Fix --pushsmall option

This is only a debugging aid but also useful when fuzzing.

---
xinclude: Increase error count in xmlXIncludeErrMemory

---
Remove always-false check old == cur

This case is already checked at the start of the function.
There it returns NULL, which seems more correct.

---
relaxng: Fix tree corruption in xmlRelaxNGParseNameClass

Don't create cycles in tree structure. This will lead to an infinite
loop or call stack overflow later.

Closes: https://gitlab.gnome.org/GNOME/libxml2/-/issues/711

---
xinclude: Don't try to fix base of non-elements

This would result in a spurious error.

---
tree: Don't coalesce text nodes in xmlAdd{Prev,Next}Sibling

Commit 9e1c72da from 2001 introduced a bug where xmlAddPrevSibling and
xmlAddNextSibling would only try to merge text nodes with one of its
new siblings. Commit 4ccd3eb8 fixed this bug but unfortunately, lxml
and possibly other downstream code depend on text nodes not being
merged.

To avoid breaking downstream code while still having somewhat
consistent API behavior, it's probably best to make these functions
never coalesce text nodes.

---
SAX2: Fix xmlSAX2EntityDecl with empty base

Short-lived regression.

---
tree: Align xmlAddChild with other node insertion functions

Make xmlAddChild unlink the child before insertion. Originally, linked
children would most likely cause tree corruption. The first fix
disallowed linked nodes, but there are cases where insertion of such
nodes could succeed.

Don't abort if the node is already a child of parent. In this case,
the node will be moved to the end of the child list.

---
fuzz: Fix xmlSetProp in API fuzzer

Finding the old attribute node is a bit more involved.

---
tree: Fix uninitialized value in xmlSearchNsSafe

Short-lived regression.

---
tree: Fix uninitialized value in xmlSearchNsByHrefSafe

Short-lived regression.

---
encoding: Don't shrink input too early in xmlCharEncOutput

Some exotic encodings like ISO646-FR don't support '#' characters, so
encoding a character reference can actually fail. Don't skip the
offending input in this case so the error will be reported on the next
call.

---
tree: Fix tree iteration in xmlDOMWrapRemoveNode

We didn't descend into elements having attributes.

---
tree: Fix reallocation in xmlDOMWrapNSNormAddNsMapItem2

---
tree: Set parent->last early in xmlDOMWrapCloneNode

Avoids a corrupted tree in error case.

---
tree: Refactor node insertion

Also fixes a text coalescing bug.

---
string: Fix xmlStrncatNew(NULL, "")

This should return "" not NULL.

---
malloc-fail: Report in xmlAddAttributeDecl

---
malloc-fail: Fix erroneous report in xmlNodeGetBaseSafe

---
html: Fix quadratic behavior in htmlNodeDump

Use an efficient buffer allocation scheme.

---
save: Check for output buffer errors

Report more error conditions.

---
valid: Fix some return codes after errors

---
valid: Fix hash removal in xmlRemoveRef

Don't create a NULL entry.

---
tree: Fix error return in xmlGetPropNodeValueInternal

---
tree: Don't allow misuse of xmlAddChild

xmlAddChild assumes that the child is unlinked. If the child is already
linked, return an error instead of corrupting the tree.

---
tree: Fix xmlAddPropSibling with duplicate attributes

Look up existing attribute before unlinking new attribute. This makes
it easier for the fuzzer to detect which attribute will de deleted if
there are multiple attributes with the same name.

---
tree: Fix indentation in xmlAddPropSibling

---
tree: Fix xmlAddSibling with last sibling

If the node to be added was already at the correct position, the tree
could be corrupted.

---
tree: Fix xmlDocSetRootElement with multiple top-level elements

Fix xmlDocSetRootElement when setting the original root if multiple
top-level elements are present.

---
catalog: Fetch XML catalog before dumping

Catalog entries seem to be loaded lazily.

Should fix #699.

---
xmlreader: Fix xmlTextReaderConstEncoding

Regression from commit f1c1f5c6.

Fixes #697.

---
tests: Add test for issue #661

---
tests: Remove testOOM

This was never part of the standard test suite and we now test OOM error
handling more comprehensively with fuzz testing.

---
encoding: Check whether encoding handlers support input/output

The "HTML" encoding handler doesn't support input which could lead to a
wrong error report.

---
tests: Remove unneeded error formatting code

---
xinclude: Allow empty nodesets

There's no reason to treat an empty nodeset as error.

---
runtest: Fix return code in rngTest

---
tests: Try to fix RelaxNG test cases

These were added recently in ea695ac0 and 8074b881 but were a total mess
of symbolic links and apparently mixed up files.

Symbolic links don't work on Windows.

Try to salvage one of the tests.

---
io: Fix detection of compressed streams

Make sure that we don't try to open uncompressed streams with a
compression handler in copying mode.

---
io: Rework default callbacks

Register a dummy callback struct for default callbacks. Handle them in a
separate function which will later allow to return meaningful error
codes.

---
error: Remove xmlSimpleError

---
Makefile.am: omit $(top_builddir) from DEPS and LDADDS

BSD make is less liberal than GNU make in matching targets, and so it
tries to resolve the dependency `./libxml2.la` and fails to match the
target `libxml2.la`.

---
encoding: Support ASCII in xmlLookupCharEncodingHandler

Return our built-in ASCII handler. This was never implemented and
triggered the new and stricter error checks.

---
malloc-fail: Fix use-of-uninitialized-value in xmlParseConditionalSections

Short-lived regression.

---
malloc-fail: Fix erroneous reports in xmlNodeListGetString

Short-lived regression.

---
valid: Improve addition and deletion of IDs

Introduce a new API function xmlAddIDSafe that returns a separate error
code if a memory allocation fails.

Store a pointer to the ID struct in xmlAttr so attributes can be
freed without allocating memory. It's impossible to report malloc
failures in deallocation code.

---
include: Move declaration of xmlInitGlobals

Fix downstream build issues after reworking globals.h.

---
autotools: Fix option description

---
tree: Another fix related to #538

Should fix #639.

---
tree: Fix regression when copying DTDs

This reverts commit d39f78069dff496ec865c73aa44d7110e429bce9.

Fixes #634.

---
tests: Fix tests --with-valid --without-xinclude

Fix a copy/paste error from commit 4eba9f9c.

Fixes #632.

---
DOAP: Add download and issue tracker entries

---
autotools: Stop checking for snprintf

This works around a bug when cross-compiling to 32-bit MinGW:

https://sourceforge.net/p/mingw-w64/bugs/935/

This means that we don't fall back to the bundled Trio library if
snprintf couldn't be detected. Trio support is completely untested, most
likely broken and will be removed soon.

Fixes #625.

---
hash: Fix deletion of entries during scan

Functions like xmlCleanSpecialAttr scan a hash table and possibly delete
entries in the callback. xmlHashScanFull must detect such deletions and
rescan the entry.

This regressed when rewriting the hash table code in 4a513d56.

Fixes #626.

---
dict: Fix '__thread' before 'static'

When used with extern or static, __thread must appear immediately after
the other storage class specifier.

Fixes #621.

---
fix: more pthread weak references in globals.c

---
fix: pthread weak references in globals.c

Linking executables will fail on systems with glibc < 2.34 without
declaring these symbols as weak references.

In commit c19771c1f13de9196f98260d142d8c8672eb5733 these references
were moved to globals.c from threads.c, but the `#pragma weak`
declarations were lost in the process.

Also removing unneeded weak declarations from threads.c.

---
encoding: Fix decoding of large chunks

After 95e81a36, we must support XML_ENC_ERR_SPACE when using built-in
encoding handlers.

Should fix #610.

---
python: Make it compatible with python3.12

Python 3.12 removes distutils so it's mandatory to use setuptools with
python >= 3.12.

This patch prints a message when trying to run the setup.py script with
a python >= 3.12 without setuptools and try to use the setuptools import
by default.

This patch also creates a new file, pyproject.toml [1], to prepare for
building in modern systems.

[1] https://peps.python.org/pep-0517/

---
threads: Fix --with-thread-alloc

Fixes #606.

---
fuzz: Disable XML_PARSE_SAX1 option in xml fuzzer

There a no plans to fix quadratic behavior in the legacy SAX1 interface.

---
encoding: Fix infinite loop in xmlCharEncInput

Short-lived regression from 95e81a36.

---
hash: Rewrite hash table code

This is a complete rewrite of the code in hash.c

Move from a chained hash table implementation to open addressing with
Robin Hood probing. This allows to increase the maximum fill factor and
further reduce the growth factor, saving considerable amounts of memory
without sacrificing performance.

To make this work, hash values are now cached in the table entry
also avoiding many key comparisons.

Tables are created lazily with a smaller minimum size.

Insertion functions now report an error if growing the table resulted in
a memory allocation failure.

Some string comparisons were optimized to call directly into libc
instead of using the xmlstring API.

The length of inserted keys is computed along with the hash improving
allocation performance.

Bounds checking was made more robust.

In dictionary-based mode, unneeded interning of strings is avoided.

---
cmake: Only use pkg-config for .pc files, not for building binaries

Using `pkg_check_modules(FOO IMPORTED_TARGET foo)` with
`target_link_libraries()` leads to `INTERFACE_LINK_LIBRARIES` in the
resulting export file having `\$<LINK_ONLY:PkgConfig::FOO>` rather than
the currently expected `\$<LINK_ONLY:FOO::FOO>`, leading to breakage.
This can be worked around like so:

    target_link_libraries(UseFoo
      PUBLIC "$<BUILD_INTERFACE:PkgConfig::FOO>"
      INTERFACE "$<INSTALL_INTERFACE:FOO::FOO>"
    )

However, following some discussion, it is preferable to primarily use
find modules as before and only use `pkg_check_modules` for correctly
populating the .pc file.

Also move `find_package()` calls earlier so that builds fail faster when
dependencies are missing.

---
regexp: Fix status codes and handle invalid UTF-8

Fixes #561.

---
error: Make xmlGetLastError return a const error

This is a slight break of the API, but users really shouldn't modify the
global error struct. The goal is to make xmlLastError use static buffers
for its strings eventually. This should warn people if they're abusing
the struct.

---
python: Fix tests

Revert part of commit 138213ac.

---
html: Fix logic in htmlAutoClose

Note that the function is never called with a NULL newtag.

Fixes #591.

---
xmlreader: Fix EOF detection in xmlTextReaderPushData

---
python: Fix potential crash in tests/thread2.py

Memory debugging must be initialized.

---
hash: Clean up libxml/hash.h

Rename variables, fix subincludes, whitespace.

---
autotools: Make --with-minimum disable lzma support

Fix an oversight when handling the --with-minimum option.

---
globals: Move remaining declarations to correct places

globals.h is now deprecated. Sanity is restored.

---
globals: Move remaining globals back to correct header files

This undoes a lot of damage.

---
globals: Deprecate xmlLastError

The last error should be accessed with xmlGetLastError.

---
globals: Use thread-local storage if available

Also use thread-local storage to store globals on POSIX platforms.

Most importantly, this makes sure that global variable access can't fail
when allocating the global state struct.

---
xinclude: Fix 'last' pointer in xmlXIncludeCopyNode

Also set the 'last' pointer for the root node.

Fixes https://gitlab.gnome.org/GNOME/libxslt/-/issues/93

---
hash: Fix use-of-uninitialized-value

Short-lived regression.

---
build: Generate better pkg-config files for static-only builds

pkg-config supports `Requires.private` and `Libs.private` fields for
static linking. However, if you're building a dynamic binary, then
pkg-config will use the non-private fields, even if just the static
libxml2 is available. This will result in libxml2 being underlinked,
causing the build to fail. The solution is to fold the private fields
into the non-private fields when the shared libxml2 is not being built.

This works for Autotools and CMake. Meson also knows how to handle this
when it automatically generates pkg-config files.

---
build: Generate better pkg-config file for SYSROOT builds

The -I and -L flags you use to build should not necessarily be the same
ones you bake into installed files. If you are building with
dependencies located under a SYSROOT then the installed files should
have no knowledge of that SYSROOT. For example, if the build requires
`-L/path/to/sysroot/usr/lib/foo` then only `-L/usr/lib/foo` should be
baked into the installed files.

pkg-config is SYSROOT-aware, so this issue can be sidestepped by using
the `Requires` field rather than the `Libs` and `Cflags` fields. This is
easily resolved if you rely solely on pkg-config, but this project falls
back to standard Autoconf checks, so a little more effort is required.

Unfortunately, this issue cannot feasibly be resolved for CMake.
`find_package` is used rather than `pkg_check_modules`, so we cannot
tell whether a pkg-config file for each dependency is present or not,
even if `find_package` uses pkg-config behind the scenes. The CMake
build does not record any dependency -I or -L flags into the pkg-config
file anyway. This is a problem in itself, although these dependencies
are most likely installed to standard locations.

Meson is very much better at handling this, as it generates the
pkg-config file automatically using the correct logic.

---
python: Fix tests on MinGW

Add the directory containing libxml2.dll with os.add_dll_directory to
make tests work on MinGW.

This has changed in Python 3.8 but for some reason, the issue only
turned up with Python 3.11 on MinGW. Contrary to documentation, copying
libxml2.dll into the directory containing the .pyd file doesn't work.

---
valid: Fix c1->parent pointer in xmlCopyDocElementContent

Fixes #572.

---
autotools: fix Python module file ext for cygwin/msys2

both use .dll, not .pyd

---
malloc-fail: Fix null-deref with xmllint --copy

See #344. Fixes #552.

---
autotools: Improve iconv check

Use a custom test program which includes iconv.h, so we can check
whether the possibly redefined symbols in this header file match the
symbols in the iconv library.

Should fix #547.

---
xinclude: Fix false positives in inclusion loop detection

xmlXIncludeRecurseDoc can realloc the cache.

---
autotools: Fix ICU detection

Fixes #540.

---
autoconf: fix iconv library paths

and pass cflags when building executables

See 0f77167f for prior related work

---
threads: Fix startup crash with weak symbol hack

Fix another issue when running with older libc, threads and libpthread
not linked in.

---
regexp: Fix mistake in previous commit

The `ret = 0` line should have been deleted.

Fixes #531.

---
regexp: Fix determinism checks

Swap arguments in initial call to xmlFARecurseDeterminism.

Fix the check whether we revisit the initial state in
xmlFARecurseDeterminism.

If there are transitions with equal atoms and targets but different
counters, treat the regex as deterministic but mark the transitions as
non-deterministic internally.

Don't overwrite zero return value of xmlFAComputesDeterminism
with non-zero value from xmlFARecurseDeterminism.

Most of these errors lead to non-deterministic regexes not being
detected which typically isn't an issue. The improved code may break
users who relied on buggy behavior or cause other bugs to become
visible.

Fixes #469.

---
regexp: Fix checks for eliminated transitions

'to' can be set to -1 or -2 when eliminating transitions, so check for
all negative values.

---
regexp: Fix cycle check in xmlFAReduceEpsilonTransitions

The visited flag must only be reset after the first call to
xmlFAReduceEpsilonTransitions has finished. Visiting states multiple
times could lead to unnecessary processing of duplicate transitions.

Similar to 68eadabd.

---
writer: Add error check in xmlTextWriterEndDocument

---
libxml.m4: Fix "possibly undefined macro" error

See #527.

---
cmake: Fix va_copy detection

va_copy is defined by the standard as a macro, so check_function_exists
will not detect it; check_symbol_exists will.

Fixes #528.

---
libxml.m4: Fix quoting

Should fix #527.

---
testchar: Fix return value in testUserEncoding

---
html: Rely on CUR_CHAR to grow the input buffer

- Remove useless invocations of GROW.
- Add some error checks.
- Fix invocations of SHRINK.

---
xzlib: Fix implicit sign change in xz_open

---
malloc-fail: Fix type confusion after xmlSchemaFixupTypeAttributeUses

Found with libFuzzer, see #344.

---
fuzz: Fix duplicate detection in fuzzEntityRecorder

Store a non-NULL value in the hash.

---
fuzz: Fix Makefile dependencies

---
threads: Really fix crash with weak pthread symbols

Fix more regressions from 7010d877 and 71931233.

Fixes #488.

---
xinclude: Fix include guard

---
threads: Fix crash with weak pthread symbols

Regressed in 7010d877. Should fix #488.

---
malloc-fail: Fix leak of xmlRegAtom

Found with libFuzzer, see #344.

---
malloc-fail: Fix infinite loop in htmlParseDocTypeDecl

Found with libFuzzer, see #344.

---
malloc-fail: Fix infinite loop in htmlParseStartTag

Found with libFuzzer, see #344.

---
malloc-fail: Fix infinite loop in htmlParseContentInternal

Found with libFuzzer, see #344.

---
malloc-fail: Fix infinite loop in htmlParseStartTag

Found with libFuzzer, see #344.

---
malloc-fail: Fix leak of xmlCharEncodingHandler

Also free handler if its name is NULL.

Found with libFuzzer, see #344.

---
encoding: Cast toupper argument to unsigned char

Fixes undefined behavior.

Also cast return value explicitly to fix implicit-integer-sign-change
checks.

---
xinclude: Avoid timeouts when fuzzing

Fix the check for maximum number of inclusions.

---
autotools: Fix make distcheck

- Add private/xinclude.h to EXTRA_DIST
- Add runsuite.log to CLEANFILES

Fixes #485.

---
malloc-fail: Handle memory errors in xmlTextReaderEntPush

Unfortunately, there's no way to properly report memory errors.

Found with libFuzzer, see #344.

---
uri: Add explicit cast in xmlSaveUri

Fix -fsanitize=implicit-conversion error. We should probably
percent-escape the host name here.

---
buf: Fix return value of xmlBufGetInputBase

Don't return (size_t) -1 in error case.

Found with libFuzzer and -fsanitize=implicit-conversion.

---
Remove symbols from version script

The version script didn't account for symbols disabled by configuration
options. This has caused problems on some OSs in the past and breaks
lld 16 which enables --no-undefined-version by default.

A proper fix would be rather involved, so we simply remove all symbols
from the version script. This is an ELF-only feature and libxml2 never
made use of symbol versioning anyway. Ultimately, this removes the need
for a lot of bookkeeping without tangible benefits.

We have to keep the version nodes to avoid errors when running binaries
linked against older versions of libxml2.

Fixes #473.

---
tree: Fix recursion check in xmlStringGetNodeList

Use the new entity flag to check for recursion.

---
xmlreader: Try to fix regression when reading from memory

This reverts a change from commit 2059df53, see #462.

---
uri: Fix handling of port numbers

Allow port number without host, real fix for #71.

Also compare port numbers in xmlBuildRelativeURI.

Fix handling of port numbers in xmlUriEscape.

---
python/tests/reader2: always exit(1) if a test fails

Batch up the errors in the first parse tests and ensure that the last
tests exit with an error if they fail.

Also remove an unused import.

---
testModule: exit if the module can't be opened

Instead of silently exiting with success when the module cannot be found,
emit a message and fail the test.

---
CI: fix CI on MinGW builds

The XML test case tarball isn't actually compressed: the published URL
is a .tar and fetches of the .tar.gz redirect silently to the .tar,
which is then passed to gzip which refuses to decompress uncompressed
data.

Fetch the .tar as that is the documented URL, and remove the
decompression.

---
html: Fix htmlInitAutoClose documentation

---
libxml.m4: fix -Wstrict-prototypes

Signed-off-by: Sam James <sam@gentoo.org>

---
Fix .editorconfig

---
warnings: Work around MSVC bug

MSVC apparently complains when passing a `const char **` to memset.
Unlike `const char *const *`, this isn't a pointer to const memory.

---
Fix .editorconfig

---
doc: Fix indentation in source XML files

---
malloc-fail: Fix infinite loop in xmlSkipBlankChars

Found with libFuzzer, see #344.

---
warnings: Fix -Wstrict-prototypes warning

---
Revert "xinclude: Fix regression with nested includes"

This reverts commit 7f04e297318b1b908cec20711f74f75625afed7f which
caused memory errors.

See #424.

---
cmake: Build static library with -DLIBXML_STATIC

Fix scope of target_compile_definitions command.

Fixes #425.

---
xinclude: Fix regression with nested includes

This reverts commits 74dcc10b and 87d20b55.

Fixes #424.

---
autotools: Fix winsock detection

Hardcode the required library on MinGW because winsock uses non-standard
calling conventions on 32-bit Windows which makes AC_SEARCH_LIBS fail.

Should fix #406.

---
gitlab-ci: Fix tar invocation

---
gitlab-ci: Fix SUFFIX, remove MINGW_PATH

---
autotools: Disable parallel Python build

Makefile rules with multiple output files don't work reliably with
parallel builds. There are several ways to fix this issue with GNU Make,
but they aren't portable. I'd be really interested in a totally
reliable, cross-platform solution to this problem.

.NOTPARALLEL is also understood by BSD make, at least.

---
autotools: Fix bug with multiline arguments

Should fix #404.

---
autotools: Try to fix bug with multiline arguments

Only happens with older autoconf?

---
autotools: Fix network checks on Windows

---
Use $MSYSTEM and 'bash -lc' in MinGW CI

Setting the $MSYSTEM environment variable and invoking shell scripts
with 'bash -lc' sets up the correct MinGW environment.

See https://www.msys2.org/docs/ci/

---
Fix detection of GNU libiconv

GNU libiconv prefixes symbols with "lib".

---
cmake: Fix Python installation

Don't install into ${Python_SITEARCH} for now.

---
Fix Python build on Windows

Build Python bindings with -no-undefined on Windows. Remove libs that
should already be set by PKG_CHECK_MODULE.

---
Fix libxml_PyFileGet

Broken in commit 75cdb6dd.

---
Fix dlopen check

---
Fix test in configure.ac

Broken in commit b4847d60.

---
Fix unused variable warning in python/types.c

---
Fix overflow check in SAX2.c

---
Fix libxml_PyFileGet with stdout on macOS

macOS returns O_RDWR for standard file descriptors, but fails to write
to stdout or stderr when opened with fdopen(dup_fd, "rw").

---
build: require automake-1.16.3 or later

We need
https://git.savannah.gnu.org/cgit/automake.git/commit/?id=e21d46f
to avoid an error like

    checking for PYTHON... no
    configure: error: Package requirements (python-3.1) were not met:

    No package 'python-3.1' found

With python-3.10.

Partially fixes #392.

Note that there is another issue with python-3.10, like:

    checking for python... no
    checking for python2... no
    checking for python3... no
    checking for python3.9... no
    ...
    configure: error: no suitable Python interpreter found

Fixing this one will need to require bumping automake version again, but
the automake version containing this fix is not released yet.  And, this
is rather minor because most environment has "python3" as a symlink to
"python3.10" or whatever the latest python3.x installed.

---
Work around strange -fsanitize=integer issue

With clang 14, __attribute__ ((nosanitize)) stops working with

    -fsanitize=undefined,integer

Using the following works (and should be equivalent)

    -fsanitize=undefined,unsigned-integer-overflow,implicit-conversion

---
Move some HTML functions to correct header file

---
Fix update call in apibuild.py

There are still a few places where try/except is used for branching.
This is a bad idea since it can hide errors like this one.

---
Fix testapi when building --without-sax1

Broken in commit c61e1273.

---
Fix htmlReadMemory mixing up XML and HTML functions

Also see fe6890e2.

---
Fix xmlCtxtReadDoc with encoding

xmlCtxtReadDoc used to create an input stream involving
xmlNewStringInputStream. This would create a stream without an input
buffer, causing problems with encodings (see #34).

After commit aab584dc3, an error was returned even with UTF-8 encodings
which happened to work before.

Make xmlCtxtReadDoc call xmlCtxtReadMemory which doesn't suffer from
these issues. Also fix htmlCtxtReadDoc.

Fixes #397.

---
Fix order of exports in libxml2-api.xml

The values passed to the `uniq` function are dictionary keys and should
already be unique. On older Python versions, this would reshuffle the
list after it had just been sorted.

---
Fix unintended fall-through in xmlNodeAddContentLen

---
Fix missing NUL terminators in xmlBuf and xmlBuffer functions

* buf.c:
(xmlBufAddLen):
- Change check for remaining space to account for the NUL
  terminator.  When adding a length exactly equal to the number
  of unused bytes, a NUL terminator was not written.
(xmlBufResize):
- Set `buf->use` and NUL terminator when allocating a new
  buffer.
* tree.c:
(xmlBufferResize):
- Set `buf->use` and NUL terminator when allocating a new
  buffer.
(xmlBufferAddHead):
- Set NUL terminator before returning early when shifting
  contents.

---
Fix xmlCleanupThreads on Windows

Fix #ifdef logic:

- Also free TLS key in static build.
- Always reset 'run_once' state.

---
Fix double colon typos in xmlBufferResize()

Introduced in commit 6c283d83e.

---
Restore behavior of htmlDocContentDumpFormatOutput()

Patch by J Pascoe of Apple.

* HTMLtree.c:
(htmlDocContentDumpFormatOutput):
- Prior to commit b79ab6e6d92, xmlDoc.type was set to
  XML_HTML_DOCUMENT_NODE before dumping the HTML output, then
  restored before returning.

---
Add xptr_locs flag to win32/configure.js

The xptr_locs flag was added in commit 67070107 but no flag was added to
win32/configure.js, leading a compile error I had on windows where the
@WITH_XPTR_LOCS@ macro was not replaced properly on windows.

---
fix typo in comment

---
fix Schematron spelling

---
Don't try to copy children of entity references

This would result in an error, aborting the whole copy operation.
Regressed in commit 7618a3b1.

Fixes #371.

---
testapi: remove leading slash from "/missing.xml"

Fixes an error when running tests in a sandbox on Gentoo Linux.

Bug: https://bugs.gentoo.org/839804

---
cmake: Remove more unnecessary files installed in docs dir

Sync with commit 95766541622b3a66c929e2e272b0252750d0174d
Don't install man pages in docs directory, these are already installed
in the correct path and while at it sort list
---
Mark more static data as `const`

Similar to 8f5710379, mark more static data structures with
`const` keyword.

Also fix placement of `const` in encoding.c.

Original patch by Sarah Wilkin.

---
CMakeLists.txt: Fix LIBXML_VERSION_NUMBER

Also fix LIBXML_VERSION and remove LIBXML_VERSION_STRING.

Fixes #365.

---
Make testchar return an error on failure

---
Fix GitLab pages job

---
Add windows includes to xmlIO.c

xmlIO.c calls read() and getcwd() which need io.h and direct.h
respectively when compiling on windows. Otherwise, a compiler error may
be raised saying that read() and getcwd() were used implicitly.

This was regressed recently, I'm guessing it was due to the changes to
win32config.h in commit 84085a26

---
Use AM_PATH_PYTHON/PKG_CHECK_MODULES for python bindings

* `AM_PATH_PYTHON` is a much more common idiom for building
  and installing python modules than writing your own.
* It also makes cross-compiling the python bindings possible.
  Previously the `PYTHON_CFLAGS`/`PYTHON_LIBS` would have been
  based on the `--build` python and not the `--host` python.
  By using `pkg-config`, we can always redirect the python-X.Y.pc.

Bug: https://bugs.gentoo.org/582130

---
Fix --without-debug build

Broken in commit 2cc93f77.

Fixes #354.

---
Fix weak pthread symbols after commit 4adb7677

Add missing mutexattr symbols.

---
Fix potential double-free in xmlXPtrStringRangeFunction

Fix double-free in an unlikely error condition. Thanks to Wentao Liang
for the report.

Fixes #341.

---
Remove regressions.py from Makefile.am

This patch removes regressions.py and regressions.xml from Makefile.am.
These files were removed in 5ec1ef1c and since they are still in
Makefile.am, it causes "make dist-all" to fail.

---
Fix recursion check in xinclude.c

Compare the included URL with the document's URL to detect local
inclusions.

Fixes #348.

---
Use strtoul() instead of sscanf, and correct data types that break GCC.

---
Properly fold whitespace around the QName value when validating an XSD schema.

(May also need fixing in other places.)

Issue: 239

---
Fix certain combinations of regex range quantifiers

Fix regex transitions that have both min/max and a counter. In this
case, we want to save the regex state before incrementing the counter.

Fixes #301 and the issue reported here:

https://mail.gnome.org/archives/xml/2016-April/msg00017.html

---
Fix range quantifier on subregex

Make sure to add counted exit transitions before other counter
transitions. Otherwise, we won't backtrack correctly.

Fixes #65.

---
Fix unused variable warnings with disabled features

---
Fix recovery from invalid HTML start tags

Only try to parse a start tag if there's a '<' followed by an ASCII
letter. This is more in line with HTML5 and the old behavior in
recovery mode. Emit a literal '<' if the following character is
invalid.

Fixes #101.
Fixes #339.

---
Fix --without-valid build

Regressed in commit 652dd12a.

---
Fix fuzz/.gitignore after fixing VPATH build

---
Fix source URL in libxml.spec.in

---
Fix fuzzer test with VPATH build

Also fixes make distcheck.

---
Fix distribution after README change

---
Make xmlFuzzReadString return a zero size in error case

Avoids use of uninitialized memory.

---
Fix xmlSetTreeDoc with entity references

The children member of entity reference nodes points to the entity
declaration and must never be followed when traversing a tree. In
the worst case, this could lead to an infinite loop.

It's somewhat unclear how moving entity references to other documents
should work exactly. For now we simply set the children pointer to NULL
to avoid a reference to the original document.

Fixes #42.

---
Fix "xmllint -"

Short-lived regression from commit d12be00d.

---
Fix double counting of CRLF in comments

Fixes #151.

---
Properly handle nested documents in xmlFreeNode

Client code should never add document nodes as children of other nodes,
but even our own XPointer code has a bug that can produce such trees.
Make sure to really free nested documents. Also see commits 0815302d
and 0762c9b6.

Should fix #269.

---
Fix unused function warning in testapi.c

---
Fix regression with PEs in external DTD

Fix a regression introduced with commit a28f7d87. In some cases,
parameter entity references in external DTDs wouldn't be expanded.

Fixes #306.

---
Fix Null-deref-in-xmlSchemaGetComponentTargetNs
---
Fix libxml2.doap

Add description.

Change category to "infrastructure". Apparently, "platform" isn't
allowed anymore.

Add programming language.

---
Fix htmlReadFd, which was using a mix of xml and html context functions

---
Fix random dropping of characters on dumping ASCII encoded XML

Fix a bug in xmlCharEncOutput return value which will cause
xmlNodeDumpOutput to drop characters randomly.

xmlCharEncOutput returns zero if the length of the input buffer is
zero but ignores the fact that it may already encoded the input buffer
and the input's length is zero due to the fact that xmlEncOutputChunk
returned -2 errors and underlying code tries to fix the error by
encoding the input.

xmlCharEncOutput is collecting the number of bytes written to the
output buffer but is returning zero instead of the total number of
bytes in this situation. This commit will fix this issue by returning
the total number of bytes instead. So the xmlNodeDumpOutput will also
continue writing and will not stop due to the fact that it mistakenly
thinks the output buffer is not changed in that iteration.

Fixes #314

---
cmake: fix `ATTRIBUTE_DESTRUCTOR` definition

The code expects it to be set to the attribute for `xmlDestructor`, but
in CMake, it is only ever available as `1` or undefined. Instead, match
the behavior or autoconf.

---
Fix parse failure when 4-byte character in UTF-16 BE is split across a chunk

This makes the logic in UTF16BEToUTF8() match UTF16LEToUTF8().

* encoding.c:
(UTF16LEToUTF8):
- Fix comment to describe what the code does.
(UTF16BEToUTF8):
- Fix undefined behavior which was applied to UTF16LEToUTF8() in
  2f9382033e.
- Add bounds check to while() loop which was applied to
  UTF16LEToUTF8() in be803967db.
- Do not return -2 when (in >= inend) to fix the bug.  This was
  applied to UTF16LEToUTF8() in 496a1cf592.
- Inline (<< 8) statements to match UTF16LEToUTF8().

Add the following tests and results:

  test/text-4-byte-UTF-16-BE-offset.xml
  test/text-4-byte-UTF-16-BE.xml
  test/text-4-byte-UTF-16-LE-offset.xml
  test/text-4-byte-UTF-16-LE.xml

---
python/Makefile.am: use *_LIBADD, not *_LDFLAGS for LIBS

This fixes over-linking in the built Python modules with various libraries.

*_LIBADD is intended for adding additional libraries for linking, while
*_LDFLAGS is for miscellaneous extra flags (possibly user-supplied).

If using -Wl,-as-needed within user-supplied LDFLAGS, it is passed too
late (after the library link line) and therefore has no effect.

Notes:

* Noticed while working on Gentoo's migration to libxcrypt because
libxml2's Python modules were linking to libcrypt (and other libraries)
unexpectedly.

* It was suggested we could actually stop linking explicitly with all
of Python's libraries / don't copy its LDFLAGS, but this resolves
the original issue downstream and is a separate discussion. I couldn't
find any clear documentation for/against such a change.

Bug: https://bugs.gentoo.org/798942
Signed-off-by: Sam James <sam@gentoo.org>

---
Fix check for libtool in autogen.sh

libtoolize is named glibtoolize on some macOS systems.

---
Fix buffering in xmlOutputBufferWrite

Fix a regression introduced with commit a697ed1e which caused
xmlOutputBufferWrite to flush internal buffers too late.

Fixes #296.

---
Patch to forbid epsilon-reduction of final states

When building the internal representation of a regexp, it is possible
that a lot of empty transitions are created. Therefore there is a step
to reduce them in the function xmlFAEliminateSimpleEpsilonTransitions.

There is an error there for this case:

* State 1 has a transition with an atom (in this case "a") to state 2.
* State 2 is final and has an epsilon transition to state 1.

After reduction it looked like:
* State 1 has a transition with an atom (in this case "a") to itself
  and is final.

In other words, the empty string is accepted when it shouldn't be.

The attached patch skips the reduction step for final states.
An alternative would be to insert or increment counters when reducing a
final state, but this seemed error prone and unnecessary, since there
aren't that many final states.

Fixes #282

---
Use version in configure.ac for CMake

Now CMake script reads version from configure.ac to prevent unsynchronized versions

---
Fix whitespace when serializing empty HTML documents

The old, non-recursive HTML serialization code would always terminate
the output with a newline. The new implementation omitted the newline
if the document node had no children. Readd the newline when
serializing empty documents.

Fixes #266.

---
Fix regression in xmlNodeDumpOutputInternal

Commit 85b1792e could cause additional whitespace if xmlNodeDump was
called with a non-zero starting level.

---
Fix handling of unexpected EOF in xmlParseContent

Readd the XML_ERR_TAG_NOT_FINISHED error on unexpected EOF which was
removed in commit 62150ed2.

This commit also introduced a regression for direct users of
xmlParseContent. Unclosed tags weren't checked.

---
Fix htmlTagLookup

Fix regression introduced with b25acce8. Some users like libxslt may
call the HTML output functions on documents with uppercase tag names,
so we must keep case-insensitive string comparison.

Fixes #248.

---
Fix include order in c14n.h

- Include xmlversion.h before testing feature flags.
- Include libxml headers before extern "C".

Fixes #226.

---
Fix duplicate xmlStrEqual calls in htmlParseEndTag

---
Improve HTML fuzzer stability

Call htmlInitAutoClose during fuzzer initialization to fix stability
issue. Leave a note concerning problems with this function.

---
Add the copy of type from original xmlDoc in xmlCopyDoc()

A bug related to php DOMDocument:

    https://bugs.php.net/bug.php?id=80665

When copy/clone an html document, the xmlDoc->type goes from
XML_HTML_DOCUMENT_NODE to XML_DOCUMENT_NODE.

---
Fix ICU build in CMake

---
Fix caret in regexp character group

Apply Per Hedeland's patch from

    https://bugzilla.gnome.org/show_bug.cgi?id=779751

Fixes #188.

---
Allow port numbers up to INT_MAX

Also return an error on overflow.

---
Fix SEGV in xmlSAXParseFileWithData

Fixes #181.

---
Fix variable name in win32/configure.js

Fix copy/paste error from previous commit.

---
Fix regression introduced with commit 74dcc10b

The code wasn't dead after all, but I can see no reason in delaying
the XPointer evaluation. This could lead to nodes included earlier
appearing in XPointer results.

---
Fix autotools warnings

---
Fix quadratic runtime in xi:fallback processing

Copying the tree would lead to runtime quadratic in nested fallback
depth, similar to naive string concatenation.

---
Fix corner case with empty xi:fallback

xi:fallback could become empty after recursive expansion. Use a flag
to track whether nodes should be skipped.

---
Fix column number accounting in xmlParse*NameAndCompare

Thanks to Frederic Vancraeyveldt for the report.

---
Fix exponential runtime and memory in xi:fallback processing

When creating XML_XINCLUDE_START nodes, the children of the original
xi:include node must be freed, otherwise fallback content is copied
twice, doubling runtime and memory consumption for each nested
xi:fallback/xi:include pair.

Found with libFuzzer.

---
Update fuzzing code

- Shorten timeouts
- Align options from Makefile and options files
- Add section headers to Makefile
- Skip invalid UTF-8 in regexp fuzzer
- Update regexp.dict
- Generate HTML seed corpus in correct format

---
Fix exponential runtime in xmlFARecurseDeterminism

In order to prevent visiting a state twice, states must be marked as
visited for the whole duration of graph traversal because states might
be reached by different paths. Otherwise state graphs like the
following can lead to exponential runtime:

  ->O-->O-->O-->O-->O->
     \ / \ / \ / \ /
      O   O   O   O

Reset the "visited" flag only after the graph was traversed.

xmlFAComputesDeterminism still has massive performance problems when
handling fuzzed input. By design, it has quadratic time complexity in
the number of reachable states. Some issues might also stem from
redundant epsilon transitions. With this fix, fuzzing regexes with a
maximum length of 100 becomes feasible at least.

Found with libFuzzer.

---
Fix *NodeDumpOutput functions

Only output end tag for elements. Should fix serialization of document
fragments.

---
Fix .gitattributes

The files in 'test' and 'result' have mixed line endings, so disable
end-of-line conversion.

---
Fix return values and documentation in encoding.c

Make xmlEncInputChunk and xmlEncOutputChunk return 0 on success and
never a positive value.

Make xmlCharEncFirstLineInt, xmlCharEncFirstLineInt and
xmlCharEncOutFunc return the number of bytes written.

---
Report error for invalid regexp quantifiers

---
Fix return value of xmlC14NDocDumpMemory

Make sure to return -1 in case of buffer errors.

Fixes #174.

---
Fix return value of xmlCharEncOutput

Commit 407b393d introduced a regression caused by xmlCharEncOutput
returning 0 in case of success instead of the number of bytes written.
Always use its return value for nbchars in xmlOutputBufferWrite.

Fixes #166.

---
Fix typos

Resolves #133.

---
Enable error tests with entity substitution

---
Fix xmlSchemaGetCanonValue formatting for date and dateTime

Per https://www.w3.org/TR/xmlschema-2/#dateTime-lexical-representation,
the date portion is supposed to use '-' as the delimiter

---
Fix overflow handling in xmlBufBackToBuffer

Don't overwrite 'use' and 'size' members after clamping to INT_MAX.

Thanks to Ranier Vilela for pointing this out in merge request !56.

---
xml2-config.in: fix regressions introduced by commit 2f2bf4b2c

One of regressions introduced by commit
2f2bf4b2caa1cb9a4a5039b7a44db101943382d1 aka v2.9.10-rc1~56 is that
cflags and libs variables are used uninitialized, resulting to
the following behaviour:

$ cflags=foo libs=bar sh ./xml2-config.in --prefix
@prefix@
foo bar

Another regression is that the test for these variables is flawed.

Fixes: 2f2bf4b2c ("xml2-config.in: Output CFLAGS and LIBS on the same line")

---
Another fix for conditional sections at end of document

The previous fix introduced an uninitialized read.

---
Fix exponent digits when running tests under old MSVC

Switch printf output format to two-digit exponent under certain MSVC
versions.

Closes #111.

---
Fix a few more typos ("fonction")

---
Fix empty branch in regex

Fixes bug 649244:
https://bugzilla.gnome.org/show_bug.cgi?id=649244

Closes #57.

---
Optimize build instructions in README

Fixes bug #792181
https://bugzilla.gnome.org/show_bug.cgi?id=792181

Merge request !40

---
Partial fix for comparison of xs:durations

See https://bugzilla.gnome.org/show_bug.cgi?id=777139

Thanks to Zhongyuan Zhou for the initial merge request !34.

---
Fix typos: tree: move{ -> s}, reconcil{i -> }ed, h{o -> e}ld by...

...seems to { -> be to} add.

Signed-off-by: Jan Pokorn <jpokorny@redhat.com>

---
Fix comments in test code

---
Fix unsigned int overflow
---
fix comment in testReader.c

---
dict.h: gcc 2.95 doesn't allow multiple storage classes

This is a partial revert of commit c71f9305. I'm not sure what issue
this commit was trying to solve but it seems to be related to a
circular dependency. It might be related to tree.h being included
from dict.h which is unnecessary.

Resolves !22.

---
Stop defining _REENTRANT on some Win32 platforms

The _REENTRANT macro was defined unconditionally on some Win32 builds
using the Microsoft C runtime. It shouldn't have an effect under MSVCRT
and was presumably only defined because of the LIBXML_THREAD_ENABLED
issue fixed with the previous commit.

---
Change bug tracker URL

---
Fix nanohttp.c on MinGW

Commit e3890546 broke nanohttp.c on (old) MinGW. MinGW-w64 wasn't
affected.

Should fix #36. Thanks to Simon Sobisch for the report.

---
Fix Python bindings under Windows

- Correct linker flags for MinGW-w64
- Adjust PATH to find libxml2.dll when running tests

---
Fix unused function warning in testapi.c

Check whether all param and return types are known before generating
functions for param types. Otherwise, unused functions end up in
testapi.c.

---
reader: Fix documentation comment

---
Allow choice within choice in nameClass in RELAX NG

The pattern nameClass allows for nested choice elements, for example

  <name>
    <choice>
      <choice>
        <name>a</name>
        <name>b</name>
      </choice>
      <name>c</name>
    </choice>
  </name>

which is semantically equivalent to

  <name>
    <choice>
      <name>a</name>
      <name>b</name>
      <name>c</name>
    </choice>
  </name>

The old code didnt handle this correctly, as it never expected a choice inside
another choice.  This patch fixes this by flattening any nested choices.

This pattern of nested choice elements comes up in RELAX NG simplification,
where all choice elements are rewritten in this nested manner, see section 4.12
of the RELAX NG specification.

---
Fix MSVC build with lzma

---
Fix HTML serialization with UTF-8 encoding

If the encoding is specified as UTF-8, make sure to use a NULL encoding
handler.

---
Merge branch 'patch-2' into 'master'

Change dir to $THEDIR after ACLOCAL_PATH check

See merge request GNOME/libxml2!6
---
Don't instruct user to run make when autogen.sh failed

Currently the autogen script will always tell user to run make even
when the configure script failed, this patch changes the behavior to
only show this message when the configure script terminates without
error.

---
Remove stray character from comment

Fixes bug #795316:

https://bugzilla.gnome.org/show_bug.cgi?id=795316

---
Simplify and harden nodeset filtering

If a nodeset to be filtered is empty, it can be returned without popping
it from the stack.

Make sure to restore the context node in all error paths and never set
it to NULL.

Save and restore the context node in RANGETO operations.

---
Fix ICU library filenames on Windows/MSVC

Fixes bug 790119.

---
Fix -Wtautological-pointer-compare warnings

Skip tautological pointer comparisons on pthread systems where we don't
use the weak symbols hack.

---
Fix libz and liblzma detection

If libz or liblzma are detected with pkg-config, AC_CHECK_HEADERS must
not be run because the correct CPPFLAGS aren't set. It is actually not
required have separate checks for LIBXML_ZLIB_ENABLED and HAVE_ZLIB_H.
Only check for LIBXML_ZLIB_ENABLED and remove HAVE_ZLIB_H macro.

Fixes bug 764657, bug 787041.

---
Fix -Wenum-compare warnings

Also fixes a serious bug in xmlXPtrNewRangeNodePoint.

---
Fix -Wmisleading-indentation warnings

---
Fix callback signature in testapi.c

---
Fix unused parameter warning without ICU

---
Fix IO callback signatures

---
Fix misc callback signatures

Fix parameter and return types for xmlC14NIsVisibleCallback and
xmlRegExecCallbacks.

---
Fix list callback signatures

Make sure that all parameters and return values of list callback
functions exactly match the callback function type. This is required
to pass clang's Control Flow Integrity checks and to allow compilation
to asm.js with Emscripten.

Also change the `user` parameter type from `const void *` to `void *`.

---
Fix hash callback signatures

Make sure that all parameters and return values of hash callback
functions exactly match the callback function type. This is required
to pass clang's Control Flow Integrity checks and to allow compilation
to asm.js with Emscripten.

Fixes bug 784861.

---
Introduce xmlPosixStrdup and update xmlMemStrdup

Introduce xmlPosixStrdup, an internal strdup implementation matching the
POSIX strdup type signature, and update xmlMemStrdup to use it.

Thanks to Vlad Tsyrklevich for the initial patch.

---
Refactor name and type signature for xmlNop

Update xmlNop's name to xmlInputReadCallbackNop and its type signature
to match xmlInputReadCallback.

Fixes bug 786134.

---
Fixed ICU to set flush correctly and provide pivot buffer.

By always setting flush=TRUE when doing multiple reads, ICU
will not correctly handle truncated utf8 chars across read
boundaries.

The fix is to set flush=TRUE only on final read, and to
provide a pivot buffer which is maintained by libxml
between calls to ucnv_convertEx.

---
Skip EBCDIC tests if EBCDIC isn't supported

Fixes bug 603432.

---
Fix mixed decls and code in timsort.h

---
Fix deprecated Travis compiler flag

---
Fix preprocessor conditional in threads.h

Make sure that the preprocessor conditions and types for xmlDllMain
match exactly in threads.h and threads.c.

---
Fix unused variable warnings in testrecurse

---
Fix pointer comparison warnings on 64-bit Windows

---
Fix macro redefinition warning

---
Fix -Wimplicit-fallthrough warnings

Add "falls through" comments to quench implicit-fallthrough warnings
which are enabled by -Wextra under GCC 7.

---
Fix a couple of warnings in dict.c and threads.c

Only visible on Windows.

---
Fix unused variable warnings in nanohttp.c

Some variables are only used if certain macros are set. Move the
declarations around.

---
Fix pointer/int cast warnings on 64-bit Windows

On 64-bit Windows, `long` is 32 bits wide and can't hold a pointer.
Switch to ptrdiff_t instead which should be the same size as a pointer
on every somewhat sane platform without requiring C99 types like
intptr_t.

Fixes bug 788312.

Thanks to J. Peter Mugaas for the report and initial patch.

---
Set memory limit for LZMA decompression

Otherwise malicious LZMA compressed files could consume large amounts
of memory when decompressed.

According to the xz man page, files compressed with `xz -9` currently
require 65 MB to decompress, so set the limit to 100 MB.

Should fix bug 786696.

---
Problem resolving relative URIs

Raised by Matthias Pigulla <mp@webfactory.de>

In a nutshell we had that bug on URI composition after some fixes in
the area of localhost empty shortcuts :

./testURI --base file:///some/where file

Without patch: file:/some/file
With patch: file:///some/file

---
Fix a couple of misleading indentation errors

Raised by gcc as potential error, no semantic change needed but
fixed the indentation

---
Allow build on Visual Studio 2017 community edition for WIN32 on a 64 bit machine.

This patch hold the necessary changes to build libxml2 with Visual
Studio 2017 for WIN32 on a 64 bit machine.

Today 64 bit windows installation are very common, and Visual Studio
2017 community is the most recent version i have access to.

I have chosen 32 bit and SDK 8.1 to be as close as possible to Igor Zlatkovic work.

---
Send xmllint usage error to stderr

Fixes bug 781459.

---
Fix pathological performance when outputting charrefs

If a character can't be represented in the output encoding, it is
converted to a character reference. This used to to replace the
character in the input stream by calling xmlBufAddHead or
xmlBufferAddHead. These functions shifted the entire input array
around, leading to quadratic performance when converting a run of
non-representable characters. This is most pronounced when dumping to
memory.

Output the charref directly instead.

Found with libFuzzer.

---
Documentation fixes

Fixes bug 347465, bug 599433, bug 624550, bug 698253.

---
Spelling and grammar fixes

Fixes bug 743172, bug 743489, bug 769632, bug 782400 and a few other
misspellings.

---
Build test programs only when needed

Add test programs to 'check_PROGRAMS' instead of 'noinst_PROGRAMS'.

Fixes bug 760457.

---
Fix doc/examples/index.py

In my previous commit that silenced some test output I didn't realize
that doc/examples/Makefile.am was autogenerated.

Also make index.py output deterministic by sorting the glob results.

---
Fix empty-body warning in nanohttp.c

---
Fix unused-parameter warnings

---
Fix invalid-source-encoding warnings in testWriter.c

Use hex escapes instead of binary data in source file.

---
Test SAX2 callbacks with entity substitution

This detects regressions like bug 760367.

---
Fix duplicate SAX callbacks for entity content

Reset 'was_checked' to prevent entity from being parsed twice and SAX
callbacks being invoked twice if XML_PARSE_NOENT was set.

This regressed in version 2.9.3 and caused problems with WebKit.

Fixes bug 760367.

---
Treat URIs with scheme as absolute in C14N

Fixes bug 783656.

---
Add test cases for bug 758518

test/HTML/758518-entity.html exposed a bug in pushParseTest() in
runtest.c which assumed that an input file was at least 4 bytes long.
That test case is only 3 bytes, so we now take the minimum of 4 bytes
or the length of the test input.  We also now use 'chunkSize' in place
of the hard-coded value '1024' later in the function.

---
Fix sanity check in htmlParseNameComplex

- (cur - len) can overflow.
- Throw an internal error.

Fixes bug 780077.

---
Fix undefined behavior in xmlRegExecPushStringInternal

It's stupid, but the behavior of memcpy(NULL, NULL, 0) is undefined.

---
Fix white space in test output

Quote echoed variable to avoid newlines being converted to space.

---
Fix format string warnings

Also fixes bug #768199:

https://bugzilla.gnome.org/show_bug.cgi?id=768199

---
Correct the usage of LDFLAGS

For https://bugzilla.gnome.org/show_bug.cgi?id=761252

It is no longer necessary to save system LDFLAGS when checking
lib specific LDFLAGS.

---
Implement "runtest -u" mode

For https://bugzilla.gnome.org/show_bug.cgi?id=611807

Using "make tests" to add new tests is error prone.
This patch implements a "runtest -u" mode that makes it much
easier to create baselines for new tests.

---
Fix apibuild for a recently added construct

commit c71f9305a99b6aa03cb08fab31106c9c56f1be4f added __XML_EXTERNC
cpp construct which not understood by apibuild, leading to make dist
failures, ask to ignore that construct.

---
Fix an error with regexp on nullable counted char transition

This is the first of the two issues raised by Pete Cordell
in https://mail.gnome.org/archives/xml/2016-April/msg00030.html

---
Do normalize string-based datatype value in RelaxNG facet checking

Original patch is from Jan Pokorn <jpokorny redhat com>
https://mail.gnome.org/archives/xml/2013-November/msg00028.html

Improve it according to reviews and add test files.

---
Fix typo: s{ ec -> cr }cipt

Signed-off-by: Jan Pokorn <jpokorny@redhat.com>

---
Fix typos: dictio{ nn -> n }ar{y,ies}

Signed-off-by: Jan Pokorn <jpokorny@redhat.com>

---
Fix typos: PATH_{ SEAPARATOR -> SEPARATOR }

Signed-off-by: Jan Pokorn <jpokorny@redhat.com>

---
Correct a typo.

---
Bug 760921: REGRESSION (8eb55d78): doc/examples/io1 test fails after fix for "xmlSaveUri() incorrectly recomposes URIs with rootless paths" <https://bugzilla.gnome.org/show_bug.cgi?id=760921>

* doc/examples/io1.res: Update expected result.

---
error.c: *input->cur == 0 does not mean no error

Complements: ce0b0d0d81fdbb5

---
Add missing RNG test files

For https://bugzilla.gnome.org/show_bug.cgi?id=760249

Add missing test results from Bug 710744 for commit
6473a41a49601da8355c4b407b99474ada170213.

---
Bug 760190: configure.ac should be able to build --with-icu without icu-config tool <https://bugzilla.gnome.org/show_bug.cgi?id=760190>

* configure.ac: Add fallback tests if the icu-config tool is not
installed (like on Mac OS X).  This also allows an include
prefix to be set using "--with-icu=/prefix/to/icu", similar to
--with-iconv.

---
Bug 721158: Missing ICU string when doing --version on xmllint <https://bugzilla.gnome.org/show_bug.cgi?id=721158>

* xmllint.c:
(showVersion): Add "ICU" to xmllint version string if libxml2 is
built with ICU enabled.

---
win32\VC10\config.h and VS 2015

--047d7bacb4ee71848a052d7c673a
Content-Type: text/plain; charset=UTF-8

The config.h file in win32\VC10 is incompatible with VS 2015 because VS
2015 provides an implementation of snprintf and prohibits using the
preprocessor to define it. Therefor an ifdef check is needed around that
definition in VC10\config.h. Here is a patch that is compatible with the
change that we made to Chromium's copy:

---
Bug on creating new stream from entity

sometimes the entity could have a lenght of 0, i.e. it wasn't
parsed or used yet, and we ended up with an incoherent input state

---
Detect incoherency on GROW

the current pointer to the input has to be between the base and end
if not stop everything we have an internal state error.

---
Fix an error in previous Conditional section patch

an off by one mistake in the change, led to error on correct
document where the end of the included entity was exactly
the end of the conditional section, leading to regtest failure

---
Correct spelling of "calling"

---
Fix a small error in xmllint --format description

Obviously it operates on the output not the input

---
Fix previous change to node sort order

Commit ba58f23 broke comparison of nodes from different documents.
Thanks to Olli Pottonen for the report.

---
Fix a self assignment issue raised by clang

For https://bugzilla.gnome.org/show_bug.cgi?id=751679

Also added a few newline cleanups

---
Fix support for except in nameclasses

For https://bugzilla.gnome.org/show_bug.cgi?id=565219

The code was imply missing even if simple, added a few regression
tests.

---
Fix order of root nodes

Make sure root nodes are sorted before other nodes.

---
Fix the fix to Windows locking

For https://bugzilla.gnome.org/show_bug.cgi?id=737851

Unfortunately this change has introduced a problem which results in
occasional hangs on Windows when running multi-threaded on a multi-core
host.

When locking the xmlRMutex the count field is increment inside the
critical section but when unlocking the count field is decremented
outside the critical section. The increment/decrement is not atomic so
this can result in the count field being updated incorrectly.

The solution is to change xmlRMutexUnlock to decrement the count field
before leaving the critical section rather than after.

---
Fix timsort invariant loop re: Envisage article

See http://envisage-project.eu/proving-android-java-and-python-sorting-algorithm-is-broken-and-how-to-fix-it/

We use a "runLen" array of size 128, so it should be nearly impossible
to have our implementation overflow.

But in any case, the fix is relatively simple -- checking two extra
conditions in the invariant calculation.

I also took this opportunity to remove some redundancy in the
left/right merge logic in the invariant loop.

---
Don't add IDs in xmlSetTreeDoc

This partially reverts my previous commit fixing bug #741919.

---
threads: use forward declarations only for glibc

Fixes bug #704908

The declarations of pthread functions, used to generate weak references
to them, fail to suppress macros. Thus, if any pthread function has
been provided as a macro, compiling threads.c will fail.
This breaks on musl libc, which defines pthread_equal as a macro (in
addition to providing the function, as required).

Prevent the declarations for e.g. musl libc by refining the condition.

The idea for this solution was borrowed from the alpine linux guys, see
http://git.alpinelinux.org/cgit/aports/tree/main/libxml2/libxml2-pthread.patch

Signed-off-by: Michael Heimpold <mhei@heimpold.de>

---
fix some tabs mixing incompatible with python3

---
Python generator bug raised by the const change

the doc methode for xmlDocGetRootElement wasn't generated anymore

---
Fix a couple of issues raised by make dist

---
Fix and add const qualifiers

For https://bugzilla.gnome.org/show_bug.cgi?id=689483

It seems there are functions that do use the const qualifier for some of the
arguments, but it seems that there are a lot of functions that don't use it and
probably should.

So I created a patch against 2.9.0 that makes as much as possible const in
tree.h, and changed other files as needed.

There were a lot of cases like "const xmlNodePtr node".  This doesn't actually
do anything, there the *pointer* is constant not the object it points to. So I
changed those to "const xmlNode *node".

I also removed some consts, mostly in the Copy functions, because those
functions can actually modify the doc or node they copy from

---
Visual Studio 14 CTP defines snprintf()

For https://bugzilla.gnome.org/show_bug.cgi?id=737937

Visual Studio 14 CTP (the VS which comes with Windows 10) defines snprintf().
It could be seen as a good idea as snprintf() is part of the C99 standard but
unfortunately libxml2 as many packages defines snprintf as _snprintf, the
function to use for any previous versions of the Visual Studio runtime. More,
to avoid hiding/shadowing snprintf() declaration in stdio.h is protected by an
"#ifdef snprintf" followed by an "#error", so compilation fails.

But the fix is easy: the corresponding C/C++ compiler defines _MSC_VER to 1900
so it is enough to guard the snprintf define against it, cf. the attached patch
for win32config.h (from 2.9.1 "latest" tarball).

---
Fix zlib and lzma libraries check via command line

For https://bugzilla.gnome.org/show_bug.cgi?id=737532

add save, change and restore LDFLAGS before AC_CHECK_LIB call
when functions gzread and lzma_code are searching inside action-if-found
of AC_CHECK_HEADERS

---
Leak of struct addrinfo in xmlNanoFTPConnect()

For https://bugzilla.gnome.org/show_bug.cgi?id=732352

in case of error condition in IPv6 support, the early return here
doesn't call freeaddrinfo(result), thus leaking memory.

---
Fix Enum check and missing break

for https://bugzilla.gnome.org/show_bug.cgi?id=737403

In file xmlreader.c
1. An enum is checked to proper value instead of checking like a boolean.
2. Missing break statement added.

---
Fix processing in SAX2 in case of an allocation failure

Related to https://bugzilla.gnome.org/show_bug.cgi?id=731360

---
XMl Shell command "cd" does not handle "/" at end of path

For https://bugzilla.gnome.org/show_bug.cgi?id=731832
small fix

---
Fix various Missing Null checks

For https://bugzilla.gnome.org/show_bug.cgi?id=732823

---
Add a couple of misisng check in xmlRelaxNGCleanupTree

For https://bugzilla.gnome.org/show_bug.cgi?id=733041

check cur->parent before dereferencing the pointer even if
a null parent there should not happen
Also fix a typo

---
Adding a check in case of allocation error

For https://bugzilla.gnome.org/show_bug.cgi?id=733043

There is missing Null condition in xmlRelaxNGValidateInterleave of
relaxng.c
Dereferencing it may cause a crash.

---
Fix a link to James SAX documentation old page

---
xmlSaveUri() incorrectly recomposes URIs with rootless paths

For https://bugzilla.gnome.org/show_bug.cgi?id=731063

xmlSaveUri() of libxml2 (snapshot 2014-05-31 and earlier) returns
bogus values when called with URIs that have rootless paths
(e.g. "urx:b:b" becomes "urx://b%3Ab" where "urx:b%3Ab" would be
correct)

---
configure: Add --with-python-install-dir

Cross-compiling the python bindings is a bit difficult today, as the
configure script will figure out the site packages dir
(PYTHON_SITE_PACKAGES) by either:

- Generating the path to the site-package target directories using
  libdir, and see if it exists. As it is not possible to point to the
  full path of the sysroot, since that will yield the wrong install
  path, and that the directory does not neccessarily exist on the host,
  this approach will not work.

- Fetch the site packages dir from the python interpreter as pointed to
  by --with-python. Since this python interpreter will point to the
  sysroot, the install dir generated will be inside the sysroot and thus
  not work.

This patch approaches the problem by adding the possibility of
explicitly stating the install dir of the python packages, leaving it up
to the cross-compilation environment to specify it. The patch does not
affect the default case (non-cross compilation).

Signed-off-by: Jonas Eriksson <jonas.eriksson@enea.com>

---
Fix typos in relaxng.c

Signed-off-by: Jan Pokorn <jpokorny@redhat.com>

---
xmlNodeSetName: Allow setting the name to a substring of the currently set name

Avoid freeing the currently set name until after having assigned the new name,
this allows one to call xmlNodeSetName (node, node->name + 1) to set the new
name of the node to a substring of the current name without introducing any
crash and without requiring an extra strdup().

---
Fix a doc typo

Raised by Blasius Bieselbert on IRC

---
Fix xmlTextWriterWriteElement when a null content is given

---
Fix a portability issue on Windows

Apparently an verflow when comparing macro and unsigned long

---
Fix an typo 'onrest' in htmlScriptAttributes

As pointed out by "Laurent <guitarneck@free.fr>"

---
Fix an fd leak in an error case

---
Portability patch for fopen on OS/400

---
Portability fix

Don't assume fileno for stdin and stdout are 0 and 1

---
Portability fix

increase internal use of a portability macro

---
Generic portability fix

Undefine common symbol before redefining them

---
Fix a couple of missing NULL checks

For https://bugzilla.gnome.org/show_bug.cgi?id=708681

---
Avoid a possibility of dangling encoding handler

For https://bugzilla.gnome.org/show_bug.cgi?id=711149

In Function:
int xmlCharEncCloseFunc(xmlCharEncodingHandler *handler)

If the freed handler is any one of handlers[i] list, then it will make that
hanldlers[i] as dangling. This may lead to crash issues at places where
handlers is read.

---
Fix a bug loading some compressed files

For https://bugzilla.gnome.org/show_bug.cgi?id=712528
Related to https://bugzilla.redhat.com/show_bug.cgi?id=877567

There is a bug in xzlib.c which causes certain compressed XML files to fail to
load correctly.  The code in xz_decomp which attempts to verify the checksum
and length of the expanded data fails if the checksum or length at the end of
the file crosses a 1024 byte boundary.  It calls gz_next4 to get those two
values.  This function uses the stream state in state->zstrm, but calls
xz_avail which uses the state->strm stream info.  This causes gz_next4 to
signal a premature EOF if the data it is fetching crosses a 1024 byte boundary.

---
build: Use pkg-config to find liblzma in preference to AC_CHECK_LIB

This means that liblzmas Libs.private will be included in LZMA_LIBS if
linking the libraries statically, ensuring that there are no undefined
symbol errors from liblzmas private libraries.

If pkg-config isnt installed, or if liblzma.pc couldnt be found, fall
back to using AC_CHECK_LIB as before. This will cause static linking to
fail, but thats not a regression.

This does not introduce a compile time dependency on pkg-config.

https://bugzilla.gnome.org/show_bug.cgi?id=711026

---
build: Add @LZMA_LIBS@ to libxmls pkg-config files

If libxml2 is built and linked against liblzma, the latter needs to appear in
libxml2s Libs.private pkg-config field, otherwise static linking against
libxml2 will fail due to unresolved liblzma symbols.

https://bugzilla.gnome.org/show_bug.cgi?id=711026

---
fix some tabs mixing incompatible with python3

Patrick Welche <prlw1@cam.ac.uk> raised this issue

---
Avoid crash if allocation fails

https://bugzilla.gnome.org/show_bug.cgi?id=704527
xmlSchemaNewValue() may fail on OOM error

---
Fix a wrong test

https://bugzilla.gnome.org/show_bug.cgi?id=704530

Arg is an array on the stack and can't be NULL

---
Fix handling of mmap errors

https://bugzilla.gnome.org/show_bug.cgi?id=702320

as raised by Gaurav <ya1gaurav@gmail.com>

---
Catch malloc error and exit accordingly

As pointed privately by Bill Parker <wp02855@gmail.com>

---
python: fix drv_libxml2.py for python3 compatibility

https://bugzilla.gnome.org/show_bug.cgi?id=703979

---
xmllint --memory should fail on empty files

Exposed by https://bugzilla.gnome.org/show_bug.cgi?id=699896
when doing analysis but a priori unrelated.

---
Fix for compilation with python 2.6.8

Remap PyCapsule to PyCObject based on the macro being available
instead of using the python version

---
Fix missing break on last() function for attributes

pointed out by cppcheck

---
Fix a linking error for python bindings

Showing up apparently in Debian BTS distro
https://bugzilla.gnome.org/show_bug.cgi?id=685515

---
Fix a couple of return without value

Error introduced in previous commit !

---
Fix python bindings with versions older than 2.7

Need fixing on the Capsule usage, the lack of PyBytes,
lack of io module and the way to access exception details.

---
Fix tree iterators broken by 2to3 script

---
Fix a uneeded and wrong extra link parameter

---
Fix an output buffer flushing conversion bug

for https://bugzilla.gnome.org/show_bug.cgi?id=694982
On a flush operation, everything must be converted

---
Fix the URL of the SAX docuemntation from James

as it has moved

---
Fix configure cannot remove messages

this is the other way to solve ./configure cannot remove messages by
simply removing rm detection in configure.in

There is already a raw 'rm -f' at the end on configure.in

---
xmlCtxtReadFile doesn't work with literal IPv6 URLs

https://bugzilla.gnome.org/show_bug.cgi?id=694185

RedHat Bug 624626 discusses the new behavior of libxml regarding brackets
around IPv6 addresses.  In earlier versions such as 2.6.27, uri.c stripped the
brackets (e.g. uri->server == "fdf2:1e39:73d1:934e::119"); in the current
version it returns IPv6 addresses with brackets intact (e.g. uri->server
== "[fdf2:1e39:73d1:934e::119]").

Thus in 2.9.0, xmlCtxtReadFile() has a problem when it is passed a URL
containing a literal IPv6 address.  xmlCtxReadFile() and its subroutines pass
uri->server unchanged to getaddrinfo(), which doesn't recognize a bracketed
IPv6 address, so the read fails.

This strips the [ and ] from IPv6 addresses allowing getaddrinfo()
to work properly with such URIs.

---
Silent the new python test on input

Just make it silent if there is no error

---
Python bindings: DOM casts everything to xmlNode

I noticed another issue with Python bindings of libxml: the access methods do
not cast the pointers to specific classes such as xmlDtd, xmlEntityDecl, etc.
For example, with the following document:

<?xml version="1.0"?>
<!DOCTYPE root [<!ELEMENT root EMPTY>]>
<root/>

the following script:

import libxml2
doc = libxml2.readFile("c.xml", None, libxml2.XML_PARSE_DTDLOAD)
print repr(doc.children)

prints:

<xmlNode (root) object at 0xb74963ec>

With properly cast nodes, it outputs the following:

<xmlDtd (root) object at 0xb746352c>

The latter object (xmlDtd) enables one to use DTD-specific methods such as
debugDumpDTD(), copyDTD(), and so on.

---
Fix rpmbuild --nocheck

if the %check section was omitted some of the file needed for
packaging would not be generated, move the generation to the
proper place.

---
Fix for win32/configure.js and WITH_THREAD_ALLOC

Building git master gives me the following error on Windows; this patch
fixes it:

	icl /EP /nologo /I..\include /D "NOLIBTOOL" /D "_REENTRANT"
libxml2.def.
src > int.msvc\libxml2.def
libxml2.def.src
Z:\...\libxml2-git8123c4f6_debug\win32\../include/libxml/xmlversion.h(105):
error: unrecognized token
  #if @WITH_THREAD_ALLOC@
      ^
Z:\...\libxml2-git8123c4f6_debug\win32\../include/libxml/xmlversion.h(105):
error: expected an expression
  #if @WITH_THREAD_ALLOC@
      ^
Z:\...\libxml2-git8123c4f6_debug\win32\../include/libxml/xmlversion.h(105):
error: unrecognized token
  #if @WITH_THREAD_ALLOC@
                        ^
NMAKE : fatal error U1077: 'icl' : return code '0x2'
Stop.

---
Fix Broken multi-arch support in xml2-config

partial revert of 87b4d6f6105658a99b976f812223c8edf4469265
coming from Fedora/RHEL/... but breaking other distros
as pointed out by Daniel Richard

---
Fix spelling of "length".

---
Fix potential out of bound access

---
Fix a portability issue for GCC < 3.4.0

---
Fix large parse of file from memory

https://bugzilla.redhat.com/show_bug.cgi?id=862969
The new code trying to detect excessive input lookup would
just get wrong sometimes in the case of very large file parsed
directly from memory.

---
Spec cleanups and a fix for multiarch support

---
Fix a thread portability problem

cannot compile libxml2-2.9.0 using studio 12.1 compiler on solaris 10

I.M.O. structure initializer (as PTHREAD_ONCE_INIT) cannot be used in
a structure assignment anyway

---
Followup to LibXML2 docs/examples cleanup patch

---
Second round of cleanups for LibXML2 docs/examples

configure.am:

* Explicitly disallow --enable-rebuild-docs when builddir != srcdir, per
   what you said about needing to build docs with an in-source build

doc/Makefile.am:

* Ensure that xmlversion.h is in the source tree before running
   apibuild.py, to avoid generating an incomplete libxml2-api.xml

* Update the .PHONY target (forgot to do this earlier)

doc/devhelp/Makefile.am:

* Wrap the doc-generating rule in an "if REBUILD_DOCS" conditional so it
   doesn't cause trouble for regular users

* Added a handy-dandy "rebuild" target

doc/examples/index.py:

* NOTE: You need to run this script to regenerate the files it creates,
   and then commit the newly-updated files! The generated files currently
   in git master (e.g. doc/examples/Makefile.am) are out of date even
   before this patch!

* index.html really needs to be in EXTRA_DIST

* Wrap the doc-generating rules in an "if REBUILD_DOCS" conditional,
   because they shouldn't be active otherwise

---
Support long path names on WNT

so we've got this patch to libxml2 2.7.6 in the LibreOffice code base,
inherited from OOo.  it fixes a definite problem, which is that Windows
has a rather low maximum path length restriction, and there is a special
trick on NT whereby path names can be prefixed with "\\?\", in which
case the maximum length is 32k, which ought to be sufficient even for
bloated office suites :)

I'll attach the patch to the xmlCanonicPath function.  note that i
didn't write this and am by no means an expert on either Microsoftean
platforms or libxml so maybe it's not the best way to do it.

---
Fix a Timsort function helper comment

---
xml2-config.1 markup error

There is a spurious ".l" in the xml2-config.1 man page.  This line can
simply be removed.

$ mandoc -Tlint -Werror xml2-config.1
xml2-config.1:12:2: ERROR: skipping unknown macro: .l

---
Handle ICU_LIBS as LIBADD, not LDFLAGS to prevent linking errors

For https://bugzilla.gnome.org/show_bug.cgi?id=677606
For https://bugs.gentoo.org/show_bug.cgi?id=417539

If libxml2-2.8.0 is built with --with-icu --with-python on a system that has an
older version of libxml2 installed, then during "make install", libxml2mod.so
gets relinked to the systemwide version of libxml2.so.2 instead of libxml2.so.2
from the build tree, and fails at runtime if symbol versions from the older
libxml2.so.2 are not available. This effectively makes it impossible to build a
libxml2-2.8.0 binary package on a system that does not already have
libxml2-2.8.0 installed.

Investigation by Rafa Muyo and Arfrever Frehtes Taifersar Arahesis revealed
the cause of the problem to be that libxml2's configure was adding ICU_LIBS to
LDFLAGS instead of to LIBADD. This resulted in GNU libtool using the wrong
argument order in its relinking command that gets run during "make install".

---
Bug 676544 - fails to build with --without-sax1

Added some ifdef'd LIBXML_SAX1_ENABLED to make it buildable with
--without-sax1 configure option.

---
Fix an XSD error when generating internal automata

When generating a sequence add an extra epsilon transition
to avoid further constructs from entering via the last state
Bug reported by Johan Corveleyn <jcorvel@gmail.com>

---
Patch for portability of latin characters in C files

Coming from LibreOffice repository:
http://cgit.freedesktop.org/libreoffice/core/plain/libxml2/libxml2-latin.patch

---
Patch for xinclude of text using multibyte characters

for bug https://bugzilla.gnome.org/show_bug.cgi?id=633166

When you xinclude a text file, reading portions (by 4000 bytes) of the
buffer incorrectly handled the situation when the end comes across
portions of the bytes in a multibyte character.

---
libxml(3) manpage typo fix

---
More updates and cleanups on autotools and Makefiles

Makefile.am, example/Makefile.am:

* Replaced the obsolete INCLUDES variable with AM_CPPFLAGS/AM_CFLAGS

acinclude.m4:

* autoupdate replaced AC_FD_CC with AS_MESSAGE_LOG_FD

autogen.sh:

* Added -Wall to the autoreconf invocation, which turned up a whole slew
   of warnings that are fixed by this patch

configure.in:

* Most of the changes are due to autoupdate, with subsequent manual
   tidying

* Note that autoupdate bumped the AC_PREREQ version from 2.59 to 2.68. If
   you normally use an older version of Autoconf, and everything works fine
   if you comment out that directive, feel free to bump down the version
   accordingly.

* Ensure that #include directives in C fragments always have no whitespace
   to the left of the '#' mark, as some preprocessors need that to be in
   the first column

example/Makefile.am:

* Don't need DEPS

* Use plain LDADD instead of LDADDS; if all programs in this file need to
   link against the same set of libraries, then this is all you need

---
Fix a variable name in comment

---
Fix missing xmlsave.h module which was ignored in recent builds

due to "save.h" rule discarding it too

---
Fix non __GNUC__ build

For https://bugzilla.gnome.org/show_bug.cgi?id=681590
Length member of _xmlDictEntry is called "len" and not "l"

---
Fix const qualifyer to definition of xmlBufferDetach

For https://bugzilla.gnome.org/show_bug.cgi?id=676629
As the buffer is beng mdified by the call the const doesn't make
sense.

---
Fix windows unicode build

For https://bugzilla.gnome.org/show_bug.cgi?id=638650
After much discussions in the list:
https://mail.gnome.org/archives/xml/2012-May/msg00062.html

The simplest at this point is to fallback to only officially
supporting ASCII names in those APIs, document it and use
the "A" entry points on Windows.

---
fix runtests to use pthreads support for various Unix platforms

The runtests program currently fails with

    Specific platform thread support not detected

on HP-UX, AIX and other Unix systems which do not match the conditional

    #if defined(linux) || defined(__sun) || defined(__APPLE_CC__)

It is silly to try to enumerate all systems which use pthreads in a conditional
like this. I am attaching a patch (against git master) that rewrites the cpp
conditional structure so that pthreads is used if HAVE_PTHREAD_H is defined,
and moves that section of code down below the Win32 and BeOS cases so that
native thread libraries are used preferentially in those two cases.

---
Fix make dist to include new private header files

---
Harden the buffer code and make it more compatible

Mimic the old xmlBuffer strcture in xmlBuf to avaoid catastrophic
failures in case of old code directly reading ctxt->input->buf->buffer

Check on all buffer entry points if an error previously occured on
the buffer, and fail the operation if this is the case, the buffer
becomes immutable and unreadable.

---
Fix an error in previous commit

---
Memory error within SAX2 reuse common framework

There is no reason for that class of errors to not use
the same handling allowing strctured error processing.

---
Cleanups before 2.8.0-rc2

new symbols, a missing comment and a fix on symbol release

---
xmlTextReader bails too quickly on error

For https://bugzilla.gnome.org/show_bug.cgi?id=654567
I use xmlTextReader to parse failed that might be incomplete.  These files are
the beginning of a well-formed file, but the end is missing so the file as a
whole is not well-formed.

The problem is that xmlTextReader starts returning errors when it encounters
the early EOF, even though I haven't finished reading all of the valid data in
the file.  It would be helpful if xmlTextReader kept working until the very
end.

---
Fix undefined reference in python module

For https://bugzilla.gnome.org/show_bug.cgi?id=622023
when compiled with LDFLAGS="${LDFLAGS} -Wl,-z,-defs -Wl,--no-undefined"
the python module would failed due to the undefined. This add an
explicit reference to python lib.

---
Fix various bugs in new code raised by the API checking

* testapi.c: regenerated and covering new APIs
* tree.c: xmlBufferDetach can't work on immutable buffers
* xzlib.c: fix a deallocation error

---
Fix various problems with "make dist"

* tree.c: missing documentation for xmlBufferDetach
* doc/symbols.xml: add two new symbols xmlTextReaderRelaxNGValidateCtxt
                   and xmlBufferDetach
* doc/apibuild.py: ignore internal header xzlib.h

---
Use a hybrid allocation scheme in xmlNodeSetContent

On Fri, May 11, 2012 at 9:10 AM, Daniel Veillard <veillard@redhat.com> wrote:
> Hi Conrad,
>
> that's interesting ! I was initially afraid of a sudden explosion of
> memory allocations for building a tree since by default buffers tend to
> "waste" memory by using doubling allocations, but that's not the case.
> xmllint --noout doc/libxml2-api.xml
> when compiled with memory debug produce
>
> paphio:~/XML -> cat .memdump
>   MEMORY ALLOCATED : 0, MAX was 12756699
>
> and without your patch 12755657, i.e. the increase is minimal.

Heh, I thought that too. Actually you're looking at the result with XML_ALLOC_EXACT! This
is because EXACT adds 10bytes "spare" on each alloc, and that interestingly wastes about the
same amount of space as XML_ALLOC_DOUBLEIT on this example (see below).

So it turns out that the default realloc() on my system actually handles this case really
well  and I guess that all the time in xmlRealloc() was actually in xmlStrlen, not the
underlying realloc() after all (sorry for misleading you). If you replace the realloc()
with a bad one (like valgrind's), then the performance degrades severely.

This patch implements a HYBRID allocator which has the behaviour you describe (it's
like EXACT to start with, though without the spare 10 bytes; and switches to DOUBLEIT
after 4kb)  that gets the memory back down to 12755657, with no noticeable impact on the
performance of the synthetic pathological example under valgrind.

In summary:

     max_memory on ./xmllint --noout doc/libxml2-api.xml,
     valgrind time on https://gist.github.com/2656940

            max_memory    valgrind time
before   |  12755657    | 29:18.2
EXACT    |  12756699    |  2:58.6 <-- this is the state after the first patch.
DOUBLEIT |  12756727    |  0:02.7
HYBRID   |  12755754    |  0:02.7 <-- this is the state with both patches.

>
> There is also the cost of creating the buffers all the time.
> I need to read the code and check but I may be interested in an hybrid
> approach where we switch to buffer only when the text node starts to
> become too big (4k would remove nearly all usuall types of "document"
> usage, i.e. not blocks of data)

I tried to avoid too much buffer creation by introducing the xmlBufferDetach function,
which allows re-using one buffer to construct many strings. It's maybe a bit of a "hack"
in API terms though I thought the gains would be worth it.

Conrad

------8<------

To keep memory usage tight in normal conditions it's desirable to only
allocate as much space as is needed. Unfortunately this can lead to
problems when constructing a long string out of small chunks, because
every chunk you add will need to resize the buffer.

To fix this XML_ALLOC_HYBRID will switch (when the buffer is 4kb big)
from using exact allocations to doubling buffer size every time it is
full. This limits the number of buffer resizes to O(log n) (down from
O(n)), and thus greatly increases the performance of constructing very
large strings in this manner.

---
Fix a wrong return value in previous patch

---
Fix an uninitialized variable use

When compiled without SAX1 support

---
Fix a compilation problem with --minimum

For https://bugzilla.gnome.org/show_bug.cgi?id=636750
Moved a #endif /* LIBXML_OUTPUT_ENABLED */ a few lines down
to avoid reference an undefined variable

---
undef ERROR if already defined

---
Fix library problems with mingw-w64

For https://bugzilla.gnome.org/show_bug.cgi?id=663588
Fix a windows only issue when compiling the library with
MingW (64 bits) using Fedora cross-compiler chain.
Change the dllexport for data

---
fix windows build.
ifdef addition from bug 666491 makes no sense

---
Allow to compile with Visual Studio 2010

For https://bugzilla.gnome.org/show_bug.cgi?id=666491

This patch adds project files to compile and debug libxml2 using Visual
Studio 2010. Only few minor changes have been made to the actual source
code.

This patch also requires for the iconv package to be compiled with visual
studio 2010 which has been submitted to the iconv project (see:
https://savannah.gnu.org/bugs/?35088)

---
Prevent an infinite loop when dumping a node with encoding problems

When a node is dumped with a new encoding, we may encounter characters
that are not supported in the new encoding. libxml2 handles this by
replacing the character with character references, but in some encodings
this can result in an infinite loop when the character references
themselves contain unsupported characters.

This fixes the infinite loop by undoing a character reference substitution
when it cannot be inserted, and returning an encoder error.

This bug was noticed when looking into an infinite loop bug report for
the Ruby Nokogiri project. The original bug report, "nokogiri process
hangs on call to inner_html" is here:
https://github.com/tenderlove/nokogiri/issues/400

---
Fix "make tst" to grab lzma lib too

---
Fix mingw's snprintf configure check

For mingw, snprintf is defined as _snprintf and therefore the check
should be for _snprintf. This applies to _vsnprintf too.

---
fixed a 64bit big endian issue

For https://bugzilla.gnome.org/show_bug.cgi?id=671176
patch fixes a 64bit endian issue, making libxml2 work (again) on ppc64
unsigned int and size_t are differently sized on 64bit.

---
Update README.tests

document make check, make valgrind and fix a typo pointed out by
Daniel Neel <dneelyep@gmail.com>
Fixes: https://bugzilla.gnome.org/show_bug.cgi?id=617019

Daniel

---
Fix an off by one pointer access

getting out of the range of memory allocated for xpointer decoding

---
autogen.sh: Fix typo

---
Fix portability failure if netdb.h lacks NO_ADDRESS

---
Fix a crash with xmllint --path on empty results

If the returned node set is empty, it is possible for the nodetab
to be null

---
add function xmlTextReaderRelaxNGValidateCtxt()

Since there is xmlTextReaderSchemaValidateCtxt() it seems like there
should be an equivalent RelaxNG function. The attached patch adds it.
The code is essentially the same as Schema implementation, but I'm
uncertain as to how to add things to the documentation and test suite:
there seems to be a lot of auto-generation going on.

---
Fix windows build from lzma addition

---
Fixed bug #617016

---
Fixed bug #667946

---
Fix -Wempty-body warning from clang

clang recently grew a warning on `for (...);`. This patch
fixes all two instances of this pattern in libxml. The changes
don't modify the code semantic.

---
fix reference to STDOUT_FILENO on MSVC

The Microsoft Visual C++ compiler doesn't have unistd.h and thus
STDOUT_FILENO is undefined. Define it using stdio.h functions.

---
fix a pair of possible out of array char references

When serializing char references back to an character string
Reported by Abhishek Arya <inferno@chromium.org>

---
Fix a schema type duration comparison overflow

https://bugzilla.gnome.org/show_bug.cgi?id=653724

Based on the fix suggested by Nick Pope <nick@nickpope.me.uk>
but just changing the casts to avoid using long long type

---
Fix the Windows build files

Patches comming from KDE project for Windows portability

https://projects.kde.org/projects/kdesupport/emerge/repository/revisions/master/entry/portage/testing/libxml2-test/libxml2-2.7.8-20110801.diff

To build libxml2 I had to patch the build system a little bit.
The windows build system tries to link about zdll, but on windows
its called zlib* too, so linking against z is enough.
Also the --include and the --lib command was ignored.

For the http and ftp stuff linking against some windows library's was
forgotten for mingw.

---
Fix an off by one error in encoding

this off by one error doesn't seems to reproduce on linux
but the error is real.

---
Fix RELAX NG include bug #655288

When overriding during include, children of the root
node are scanned. But the root node was gotten with
doc->children, instead of xmlDocGetRootElement.

---
configure: support silent automake rules if possible

This gives us a much less noisy build and makes error stand out a lot more.

---
__xmlRaiseError: fix use of the structured callback channel

If the structured callback channel is initialized, do not perform
unneeded initialization of the old callback channel to avoid
clobbering of the structured callback channel's data.

---
__xmlRaiseError: fix the structured callback channel's data initialization

if we initialize the structured channel from the sax handler we should also
pass the userData

---
Fix memory corruption
when xmlParseBalancedChunkMemoryInternal is called from xmlParseBalancedChunk

---
Small fix for previous commit

---
599241 fix an initialization problem on Win64

as the thread_t is not an integral datatype on that platform

---
Fix a potential memory access error

in case of a previus allocation error

---
fix win build

---
595789 fix a remaining potential Solaris problem

---
480323 add code to plug in ICU converters by default

This is not configured in by default but after some serious massaging
incorporate that patch from Chromium/Chrome.

---
607273 Fix python detection on MSys/Windows

Fix the lookup for python executable and headers, add an
extra variable for new dependancies when linking for Python
on Win32

---
614087 Fix Socket API usage to allow Windows64 compilation

In Windows 64 a socket is no more represented by an int,
this breaks the nanoftp API and nanoftp/nanohttp, the patch
changes this and fix the API for Win64
Regenerated the XML and documentation as a result too.

---
616478 Fix xmllint shell write command

The current node wasn't passed down !

---
630140 better fix for iso995x encoding error

Changing semantic of xmlCharEncInFunc() wasn't the proper way to
do this, better change UTF8ToISO8859x() appropriately

---
Various cleanups on encoding handling

Done while chasing previous bug

---
630140 fix iso995x encoding error

https://bugzilla.gnome.org/show_bug.cgi?id=630140
Fix the bug, which happen when using the embedded converters and
not iconv

---
Fix xmllint to use format=1 for default formatting

* xmllint.c: again the goal is ultimately to use other values for
  a different semantic.

---
Fix devhelp documentation installation

When doing an out of tree build

---
Fix web site encoding problems

The encoding.html page was generated incorectly, revamp the input
xml.html and convert the full XSLT chain to use and serve it as
UTF-8
* doc/*: fix xml.html, update all stylesheets and regenerate

---
Small code cleanup on previous patch

suggested by Andrew Nosenko

---
Fix handling of apos in URIs

Franois Delyon <f.delyon@satimage.fr> pointed out a divergence between
the URI code and RFC 3986, fix trivial and seems to not break regression
tests

---
xmlTextReaderReadOuterXml should handle DTD
* xmlreader.c: fix description of xmlTextReaderReadOuterXml and support DTD

---
Fix Win32 build
* libxml.h win32/Makefile.bcb win32/Makefile.mingw win32/Makefile.msvc: add
  NOLIBTOOL flag to prevent automatic define of LIBXML_STATIC

---
xmlCtxtResetLastError should reset ctxt->errNo

just fix it !

---
Fix broken escape behaviour in regexp ranges

---
Fix  missing win32 libraries in libxml-2.0.pc

The libxml-2.0.pc file doesn't contain the win32 specific libraries. So when
(cross-)compiling for Windows, the output of

pkg-config libxml-2.0 --libs

returns an incompile set of libraries. Thus, applications using libxml2's
network functionality fail to build for the win32 platform.

---
Fix detection of python linker flags

python-config has both --libs and --ldflags, and we should use the
later to link the python binding

---
relaxng.c: cast to allow compilation with sun studio 11

Sun Studio 11 was failing to compile relaxng.c due to a type mismatch
in a ternary operator used to provide an argument to xmlRngPErr.  It
seems that sos11 cc is more pedantic about this part of the C99
standard.  GCC issues a warning but doesn't fail by default.

After casting the string literal "nothing" to (const xmlChar *) sos11
cc is happy.  GCC no longer issues a warning either.

Another warning was cleaned up with an identical cast.

---
Fix a missing #ifdef

https://bugzilla.gnome.org/show_bug.cgi?id=611806
Problem raised by Mark Overmeer

---
Fix xmlNodeSetBase() comment

---
Fix relaxNG tests in runtest for Windows
* runtest.c: initialize ret

---
Fix a const warning in xmlNodeSetBase

* tree.c: xmlNodeSetName: Remove const from declaration since it is
  used non-const anyway. Remove unnecessary cast on xmlFree later on.

---
Fix some missing commas in HTML element lists

* HTMLparse.c: fix the macros BLOCK and INLINE to use commas and
  avoid transparent contatenation of strings

---
Fix python generator to not use deprecated xmllib

* python/generator.py: use xml.sax instead, patch based on similar
  fir for libvirt by Cole Robinson <crobinso@redhat.com>

---
598785 Fix nanohttp on Windows

* nanohttp.c: the check for socket comparing to FD_SETSIZE introduced in
  bug fix for 559501 breaks on WinSockAPI

---
Fix an init bug in global.c

* globals.c: fix the initialization of the mutex

---
Minor patch for conditional defines in threads.c

Portability problem with CodeGear ("Borland") compiler 2007 on Windows
* threads.c: use 'defined' after #elif

---
Release of libxml2-2.7.4

* configure.in: new version
* libxml.spec.in: cleanup
* xmlregexp.c: fix a comment
* doc/apibuild.py: update
* doc/*: regenerate everything

---
Fix Windows build
* relaxng.c: fix windows build

---
Fix the globals.h to use XMLPUBFUN

* include/libxml/globals.h: in addition to the extern extern
  Paul Smith noted that XMLPUBFUN should be used instead of
  LIBXML_DLL_IMPORT

---
Problem with extern extern in header

* include/libxml/globals.h: LIBXML_DLL_IMPORT should not be
  followed by extern
* include/libxml/xmlmemory.h: fix the same problem but in a comment

---
Wrong block opening in htmlNodeDumpOutputInternal

* xmlsave.c: Jim Meyering ran clang on libxml2 and this is one of
  the error found, misplaced curly brace

---
Runtest portability patch for Solaris

* runtest.c: use defined(__sun) instead of defined(solaris)

---
Small patch to accomodate the Haiku OS

* configure.in: keep M_LIBS to empty

---
555833 always use rm -f in uninstall-local

* Makefile.am: so that make clean doesn't fail in some circumstances

---
542394 xmlRegisterOutputCallbacks MAX_INPUT_CALLBACK

* xmlIO.c: trivial fix, wrong constant

---
Fix the problem of revalidating a doc with RNG

* relaxng.c: simply clear up the ->psvi of elements on the tree upon
  return, should not be needed for streaming APIs as tree are discarded

---
Fix the PHP search code

---
512131 crash in xmlRelaxNGValidateFullElement

* relaxng.c: in some case we were not freeing the right data, also
  cleanup a few other things

---
582913 Fix htmlSetMetaEncoding() to be nicer

* HTMLtree.c: htmlSetMetaEncoding should not destroy existing meta
  encoding elements, plus it should not change things at all if the
  encoding is the same. Also fixed htmlSaveFileFormat() to ask for
  change if outputing to UTF-8.

---
Both args of xmlStrcasestr are const

* include/libxml/xmlstring.h xmlstring.c: fix the constness of the
  second arg of xmlStrcasestr()

---
Fix windows build

---
570702 fix a bug in regexp determinism checking

* xmlregexp.c: xmlFAComputesDeterminism was bugged as it removed as
  coalesced transitions on with sane source destination and atoms but
  not looking at counters

---
567619 xmlValidateNotationUse missing param test

* valid.c: this was raised by a testapi crash on solaris

---
545579 doesn't compile without schema support

* testapi.c: fix to get gen_nb_void_ptr_ptr() generated unconditionally

---
Try to avoid __imp__xmlFree link trouble on msys

* include/libxml/xmlexports.h: when compiling with mingw/MSYS or linking
  to an precompiled library this _imp__xmlFree missing at runtime is a
  common problem. Igor and various people faced it and this seems the
  minimal fix for it, should resolve 590302 and 561340

---
Fix Solaris binary links, cleanups

* doc/*.html doc/site.xsl doc/xml.html: Dagobert Michelsen pointed out
  that binaries build for Solaris now live in OpenCSW

---
Bug 571059  MSVC doesn't work with the bakefile

* bakefile/libxml2.bkl: MSVC 2008 Ex will report that it cannot
  find "config.h", should be fixed with patch

---
Fix leak on SAX1, xmllint --sax1 option and debug

* SAX2.c: don't leak in xmlCheckDefaultedAttributes for standalone
  checking
* xmllint.c: fix xmllint --sax1 to actually use XML_PARSE_SAX1
* debugXML.c: don't raise an error if markup wasn't allocated from
  dictionary if document was parsed with option disabling it

---
Fix a couple of ABI issues with C14N 1.1

* include/libxml/c14n.h c14n.c: fix API to not include enum xmlC14NMode
  in the arguments, and do a bit more check on input

---
Fix ChangeLog merge conflict

---
add a missing check in xmlAddSibling, patch by Kris Breuker avoid

* tree.c: add a missing check in xmlAddSibling, patch by Kris Breuker
* xmlIO.c: avoid xmlAllocOutputBuffer using XML_BUFFER_EXACT which
  leads to performances problems especially on Windows.
daniel

svn path=/trunk/; revision=3820

---
cleanups and error reports when xmlTextWriterVSprintf fails, by Jinmei

* xmlwriter.c: cleanups and error reports when xmlTextWriterVSprintf
  fails, by Jinmei Tatuya
daniel

svn path=/trunk/; revision=3817

---
also remove pthread key when stopping thread support, patch based on Alex

* threads.c: also remove pthread key when stopping thread
  support, patch based on Alex Ott one should fix #564723
daniel

svn path=/trunk/; revision=3810

---
set doc on last child tree in xmlAddChildList for bug #546772. Fix problem

* tree.c: set doc on last child tree in xmlAddChildList for 
  bug #546772. Fix problem adding an attribute via with xmlAddChild 
  reported by Kris Breuker.

svn path=/trunk/; revision=3806

---
xmlwriter.c: fix indenting in xmlTextWriterFullEndElement for bug# 554353.

svn path=/trunk/; revision=3805

---
patch from Adrian Bunk which adds --disable-rebuild-docs to avoid

* configure.in doc/Makefile.am: patch from Adrian Bunk which
  adds --disable-rebuild-docs to avoid rebuilding them
daniel

svn path=/trunk/; revision=3801

---
fix non GNUC builds.

* dict.c: fix non GNUC builds.

svn path=/trunk/; revision=3771

---
Bug 546629  runtests doesn't pass on my mac Reviewed by William M.

Thu Aug  7 15:51:31 CEST 2008 Sven Herzberg <sven@imendio.com>

	Bug 546629  runtests doesn't pass on my mac
	Reviewed by William M. Brack.

	* runtest.c: use libpthread on Mac OS X as well


svn path=/trunk/; revision=3766

---
change the big key algorithm to work properly with QName too, fix a bug

* dict.c: change the big key algorithm to work properly with QName
  too, fix a bug with dict size and sub dictionaries
Daniel

svn path=/trunk/; revision=3764

---
fix the build root Daniel

* libxml.spec.in: fix the build root
Daniel

svn path=/trunk/; revision=3753

---
fix problem with xmlStreamPop when pattern includes a "." element (see

* pattern.c: fix problem with xmlStreamPop when pattern includes a "." element (see discussion on libxslt list)

svn path=/trunk/; revision=3752

---
fix line number on text nodes, problem raised by Ralf Junker Daniel

* SAX2.c: fix line number on text nodes, problem raised by Ralf Junker
Daniel

svn path=/trunk/; revision=3751

---
apply patch from Martin fixing python whitespaces following previous

* python/generator.py python/setup.py: apply patch from Martin fixing
  python whitespaces
* NEWS: following previous commit rebuilt now in UTF-8
Daniel

svn path=/trunk/; revision=3746

---
patch from Hans de Goede to switch the file to UTF-8 switch to generate

* ChangeLog: patch from Hans de Goede to switch the file to UTF-8
* doc/news.xsl: switch to generate the NEWS file in UTF-8 instead of
  ISO-8859-1
Daniel

svn path=/trunk/; revision=3745

---
avoid a regexp crash, should fix #523738 Daniel

* xmlregexp.c: avoid a regexp crash, should fix #523738
Daniel

svn path=/trunk/; revision=3744

---
fix a bug introduced when fixing #438208 and reported by Ashwin fix an

* tree.c: fix a bug introduced when fixing #438208 and reported by
  Ashwin
* python/generator.py: fix an infinite loop bug
Daniel

svn path=/trunk/; revision=3733

---
fix a link to XmlNodeType doc reported by Martijn Arts rebuilt Daniel

* xmlreader.c: fix a link to XmlNodeType doc reported by Martijn Arts
* docs/*: rebuilt
Daniel

svn path=/trunk/; revision=3732

---
fix some problems with the *EatName functions when running out of memory

* tree.c: fix some problems with the *EatName functions when
  running out of memory raised by Eric Schrock , should fix #438208
Daniel

svn path=/trunk/; revision=3729

---
buffer may not be large enough to convert to UCS4, patch from Christian

* encoding.c: buffer may not be  large enough to convert to
  UCS4, patch from Christian Fruth , fixes #504015
Daniel

svn path=/trunk/; revision=3727

---
avoid a scary realloc() loop should fix #520383 Daniel

* error.c: avoid a scary realloc() loop should fix #520383
Daniel

svn path=/trunk/; revision=3725

---
applied patch from Mike Hommey fixing distclean, fixes #520387 Daniel

* xstc/Makefile.am: applied patch from Mike Hommey fixing distclean,
  fixes #520387
Daniel

svn path=/trunk/; revision=3723

---
fix saving for file:///X:/ URI embedding Windows file paths should fix

* uri.c: fix saving for file:///X:/ URI embedding Windows file paths
  should fix #524253 
Daniel

svn path=/trunk/; revision=3714

---
check some allocation with Ashwin patch Daniel

* threads.c: check some allocation with Ashwin patch
Daniel

svn path=/trunk/; revision=3711

---
update from Tycho Hilhorst, should fix #523378 Daniel

* vms/build_libxml.com: update from Tycho Hilhorst, should fix #523378
Daniel

svn path=/trunk/; revision=3710

---
patch from Ashwin removing duplicate tests Daniel

* xmlreader.c: patch from Ashwin removing duplicate tests
Daniel

svn path=/trunk/; revision=3708

---
found a nasty bug in regexp automata build, reported by Ashwin and Bjorn

* xmlregexp.c: found a nasty bug in regexp automata build,
  reported by Ashwin and Bjorn Reese
Daniel

svn path=/trunk/; revision=3705

---
fix output bug reported by Petr Pajas and analyzed by Bill Daniel

* xmlIO.c: fix output bug reported by Petr Pajas and analyzed by Bill
Daniel

svn path=/trunk/; revision=3695

---
patch from Roumen Petrov to detect if iconv() needs a const for the second

* config.h.in configure.in encoding.c: patch from Roumen Petrov
  to detect if iconv() needs a const for the second parameter
Daniel

svn path=/trunk/; revision=3693

---
applied patch from Alfred Mickautsch to flush the output at the end of

* xmlwriter.c: applied patch from Alfred Mickautsch to flush the
  output at the end of document.
Daniel

svn path=/trunk/; revision=3691

---
apply simple patch from Carlo Bramini to avoid compilation problems with

* xmlmodule.c: apply simple patch from Carlo Bramini to avoid
  compilation problems with Mingw32
Daniel

svn path=/trunk/; revision=3689

---
applied patch from Florent Guilian to remove an useless mutex in the

* dict.c: applied patch from Florent Guilian to remove an
  useless mutex in the xmlDict structure.

older, not commited ...

* SAX2.c: another leak reported by Ashwin
* xinclude.c: fixed the behaviour when XIncluding a fragment
  of the current document, patch from Chris Ryan

Daniel


svn path=/trunk/; revision=3686

---
added space for port number (when not 80) in xmlNanoHTTPMethodRedir, plus

* nanohttp.c: added space for port number (when not 80) in
  xmlNanoHTTPMethodRedir, plus a few more comments. Should
  fix #514521.

svn path=/trunk/; revision=3685

---
applied a patch based on Petr Sumbera one to avoid a problem with paths

* uri.c: applied a patch based on Petr Sumbera one to avoid a 
  problem with paths starting with //
Daniel

svn path=/trunk/; revision=3683

---
apply fix from Stefan Kost to avoid a crash in xmllint, fixes 504284

* xmllint.c: apply fix from Stefan Kost to avoid a crash
  in xmllint, fixes 504284
Daniel

svn path=/trunk/; revision=3673

---
apply patch from Fred Crozat to avoid outputting -L/usr/lib from

* xml2-config.in: apply patch from Fred Crozat to avoid
  outputting -L/usr/lib from xml2-config, fixes #497012
Daniel

svn path=/trunk/; revision=3672

---
fix indentation in xmlTextWriterFullEndElement, as raised by Felipe Pena,

* xmlwriter.c: fix indentation in xmlTextWriterFullEndElement,
  as raised by Felipe Pena, should fix #508156
Daniel

svn path=/trunk/; revision=3668

---
remove a cut-and-paste copy error Daniel

* xmlregexp.c: remove a cut-and-paste copy error
Daniel

svn path=/trunk/; revision=3665

---
__xmlGlobalInitMutexDestroy() will free global_init_lock on Win32. Patch

* globals.c threads.c include/libxml/threads.h: 
  __xmlGlobalInitMutexDestroy() will free global_init_lock on Win32.
  Patch from Marc-Antoine Ruel.

svn path=/trunk/; revision=3664

---
fix crash/leaks from xmlSchematronParse due to improper schema document

* schematron.c: fix crash/leaks from xmlSchematronParse due to improper
  schema document ownership for bug #495215

svn path=/trunk/; revision=3663

---
xmlFree(NULL) should not crash in debug mode should fix #491651 Daniel

* xmlmemory.c: xmlFree(NULL) should not crash in debug mode
  should fix #491651
Daniel

svn path=/trunk/; revision=3662

---
fix to avoid a crash when dumping an attribute from an XHTML document,

* xmlsave.c: fix to avoid a crash when dumping an attribute from
  an XHTML document, patch contributed to fix #485298
Daniel

svn path=/trunk/; revision=3660

---
Enhanced to include port number (if not == 80) on the "Header:" URL (bug

* nanohttp.c: Enhanced to include port number (if not == 80) on the
  "Header:" URL (bug #469681).
* xmlregexp.c: Fixed a typo causing a warning message.

svn path=/trunk/; revision=3657

---
fix an open() call with creation without 3rd argument hopefully that

* nanohttp.c: fix an open() call with creation without 3rd argument
  hopefully that interface is never used.
Daniel

svn path=/trunk/; revision=3656

---
try to fix for the nth time the automata generation in case of complex

* xmlregexp.c: try to fix for the nth time the automata generation
  in case of complex ranges. I suppose that time it is actually okay
Daniel

svn path=/trunk/; revision=3650

---
fixed windows path determination (patch from Roland Schwarz, bug #462877)

* xmlIO.c: fixed windows path determination (patch from
  Roland Schwarz, bug #462877)
* win32/Makefile.mingw win32/configure.js: fixed mingw build
  (patch from Roland Schwarz, bug #462877)

svn path=/trunk/; revision=3648

---
fixed problem reported on bug #460415 Daniel

* xmlsave.c: fixed problem reported on bug #460415
Daniel

svn path=/trunk/; revision=3646

---
applied patch from from Patrik Fimml. Fixes bug #458268

* uri.c: applied patch from from Patrik Fimml.  Fixes bug #458268

svn path=/trunk/; revision=3645

---
applied patch from bug #454608 from Patrik Fimml. Fixes bug #454608.

* xinclude.c: applied patch from bug #454608 from Patrik Fimml.
  Fixes bug #454608.

svn path=/trunk/; revision=3644

---
patch from Dodji Seketeli to avoid a leak on repeated uses of

* xmlwriter.c: patch from Dodji Seketeli to avoid a leak on repeated
  uses of xmlTextWriterStartDocument()
Daniel

svn path=/trunk/; revision=3642

---
release of libxml2 2.6.28 patch from Dagfinn I. Mannsker for idness of

* doc/* configure.in NEWS: release of libxml2 2.6.28
* valid.c: patch from Dagfinn I. Mannsker for idness of name
  in HTML, c.f. bug #305885.
Daniel

svn path=/trunk/; revision=3638

---
apply patch from Ryan Hill to cope with changes in GNU tar, should fix

* xstc/Makefile.am: apply patch from Ryan Hill to cope with changes
  in GNU tar, should fix #396751
Daniel

svn path=/trunk/; revision=3633

---
try to allow compilation on old python version should fix #398125 Daniel

* python/types.c: try to allow compilation on old python version
  should fix #398125
Daniel

svn path=/trunk/; revision=3632

---
htmlNodeDumpFormatOutput didn't handle XML_ATTRIBUTE_NODe fixes bug

* HTMLtree.c: htmlNodeDumpFormatOutput didn't handle XML_ATTRIBUTE_NODe
  fixes bug #438390
Daniel

svn path=/trunk/; revision=3631

---
fixed bug #383687, some case of recursion on next were not caught in the

* catalog.c: fixed bug #383687, some case of recursion on next
  were not caught in the catalog code.
Daniel

svn path=/trunk/; revision=3628

---
fix bug reported by Franois Delyon Daniel

* uri.c: fix bug reported by Franois Delyon
Daniel

svn path=/trunk/; revision=3619

---
small enhancement to last fix, pointed out by Alex Cornejo

* nanohttp.c: small enhancement to last fix, pointed out
  by Alex Cornejo

svn path=/trunk/; revision=3617

---
applied patch to fix xmlListAppend() from Georges-Andr SILBER also fix

* list.c: applied patch to fix xmlListAppend() from 
  Georges-Andr SILBER
* valid.c: also fix the place wher it was called.
Daniel

svn path=/trunk/; revision=3614

---
typo patch from Bjorn Reese Daniel

* configure.in: typo patch from Bjorn Reese
Daniel

svn path=/trunk/; revision=3612

---
patch from Richard Jones to save the query part in raw form. also added

* uri.c include/libxml/uri.h: patch from Richard Jones to save
  the query part in raw form.
* libxml2-python-api.xml: also added accessor for the python bindings
Daniel

svn path=/trunk/; revision=3608

---
patch from Richard Jones to save the query part in raw form. Daniel

* uri.c include/libxml/uri.h: patch from Richard Jones to save
  the query part in raw form.
Daniel

svn path=/trunk/; revision=3607

---
applied patch from Richard Jones to for the silent flag on valgrind when

* xstc/Makefile.am doc/examples/Makefile.am Makefile.am: applied
  patch from Richard Jones to for the silent flag on valgrind
  when doing "make valgrind"
* xmlregexp.c: raise a regexp error when '\' is misused to escape
  a standard character.
Daniel

svn path=/trunk/; revision=3606

---
fix xmlURIUnescapeString comments which was confusing Daniel

* uri.c: fix xmlURIUnescapeString comments which was confusing
Daniel

svn path=/trunk/; revision=3603

---
new patch from Andreas Stricke to better integrate support for Windows CE

* include/win32config.h libxml.h: new patch from Andreas Stricke to
  better integrate support for Windows CE
Daniel

svn path=/trunk/; revision=3602

---
applied patch from Andreas Stricke to ease the compilation on Windows CE

* catalog.c libxml.h win32/wince/wincecompat.h win32/wince/wincecompat.c
  xmlIO.c nanohttp.c nanoftp.c trio.c triostr.c triostr.h: applied 
  patch from Andreas Stricke to ease the compilation on Windows CE
Daniel

svn path=/trunk/; revision=3600

---
"xmllint unusable on win32" so applied a libxml2 patch from Christian

* xmllint.c catalog.c: "xmllint unusable on win32" so applied
  a libxml2 patch from Christian Ehrlicher
Daniel

svn path=/trunk/; revision=3599

---
small enhancement for quantifier range with min occurs of 0; fixes bug

* xmlregexp.c: small enhancement for quantifier range with
  min occurs of 0; fixes bug 425542.

svn path=/trunk/; revision=3597

---
applied patch from Bjrn Wiberg to try to fix again the silly

* nanoftp.c: applied patch from Bjrn Wiberg to try to fix again
  the silly __ss_familly problem on various AIXes, should fix #420184
Daniel

svn path=/trunk/; revision=3592

---
corrected small error in last commit corrected small typo in last commit

* configure.in: corrected small error in last commit
* xmlreader.c: corrected small typo in last commit

svn path=/trunk/; revision=3591

---
applied patch from Julien Reichel cleaning up mode and state internal

* xmlreader.c: applied patch from Julien Reichel cleaning up mode
  and state internal flags mixups
Daniel

svn path=/trunk/; revision=3588

---
fixed tab problem with patch from Andreas Hanke (bug #408626)

* python/libxml.py: fixed tab problem with patch from Andreas Hanke (bug #408626)

svn path=/trunk/; revision=3586

---
fixed mistake in previous commit (ChangeLog is correct)

svn path=/trunk/; revision=3581

---
implemented patch from S. Bidoul for uri.c (bug #389767)

* implemented patch from S. Bidoul for uri.c (bug #389767)

svn path=/trunk/; revision=3576

---
fix xmlTextReaderSetup() description tests which were apparently never

* xmlreader.c: fix xmlTextReaderSetup() description
* test/relaxng/empty1.rng test/relaxng/comps_0.xml
  test/relaxng/empty1_0.xml test/relaxng/comps.rng
  test/relaxng/empty0.rng test/relaxng/empty0_0.xml
  test/relaxng/empty1_1.xml: tests which were apparently 
  never commited to CVS
Daniel

svn path=/trunk/; revision=3572

---
anothe XInclude user data propagation patch from Michael Day Daniel

* xinclude.c: anothe XInclude user data propagation patch from
  Michael Day
Daniel

---
applied patch from Igor for path conversion on Windows Daniel

* uri.c: applied patch from Igor for path conversion on Windows
Daniel

---
applied documentation patches from Markus Keim fixed one bug and added a

* tree.c: applied documentation patches from Markus Keim
* xmlregexp.c: fixed one bug and added a couple of optimisations
  while working on bug #362989
Daniel

---
preparing release of libxml2-2.6.27 fix a small problem with preproc flags

* NEWS configure.in testapi.c doc//*: preparing release of
  libxml2-2.6.27
* include/libxml/tree.h: fix a small problem with preproc flags
Daniel

---
applied fix from Christopher Boumenot for bug #362714 on regexps missing

* xmlregexp.c: applied fix from Christopher Boumenot for bug
  #362714 on regexps missing ']'
Daniel

---
fixing bug #344390 with xmlReconciliateNs Daniel

* tree.c: fixing bug #344390 with xmlReconciliateNs
Daniel

---
fix a Relax-NG bug related to element content processing, fixes bug

* relaxng.c: fix a Relax-NG bug related to element content processing,
  fixes bug #302836
Daniel

---
fix Windows compile - missing xmlWrapOpen.

* xmlIO.c: fix Windows compile - missing xmlWrapOpen.

---
fix comment on versions do not spend too much time digging in dumped

* include/libxml/xmlversion.h.in: fix comment on versions
* xmlmemory.c: do not spend too much time digging in dumped memory
Daniel

---
fixed a weird error where validity context whould not show up if warnings

* valid.c: fixed a weird error where validity context whould not
  show up if warnings were disabled pointed out by Bob Stayton
* xmlIO.c doc/generator.py: cleanup and fix to regenerate the docs
* doc//* testapi.c: rebuilt the docs
Daniel

---
applied patch from Mikhail Zabaluev to separate library flags for shared

* libxml-2.0.pc.in: applied patch from Mikhail Zabaluev to separate
  library flags for shared and static builds, fixes #344594. If this
  bites you, use xml2-config.
Daniel

---
remove the build path recorded in the python shared module as Peter

* python/Makefile.am: remove the build path recorded in the python
  shared module as Peter Breitenlohner pointed out, should fix #346022
Daniel

---
applied patch from Mikhail Zabaluev fixing the conditions of unescaping

* xmlIO.c: applied patch from Mikhail Zabaluev fixing the conditions
  of unescaping from URL to filepath, should fix #344588.
Daniel

---
applied patch from Peter Breitenlohner for wget detection and fix of a

* configure.in xstc/Makefile.am: applied patch from Peter Breitenlohner
  for wget detection and fix of a Python path problem, should fix
  #340993
Daniel

---
add a new function xmlPathToUri() to provide a clean conversion when

* uri.c include/libxml/uri.h: add a new function xmlPathToUri()
  to provide a clean conversion when setting up a base
* SAX2.c tree.c: use said function when setting up doc->URL
  or using the xmlSetBase function. Should fix #346261
Daniel

---
applied a portability patch from Emelyanov Alexey Daniel

* xmlIO.c: applied a portability patch from Emelyanov Alexey
Daniel

---
applied patch from Ross Reedstrom, Brian West and Stefan Anca to add

* python/libxml.py python/types.c: applied patch from Ross Reedstrom,
  Brian West and Stefan Anca to add XPointer suport to the Python bindings
Daniel

---
applied patch from Michael Day doing some refactoring for the catalog

* xmlIO.c: applied patch from Michael Day doing some refactoring
  for the catalog entity loaders.
Daniel

---
another patch from Emelyanov Alexey to clean up a few things in the

* xmlIO.c: another patch from Emelyanov Alexey to clean up a few things
  in the previous patch.
Daniel

---
applied patch from Roland Schwingel to fix the problem with file names in

* xmlIO.c: applied patch from Roland Schwingel to fix the problem
  with file names in UTF-8 on Windows, and compat on older win9x
  versions.
Daniel

---
applied patch to man pages from Daniel Leidert and regenerated Daniel

* doc/xmlcatalog.1 doc/xmlcatalog_man.xml doc/xmllint.1 doc/xmllint.xml:
  applied patch to man pages from Daniel Leidert and regenerated
Daniel

---
patch from Andrew W. Nosenko, xmlFreeRMutex forgot to destroy the

* threads.c: patch from Andrew W. Nosenko, xmlFreeRMutex forgot to
  destroy the condition associated to the mutex.
Daniel

---
applied patch from Felipe Contreras when compiling with --with-minimum

* testapi.c: applied patch from Felipe Contreras when compiling
  with --with-minimum
Daniel

---
Fix the breakages introduced by amaya, Daniel

---
fix bug #343968, include='text' can't lead to a recursion. Daniel

* xinclude.c: fix bug #343968, include='text' can't lead to a
  recursion.
Daniel

---
applied patch from Olli Savia for LynxOS Daniel

* libxml.h triodef.h: applied patch from Olli Savia for LynxOS
Daniel

---
applied another Python detection patch from Joseph Sacco cleanup the

* configure.in: applied another Python detection patch from Joseph Sacco
* libxml.spec.in: cleanup the changelog section, asciifies the spec file
  too
Daniel

---
fix a mix of code and declarations showing up on Windows patch from

* xmlIO.c: fix a mix of code and declarations showing up on Windows
  patch from Kjartan Maraas, fixing #340404
Daniel

---
fixing bug #340398 xmlCharEncOutFunc writing to input buffer Daniel

* encoding.c: fixing bug #340398 xmlCharEncOutFunc writing to
  input buffer
Daniel

---
preparing 2.6.24 release, fixed Python paths at the last moment fix some

* NEWS configure.in doc//*: preparing 2.6.24 release, fixed Python
  paths at the last moment
* relaxng.c testapi.c tree.c: fix some comments
Daniel

---
applied patch from Roland Schwingel to allow UTF-8 file paths on Windows

* xmlIO.c: applied patch from Roland Schwingel to allow UTF-8
  file paths on Windows
Daniel

---
patch from Jason Viers for line breaks after EndPI Daniel

* xmlwriter.c: patch from Jason Viers for line breaks after EndPI
Daniel

---
applied patch from Gary Coady to really make sure xmllint --nonet would

* xmllint.c: applied patch from Gary Coady to really make sure
  xmllint --nonet would not reach the network, should fix #337483.
Daniel

---
applied patch from Joseph Sacco changing slightly the python detection

* configure.in: applied patch from Joseph Sacco changing slightly
  the python detection scheme should fix bug #338526
Daniel

---
fixing a deallocation problem in xmlRelaxNGParse() in case of errors,

* relaxng.c: fixing a deallocation problem in xmlRelaxNGParse()
  in case of errors, should fix bug #338306
Daniel

---
revert last patch, daniel

---
Another man patch from Daniel, Daniel

---
applied patches from Aivars Kalvans to make unicode tables const, fixes

* chvalid.c genChRanges.py genUnicode.py xmlunicode.c
  include/libxml/chvalid.h include/libxml/xmlunicode.h: applied
  patches from Aivars Kalvans to make unicode tables const, fixes
  bug #336096, this also updates to Unicode 4.01 final with a couple
  of character ranges fixes.
Daniel

---
fixed bug #335603 and resync'ed genChRanges.py to the expected output.

* chvalid.c genChRanges.py include/libxml/chvalid.h: fixed bug
  #335603 and resync'ed genChRanges.py to the expected output.
Daniel

---
applied patch from Youri Golovanov fixing bug #316338 and adding a couple

* xmlregexp.c: applied patch from Youri Golovanov fixing bug
  #316338 and adding a couple of optimizations in the regexp
  compilation engine.
* test/regexp/bug316338 result/regexp/bug316338: added regression
  tests based on the examples provided in the bug report.
Daniel

---
fix Red Hat bug #184170 Daniel

* xml2-config.in: fix Red Hat bug #184170
Daniel

---
fix HTML attribute ID checking for input element. Maintain current

* valid.c: fix HTML attribute ID checking for input element.
  Maintain current attribute "name" behavior for now.

---
Fix the add sibling functions when passing attributes. Modify testing for

* tree.c: Fix the add sibling functions when passing attributes.
  Modify testing for ID in xmlSetProp.
  No longer remove IDness when unlinking or replacing an attribute.

---
Martin Cole pointed out a bug in xmlCatalogAdd() if /etc/xml/catalog

* catalog.c: Martin Cole pointed out a bug in xmlCatalogAdd()
  if /etc/xml/catalog doesn't exist.
Daniel

---
improve catalog debugging message patch from Rick Jones Daniel

* catalog.c: improve catalog debugging message patch from Rick Jones
Daniel

---
fix an error report when using --path and --valid closes bug #331290

* xmllint.c: fix an error report when using --path and --valid
  closes bug #331290
Daniel

---
trying to fix #331062, this is again a problem around interleave, there is

* relaxng.c: trying to fix #331062, this is again a problem
  around interleave, there is no good fix unless reimplementing
  but this works around some cases and allow to validate in that
  case.
Daniel

---
Fixed bug #328896 reported by Liron. The path for text- and

* tree.c: Fixed bug #328896 reported by Liron. The path
  for text- and CDATA-section-nodes was computed incorrectly
  in xmlGetNodePath().

---
bug fixes for #327167 as well as some cleanups and more thorough tests on

* xmlregexp.c: bug fixes for #327167 as well as some cleanups
  and more thorough tests on atoms comparisons.
Daniel

---
patch from Eric Zurcher to compile with Borland C++ 6 Daniel

* include/wsockcompat.h: patch from Eric Zurcher to compile with
  Borland C++ 6
Daniel

---
applied patch from Rob Richards fixing the URI regressions tests on

* uri.c: applied patch from Rob Richards fixing the URI regressions
  tests on Windows which seems to indicate bad escaping.
Daniel

---
trying to fix windows/configure issues reported by Tim Van Holder Daniel

* configure.in xml2-config.in: trying to fix windows/configure
  issues reported by Tim Van Holder
Daniel

---
Another fix to handle "foo//.": "foo" was not included in the resulting

* pattern.c: Another fix to handle "foo//.": "foo" was not
  included in the resulting node-set.

---
applied patch from Mark Junker, fixing a MinGW compilation problem, should

* include/wsockcompat.h: applied patch from Mark Junker, fixing a
  MinGW compilation problem, should close bug #324943
Daniel

---
bug in xmlRegExecPushString2() pointed out by Sreeni Nair. Daniel

* xmlregexp.c: bug in xmlRegExecPushString2() pointed out by
  Sreeni Nair.
Daniel

---
fix bug #322136 in xmlNodeBufGetContent when entity ref is a child of an

* tree.c: fix bug #322136 in xmlNodeBufGetContent when entity ref is
  a child of an element (fix by Oleksandr Kononenko).
* HTMLtree.c include/libxml/HTMLtree.h: Add htmlDocDumpMemoryFormat.

---
applied patch from Gary Coady to accept gzipped http resources. Daniel

* nanohttp.c: applied patch from Gary Coady to accept gzipped
  http resources.
Daniel

---
Adjusted a bug's wrong date-time

---
Named the reporter of bug #323510

---
small doc patch from Aron Stansvik another doc patch for a deprecated API

* xmlreader.c: small doc patch from Aron Stansvik
* legacy.c: another doc patch for a deprecated API
Daniel

---
Tiny change for 'make tests': raised the number of expected failures for

* Makefile.am: Tiny change for 'make tests': raised
  the number of expected failures for James Clark's
  XML Schema datatype tests from 10 to 11. The additional
  reported error was agreed to be correct long time ago,
  but we missed to adjust the message reported by
  the testing script.

---
applied patch from Geert Jansen to remove xmlBufferClose() which is not

* xmlIO.c: applied patch from Geert Jansen to remove xmlBufferClose()
  which is not needed.
Daniel

---
function consolidation when writing to xmlBuffer. Return error condition

* xmlIO.c xmlwriter.c: function consolidation when writing to xmlBuffer.
  Return error condition not len if xmlwriter fails writing to buffer.

---
applied patch from Geert Jansen to implement the save function to a

* xmlsave.c xmlIO.c include/libxml/xmlIO.h include/libxml/xmlsave.h:
  applied patch from Geert Jansen to implement the save function to
  a xmlBuffer, and a bit of cleanup.
Daniel

---
fix bug #319897, problem with counted atoms when the transition itself is

* xmlregexp.c: fix bug #319897, problem with counted atoms
  when the transition itself is counted too
* result/regexp/hard test/regexp/hard: augmented the regression
  tests with the problem exposed.
Daniel

---
tiny fix from Albert Chin portability cleanup for arch needing trio for

* libxml.3: tiny fix from Albert Chin
* runsuite.c runtest.c testapi.c: portability cleanup for arch
  needing trio for *printf
Daniel

---
add additional checks to prevent tree corruption. fix problem copying

* tree.c: add additional checks to prevent tree corruption. fix problem
  copying attribute using xmlDocCopyNode from one document to another.

---
fixing a portability problem on some old Unices with patch from Albert

* error.c: fixing a portability problem on some old Unices with
  patch from Albert Chin
Daniel

---
remove warnings to stdout patch from Nic Ferrier Daniel

* python/libxml.py: remove warnings to stdout patch from Nic Ferrier
Daniel

---
prevent output of fragment tags when serializing XHTML.

* xmlsave.c: prevent output of fragment tags when serializing XHTML.

---
applied patch from Kolja Nowak to use getaddrinfo() if supported in

* nanohttp.c include/wsockcompat.h: applied patch from Kolja Nowak
  to use getaddrinfo() if supported in Windows build (bug# 317431).

---
Adrian Mouat pointed out redundancies in xmlReportError() Daniel

* error.c: Adrian Mouat pointed out redundancies in xmlReportError()
Daniel

---
detect combinatory explosion and return with a runtime error in those

* xmlregexp.c: detect combinatory explosion and return with
  a runtime error in those case, c.f. #316338 though maybe we
  should not see such an explosion with that specific regexp,
  more checking needs to be done.
Daniel

---
fixed problem when xmlBuildRelativeURI was given a blank path (bug 316224)

* uri.c: fixed problem when xmlBuildRelativeURI was given a
  blank path (bug 316224)

---
applied second patch from David Madore to be less intrusive when handling

* xmlsave.c: applied second patch from David Madore to be less intrusive
  when handling scripts and style elements in XHTML1 should fix #316041
* test/xhtml1 result//xhtml1\*: updated the test accordingly
Daniel

---
add XML_SAVE_NO_EMPTY save option and use option from xmlSaveCtxtPtr

* include/libxml/xmlsave.h xmlsave.c: add XML_SAVE_NO_EMPTY save option
  and use option from xmlSaveCtxtPtr rather than global during output.
* xmlsave.c: fix some output formatting for meta element under XHTML.

---
fix bug #316034, where xmlElemDump() can crash if given a document pointer

* xmlsave.c: fix bug #316034, where xmlElemDump() can crash if
  given a document pointer instead of an element
Daniel

---
patch from Stphane Bidoul to compile without schematron Daniel

* xmllint.c: patch from Stphane Bidoul to compile without schematron
Daniel

---
Small fix to spec file, Daniel

---
real fix for #314881 and #314759 is was a bit more complex than initially

* relaxng.c: real fix for #314881 and #314759 is was a bit more complex
  than initially expected as ctxt->error == NULL had behaviour side
  effects at the compilation level itself.
Daniel

---
check for NULL to prevent crash with meta elements

* xmlsave.c: check for NULL to prevent crash with meta elements

---
removed the obsolete --libtool-libs option, c.f. bug #314853 Daniel

* xml2-config.in: removed the obsolete --libtool-libs option, c.f.
  bug #314853
Daniel

---
trying to fix the first part of #310033 by detecting gcc <= 3.2 Daniel

* configure.in: trying to fix the first part of #310033 by
  detecting gcc <= 3.2
Daniel

---
fixed bug #310033, the URI extraction code given a node is a bit twisted

* error.c: fixed bug #310033, the URI extraction code given a
  node is a bit twisted and broke in the last months.
Daniel

---
patch from Andrew W. Nosenko, use se $GCC = 'yes' instead of $CC = 'gcc'

* configure.in: patch from Andrew W. Nosenko, use se $GCC = 'yes'
  instead of $CC = 'gcc' because GCC may have a different name
Daniel

---
changes the way the python binary is found, should also fix bug #308004

* configure.in: changes the way the python binary is found, should
  also fix bug #308004
Daniel

---
applied the patch suggested #309565 which can avoid looping in error

* encoding.c: applied the patch suggested #309565 which can avoid
  looping in error conditions.
Daniel

---
line numbers are now carried by most nodes, fixing xmlGetLineNo() c.f. bug

* SAX2.c tree.c: line numbers are now carried by most nodes, fixing
  xmlGetLineNo() c.f. bug #309205
Daniel

---
fixed compilation when configured --without-sax1 and other cleanups fixes

* SAX2.c globals.c runtest.c testC14N.c testapi.c tree.c
  include/libxml/SAX2.h include/libxml/xmlregexp.h: fixed compilation
  when configured --without-sax1 and other cleanups fixes bug #172683
* doc/* elfgcchack.h: regenerated
Daniel

---
regenerated fixed a compilation problem some cleanups and one bug fix

* elfgcchack.h testapi.c doc/*: regenerated
* schematron.c: fixed a compilation problem
* xmlregexp.c include/libxml/xmlregexp.h: some cleanups and one bug fix
* result/expr/base: slightly changes the number of Cons.
Daniel

---
applied another patch from Rob Richards to fix xmlTextReaderGetAttributeNs

* xmlreader.c: applied another patch from Rob Richards to fix
  xmlTextReaderGetAttributeNs and xmlTextReaderMoveToAttributeNs
Daniel

---
applied patch from Derek Poon fixing bug #310692 Daniel

* valid.c: applied patch from Derek Poon fixing bug #310692
Daniel

---
fixed bug #302302, nasty but the fix is rather simple. Daniel

* xinclude.c: fixed bug #302302, nasty but the fix is rather simple.
Daniel

---
fixed bug #310333 with a patch close to the provided patch for HTML UTF-8

* HTMLtree.c: fixed bug #310333 with a patch close to the provided
  patch for HTML UTF-8 serialization
* result/HTML/script2.html: this changed the output of that test
Daniel

---
applied patch from Rob Richards fixing xmlTextReaderGetAttribute Daniel

* xmlreader.c: applied patch from Rob Richards fixing
  xmlTextReaderGetAttribute
Daniel

---
small doc fix for #312647 Daniel

* doc/XSLT.html doc/xml.html: small doc fix for #312647
Daniel

---
applied patch from Rob Richards to allow disabling modules in win32, fixes

* win32/configure.js: applied patch from Rob Richards to allow
  disabling modules in win32, fixes #304071
Daniel

---
applied fix from Jakub Piotr Clapa for xmlAttr.parent(), closing #312181

* python/libxml.c: applied fix from Jakub Piotr Clapa for
  xmlAttr.parent(), closing #312181
Daniel

---
applied patch from Rob Richards to add schematron to the build on Windows

* win32/Makefile.msvc win32/configure.js: applied patch from Rob
  Richards to add schematron to the build on Windows
* test/schematron/zvon3* result/schematron/zvon3*: second test
* test/schematron/zvon10* result/schematron/zvon10*: this is the
  real second test 10 and 2 are swapped.
Daniel

---
fixing the loop bug, fixing schematron text error rendering started

* schematron.c xmllint.c: fixing the loop bug, fixing schematron
  text error rendering
* Makefile.am result/schematron/* test/schematron/zvon1*.sct:
  started integrating within "make tests"
Daniel

---
applied a patch from Gerrit P. Haase to add module support on cygwin

* configure.in: applied a patch from Gerrit P. Haase to add
  module support on cygwin
Daniel

---
fixed bug #310105 with http_proxy environments with patch provided by

* nanohttp.c: fixed bug #310105 with http_proxy environments with
  patch provided by Peter Breitenlohner
Daniel

---
fix #define for windows

---
try again to fix file format for Windows

* win32/Makefile.msvc: try again to fix file format for Windows

---
Trying to fix CR/LF troubles, Daniel

---
Yet Another Windows Debugging Remote Patch From CVS Hell, Daniel

---
fix a problem with previous patch to testapi.c Daniel

* gentest.py testapi.c: fix a problem with previous patch to
  testapi.c
Daniel

---
fixed bug #307503 misplaced #ifdef Daniel

* xmlIO.c: fixed bug #307503 misplaced #ifdef
Daniel

---
complete, checking on other platforms is needed updated fix a bug raised

* runtest.c: complete, checking on other platforms is needed
* README: updated
* debugXML.c: fix a bug raised by bill on IRC
* relaxng.c: fix a leak in weird circumstances
* runsuite.c Makefile.am: standalone test tool agaisnt
  the regression suites, work in progress
Daniel

---
applied patch from Rob Richards for removal of ID (and xml:id) applied

* tree.c valid.c: applied patch from Rob Richards for removal
  of ID (and xml:id)
* xmlreader.c: applied patch from James Wert implementing
  xmlTextReaderReadInnerXml and xmlTextReaderReadOuterXml
Daniel

---
applied patch from Morten Welinder, closing bug #306901 on compiling

* globals.c: applied patch from Morten Welinder, closing bug #306901
  on compiling subsets of the library
Daniel

---
fixed xml attributes processing bug in exc c14n added --exc-c14n command

* c14n.c: fixed xml attributes processing bug in exc c14n
* xmllint.c: added --exc-c14n command line option

---
applied patch from Mark Vakoc fixing saving of CDATA with NULL content.

* xmlsave.c: applied patch from Mark Vakoc fixing saving of
  CDATA with NULL content.
Daniel

---
applied patch for replaceNode from Brent Hendricks Daniel

* tree.c: applied patch for replaceNode from Brent Hendricks
Daniel

---
fixed bug #303682 of a leak reported by Malcolm Rowe Daniel

* tree.c: fixed bug #303682 of a leak reported by Malcolm Rowe
Daniel

---
applied patch from Steve Nairn tof fix the compilation problem exposed in

* testapi.c: applied patch from Steve Nairn tof fix the compilation
  problem exposed in bug #303640
Daniel

---
applied patch from Aron Stansvik for bug #172525 about HTTP query string

* nanohttp.c: applied patch from Aron Stansvik for bug #172525
  about HTTP query string parameter being lost
Daniel

---
applied fix from Rob Richards to compile on Windows. Daniel

* nanoftp.c: applied fix from Rob Richards to compile on Windows.
Daniel

---
fixed bug reported by Petr Pajas, in the absence of encoding UTF-8 should

* xmlsave.c: fixed bug reported by Petr Pajas, in the absence of
  encoding UTF-8 should really be assumed. This may break if
  the HTTP headers indicates for example ISO-8859-1 since this
  then becomes a well formedness error.
Daniel

---
fixed bug #168504 Daniel

* python/libxml.c: fixed bug #168504
Daniel

---
fix unitinialized variable in not frequently used code bug #172182 Daniel

* encoding.c: fix unitinialized variable in not frequently used
  code bug #172182
Daniel

---
fixing bug 168196, <a name=""> must be URI escaped too Daniel

* HTMLtree.c: fixing bug 168196, <a name=""> must be URI escaped too
Daniel

---
applied fix for xmlTextReaderNext() bug from Rob Richards Daniel

* xmlreader.c: applied fix for xmlTextReaderNext() bug from
  Rob Richards
Daniel

---
some gcc4 portability patches, including a serious aliasing bug exposed in

* include/libxml/hash.h libxml.h libxml.spec.in: some gcc4 portability
  patches, including a serious aliasing bug exposed in s390
  when trying to convert data pointer to code pointer.
Daniel

---
applied patch from Rich Salz for multithreading on Windows. Daniel

* threads.c: applied patch from Rich Salz for multithreading on
  Windows.
Daniel

---
applied a patch from Rob Richards fixing a couple of bugs in the writer

* xmlwriter.c: applied a patch from Rob Richards fixing a couple
  of bugs in the writer
Daniel

---
applied patch from Rob Richards to fix a problem with

* xmlwriter.c: applied patch from Rob Richards to fix a problem with
  xmlTextWriterStartAttributeNS
Daniel

---
fixed xmlXIncludeParseFile to prevent overwriting XML_COMPLETE_ATTRS when

* xinclude.c: fixed xmlXIncludeParseFile to prevent
  overwriting XML_COMPLETE_ATTRS when setting pctxt->loadsubset
  (bug 166199)
* Makefile.am, python/tests/Makefile.am, xstc/Makefile.am: added
  code to add $(top_builddir)/.libs to LD_LIBRARY_PATH whenever
  PYTHONPATH is set, to assure new libxml2 routines are used.

---
applied patch to xmlSetNsProp from Mike Hommey Daniel

* tree.c: applied patch to xmlSetNsProp from Mike Hommey
Daniel

---
use the walker to test the patterns instead of the normal reader bug fixes

* Makefile.am: use the walker to test the patterns instead of
  the normal reader
* pattern.c xmllint.c: bug fixes in the train including fixing the
  stupid build break.
Daniel

---
had to fix generation and rebuild. the testapi found a bug in the last

* gentest.py testapi.c: had to fix generation and rebuild.
* valid.c: the testapi found a bug in the last code of course !
Daniel

---
fixing the way testapi.c is generated, fixes bug #161386 fix a comment

* Makefile.am testapi.c doc/Makefile.am: fixing the way testapi.c
  is generated, fixes bug #161386
* dict.c: fix a comment typo
* elfgcchack.h doc/*: regenerated
Daniel

---
patch from Gary Coady to fix a race in dict reference counting in

* dict.c: patch from Gary Coady to fix a race in dict reference
  counting in multithreaded apps.
Daniel

---
make __str__ call serialize() on nodes, c.f. bug #157872 Daniel

* python/libxml.py: make __str__ call serialize() on nodes, c.f.
  bug #157872
Daniel

---
applied patch from Dan McNichol for compilation on AIX Daniel

* nanoftp.c: applied patch from Dan McNichol for compilation on AIX
Daniel

---
extended xmlRegExecErrInfo() and xmlRegExecNextValues() to return error

* include/libxml/xmlregexp.h xmlregexp.c: extended xmlRegExecErrInfo()
  and xmlRegExecNextValues() to return error transition strings too,
  and sink state detection and handling.
Daniel

---
fixed dependency on python 2.3, also small improvement for cygwin (bug

* Makefile.am configure.in: fixed dependency on python 2.3,
  also small improvement for cygwin (bug 163273)

---
small update trying to add an API to get useful error informations back

* TODO: small update
* xmlregexp.c: trying to add an API to get useful error informations
  back from a failing regexp context.
Daniel

---
fixed problem with xmlURIEscape when query part was empty (actually fixed

* uri.c: fixed problem with xmlURIEscape when query part was
  empty (actually fixed xmlURIEscapeStr to return an empty
  string rather than NULL for empty string input) (bug 163079)

---
applied patch from Bjorn Reese, plus some cleanups fixed the stylesheet to

* xmlmodule.c include/libxml/xmlmodule.h: applied patch from
  Bjorn Reese, plus some cleanups
* elfgcchack.h doc/elfgcchack.xsl: fixed the stylesheet to
  add the new header
* doc/* testapi.c: regenerated the API
Daniel

---
making DSO support an option code and documentation cleanups regenerated

* configure.in: making DSO support an option
* xmlmodule.c xmlreader.c include/libxml/xmlmodule.h: code
  and documentation cleanups
* elfgcchack.h testapi.c doc/*: regenerated the docs and
  checks for new module
* test/valid/REC-xml-19980210.xml: fix a small change introduced
  previously
Daniel

---
applied patch from Marcin Konicki for BeOS Daniel

* configure.in: applied patch from Marcin Konicki for BeOS
Daniel

---
added most required entires to foreign encoding table, plus some

* python/generator.py: added most required entires to
  foreign encoding table, plus some additional logic to
  assure only the 1st param uses the 't#' format.  Fixes
  bug #152286, but may still have some other UTF-16 problems.

---
enhanced for enabling build in a different directory. Added (optional)

* Makefile.am, gentest.py: enhanced for enabling build in
  a different directory.  Added (optional) param to gentest.py
  to specify the source directory (bug #155468)
* doc/Makefile.am: changed destination of NEWS from (top_srcdir)
  to (top_builddir) (bug #155468)
* python/Makefile.am, python/generator.py: enhanced for enabling
  build in a different directory(bug #155468).  Added (optional)
  param to generator.py to specify the source directory.  Added
  a new table of functions which have possible "foreign" encodings
  (e.g. UTF16), and code to use python 't' format instead of
  'z' format (mostly solving bug #152286, but still need to
  populate the table).

---
doc/site.xsl, doc/xml.html, plus rebuilt all the html pages Change


Tue Dec 21 08:10:44 MST 2004 John Fleck <jfleck@inkstain.net>

	* doc/site.xsl, doc/xml.html, plus rebuilt all the html pages
	Change reference to new site for Solaris binaries, fixing bug
	160598

---
changed xmlErrValidWarning to use ctxt->warning instead of ctxt->error for

* valid.c: changed xmlErrValidWarning to use ctxt->warning
  instead of ctxt->error for its reports (bug #160662)

---
changed maintainer-clean dependency with suggestion from Crispin Flowerday

* doc/Makefile.am: changed maintainer-clean dependency with
  suggestion from Crispin Flowerday (bug #157634)
* debugXML.c: fixed crash when ATTRIBUTE or DOCUMENT nodes
  were specified with debugDumpNode (bug #160621)

---
fixed ID deallocation problem based on patch from Steve Shepard fixes bug

* valid.c: fixed ID deallocation problem based on patch from
  Steve Shepard fixes bug #160893
* xmlmemory.c: improving comment.
* testapi.c: new test for xmlDictExists() is generated.
Daniel

---
added a check within xmlOutputBufferWriteEscape to prevent a dead loop on

* xmlIO.c: added a check within xmlOutputBufferWriteEscape to prevent
  a dead loop on bad data (bug 159550)

---
forgot a $(srcdir) stupid error wrong name #157976 Daniel

* Makefile.am: forgot a $(srcdir)
* encoding.c: stupid error wrong name #157976
Daniel

---
trying to fix some optional support brokenness daniel

* testapi.c: trying to fix some optional support brokenness
daniel

---
augmented types supported a number of new bug fixes and documentation

* gentest.py testapi.c: augmented types supported
* HTMLtree.c tree.c xmlreader.c xmlwriter.c: a number of new
  bug fixes and documentation updates.
Daniel

---
more coverage one fix Daniel

* gentest.py testapi.c: more coverage
* xmlunicode.c: one fix
Daniel

---
Fixed bug #153937, making sure the conversion functions return the number

* encoding.c doc/examples/testWriter.c: Fixed bug #153937, making
  sure the conversion functions return the number of byte written.
  Had to fix one of the examples.
Daniel

---
fixed a stupid mistake in xmlBuildRelativeURI (bug 156527)

* uri.c: fixed a stupid mistake in xmlBuildRelativeURI
  (bug 156527)

---
unlinked the internal subset within xmlValidateDtd (bug 141827) added

* valid.c: unlinked the internal subset within xmlValidateDtd
  (bug 141827)
* configure.in: added -Wall to developer's flags
* doc/examples/reader4.res: added to CVS

---
fixed nasty bug #156087 Daniel

* threads.c: fixed nasty bug #156087
Daniel

---
applied patch from Graham Bennett adding 4 convenience functions to the

* include/libxml/xmlreader.h xmlreader.c: applied patch from
  Graham Bennett adding 4 convenience functions to the reader API.
Daniel

---
applied patch from Thomas Fitzsimmons fixing #155240 building outside the

* python/Makefile.am: applied patch from Thomas Fitzsimmons fixing
  #155240 building outside the source tree. but make tests fails.
Daniel

---
fix small leak

---
small change to last fix, to get xml:base right

* catalog.c: small change to last fix, to get xml:base right

---
applied patch from Malcolm Tredinnick fixing bug #154294 related to saving

* python/generator.py python/libxml.c python/tests/outbuf.py:
  applied patch from Malcolm Tredinnick fixing bug #154294
  related to saving to python file objects.
Daniel

---
changed changed sys.path setting from 'append' to 'insert' (patch supplied

* check-relaxng-test-suite.py, check-relaxng-test-suite2.py,
  check-xinclude-test-suite.py, check-xml-test-suite.py,
  check-xsddata-test-suite.py, doc/examples/index.py: changed
  changed sys.path setting from 'append' to 'insert' (patch
  supplied by Malcolm Tredinnick) (bug 153716)

---
added some coding to attempt to display which file contains an error when

* error.c: added some coding to attempt to display which file
  contains an error when using XInclude (bug 152623)

---
stupid cut'n paste bug in xmllint detection daniel

* configure.in: stupid cut'n paste bug in xmllint detection
daniel

---
another patch from Malcolm Tredinnick adding option not to load dtd from

* python/drv_libxml2.py: another patch from Malcolm Tredinnick
  adding option not to load dtd from the drv_libxml2.py module
  #134633
Daniel

---
applied patch from Malcolm Tredinnick fixing python exception hierarchy

* python/libxml.py: applied patch from Malcolm Tredinnick fixing
  python exception hierarchy #139824
Daniel

---
added --timing --copy timing for the copy applied patch from Craig Berry

* xmllint.c: added --timing --copy timing for the copy
* vms/build_libxml.com: applied patch from Craig Berry
  to build with recent releases
Daniel

---
applied fix from Stepan Kasal to fix duplication in the change log and

* ChangeLog: applied fix from Stepan Kasal to fix duplication
  in the change log and cleanup of space/tabs issues.
Daniel

---
changed char array initialisation to avoid a complaint from some

* xmlwriter.c: changed char array initialisation to avoid a
  complaint from some compiler(s) (bug 152308)

---
fixed 2 problems raised by #152140, one which is that notation not in the

* valid.c xmlsave.c: fixed 2 problems raised by #152140, one
  which is that notation not in the internal subset should
  not be saved, and the second more nasty on an error saving
  NOTATIONs, if there is a proof that nobody uses notations !
Daniel

---
Small fix on when to run xstc testsuite in make tests, daniel

---
Small fix, Daniel

---
modified comments on xmlGetUTF8Char in response to bug 151760 (no change

* xmlstring.c: modified comments on xmlGetUTF8Char in
  response to bug 151760 (no change to logic)

---
fixed error reported on the list caused by my last change

* xmlstring.c: fixed error reported on the list caused by
  my last change

---
fixing #151456, an encoding error could generate a serialization loop.

* xmlIO.c: fixing #151456, an encoding error could generate
  a serialization loop.
Daniel

---
added BuildRequires: zlib-devel, fixes Red Hat bug #124942 Daniel

* libxml.spec.in: added BuildRequires:  zlib-devel, fixes
  Red Hat bug #124942
Daniel

---
fix a problem on last commit Daniel

* python/libxml.c: fix a problem on last commit
Daniel

---
Dodji pointed out a bug in xmlGetNodePath() applied patch from Albert Chin

* tree.c: Dodji pointed out a bug in xmlGetNodePath()
* xmlcatalog.c: applied patch from Albert Chin to add a
  --no-super-update option to xmlcatalog see #145461
  and another patch also from Albert Chin to not crash
  on -sgml --del without args see #145462
* Makefile.am: applied another patch from Albert Chin to
  fix a problem with diff on Solaris #145511
* xmlstring.c: fix xmlCheckUTF8() according to the suggestion
  in bug #148115
* python/libxml.py: apply fix from Marc-Antoine Parent about
  the errors in libxml(2).py on the node wrapper #135547
Daniel

---
applied a patch from Gerrit P. Haase to get python bindings on Cygwin

* Makefile.am config.h.in configure.in python/Makefile.am:
  applied a patch from Gerrit P. Haase to get python bindings
  on Cygwin
Daniel

---
enhanced per bug 119876. Further info posted to the mailing list.

* doc/buildDocBookCatalog: enhanced per bug 119876.  Further
  info posted to the mailing list.

---
applied a couple of patch one from Oliver Stoeneberg and another one from

* tree.c: applied a couple of patch one from Oliver Stoeneberg
  and another one from Rob Richards fixing #148448
Daniel

---
put in patch for Windows buffer re-allocation submitted by Steve Hay (bug

* tree.c: put in patch for Windows buffer re-allocation
  submitted by Steve Hay (bug 146697)

---
added some code to check, when an include is done, whether the requested

* xinclude.c: added some code to check, when an include is
  done, whether the requested URL gets mapped to some other
  location (e.g. with a catalog entry) and, if so, take care
  of the xml:base properly (bug 146988)

---
fixed problem with reader state after processing attributes (bug 147993)

* xmlreader.c: fixed problem with reader state after
  processing attributes (bug 147993)

---
put in an auto* check for the path to perl (if it exists), and modified

* configure.in, Makefile.am: put in an auto* check for the
  path to perl (if it exists), and modified make Timingtests
  to use that path instead of just executing the dbgenattr.pl
  script (bug 148056)

---
applied patches from Peter Breitenlohner to fix handling of white space

* catalog.c test/catalogs/white* result/catalogs/white*:
  applied patches from Peter Breitenlohner to fix handling
  of white space normalization in public ids and add tests
Daniel

---
applied a small fix from Steve Hay Daniel

* xmlmemory.c: applied a small fix from Steve Hay
Daniel

---
ran 'expand' on the file to get rid of mixture of tabs and spaces (bug

* python/libxml.py: ran 'expand' on the file to get rid of mixture
  of tabs and spaces (bug 147424)

---
fixed a bug which prevented building with --with-minimum Daniel

* elfgcchack.h doc/apibuild.py doc/libxml2-api.xml: fixed a bug
  which prevented building with --with-minimum
Daniel

---
seems the reader buffer could be used while not allocated, fixes bug

* xmlreader.c: seems the reader buffer could be used while not
  allocated, fixes bug #145218
Daniel

---
do not provide functions used as destructor of classes as public methods

* python/generator.py: do not provide functions used as destructor
  of classes as public methods to avoid double-free problem like
  in bug #145185
Daniel

---
suppressed warnings from within xmlValidGetValidElements (bug 144644)

* valid.c: suppressed warnings from within xmlValidGetValidElements
  (bug 144644)
* doc/examples/testWriter.c: corrected typo in comment for ISO-8859-1
  (bug 144245)

---
doc/xmlcatalog_man.xml, xmlcatalog.1 Docs patch from Ville Skytta,


Wed Jun 23 20:18:19 MDT 2004 John Fleck <jfleck@inkstain.net>

	* doc/xmlcatalog_man.xml, xmlcatalog.1
	Docs patch from Ville Skytta, bugzilla #144841

---
fix from Steve Ball and update of the comment. William pointed out that

* xmlreader.c: fix from Steve Ball and update of the comment.
* Makefile.am result/errors/*.str: William pointed out that
  the streaming error checking part wasn't streaming, fixing
Daniel

---
revert 2 parts of the patch, Daniel

---
patch from Igor for the default catalog path on Windows Daniel

* catalog.c: patch from Igor for the default catalog path on Windows
Daniel

---
applied patch from Rob Richards for the per thread I/O mappings Daniel

* globals.c xmlIO.c include/libxml/globals.h include/libxml/xmlIO.h:
  applied patch from Rob Richards for the per thread I/O mappings
Daniel

---
some further enhancement to take care of xml:base for XPointer elements

* xinclude.c: some further enhancement to take care of
  xml:base for XPointer elements (bug 143886).  Also fixed
  a problem when xml:base was already specified on an
  XInclude'd element.

---
fixed a problem with internal cleanup of <DIV> element (bug 143738).

* relaxng.c: fixed a problem with internal cleanup of <DIV> element
  (bug 143738).

---
added a new routine xmlBuildRelativeURI needed for enhancement of

* uri.c, include/libxml/uri.h: added a new routine
  xmlBuildRelativeURI needed for enhancement of xinclude.c
* xinclude.c: changed handling of xml:base (bug 135864)
* result/XInclude/*: results of 5 tests changed as a result
  of the above change

---
applied patch from Rob Richards for custom I/O BufferCreateFilenane fixes

* globals.c xmlIO.c include/libxml/globals.h: applied patch from
  Rob Richards for custom I/O BufferCreateFilenane fixes bug
  #143366
Daniel

---
skipped call to xmlValidateNCName when compiling --with-minimum (bug

* SAX2.c: skipped call to xmlValidateNCName when compiling
  --with-minimum (bug 142917)

---
fixed escaping handling and added direct links to bugzilla report for bug

* doc/ChangeLog.awk doc/ChangeLog.xsl: fixed escaping
  handling and added direct links to bugzilla report for
  bug numbers.
Daniel

---
Try to fix ChangeLog links, Daniel

---
first steps of a good ChangeLog page generation. The awk shoudl escape

* doc/ChangeLog.awk doc/ChangeLog.xsl: first steps of a good
  ChangeLog page generation. The awk shoudl escape characters
  not okay in XML and the xslt should make links to functions
  or variables or bug reported in the entries.
Daniel

---
a little further fixing of fallback processing, this time for fallback

* xinclude.c: a little further fixing of fallback processing, this
  time for fallback with children (bug 139520).

---
better portability fix for f(*args), use apply(f, args) as Stephane Bidoul

* python/tests/tstLastError.py: better portability fix for f(*args),
  use apply(f, args) as Stephane Bidoul suggested
Daniel

---
enhanced xmlRegStateAddTrans to check if transition is already present

* xmlregexp.c: enhanced xmlRegStateAddTrans to check if transition
  is already present and, if so, to ignore the request to add it.
  This has a very dramatic effect on memory requirements as well
  as efficiency.  It also fixes bug 141762.

---
applied patch from Ed Davis to allow "make tests" to work with Python 1.5

* Makefile.am python/tests/Makefile.am python/tests/tstLastError.py:
  applied patch from Ed Davis to allow "make tests" to work
  with Python 1.5
Daniel

---
apply fix for XHTML1 formating from Nick Wellnhofer fixes bug #141266

* xmlsave.c: apply fix for XHTML1 formating from Nick Wellnhofer
  fixes bug #141266
* test/xhtmlcomp result//xhtmlcomp*: added the specific regression
  test
Daniel

---
fix for a pedantic make check without make all request Daniel

* Makefile.am: fix for a pedantic make check without make all request
Daniel

---
fixing some problems in URI unescaping and output buffer opening, this

* uri.c xmlIO.c: fixing some problems in URI unescaping
  and output buffer opening, this should fix #141864
Daniel

---
enhanced the handling of subexpression ranges which have a minOccurs of 0

* xmlregexp.c: enhanced the handling of subexpression ranges
  which have a minOccurs of 0 (bug 140478 again); cleaned up
  comments throughout the module.

---
Fixed bug #141529 i.e. various problems when building with --without-html

* xmllint.c xmlsave.c python/generator.py python/libxml.c: Fixed
  bug #141529 i.e. various problems when building with --without-html
Daniel

---
fixing bug #141384 where the reader didn't call the deregistering

* xmllint.c xmlreader.c: fixing bug #141384 where the reader didn't
  call the deregistering functions. Also added the check to
  xmllint --stream --chkregister .
Daniel

---
enhanced xmlFARegExec range evaluation for min occurs 0 problems - fixes

* xmlregexp.c: enhanced xmlFARegExec range evaluation for min
  occurs 0 problems - fixes bug 140478.

---
small enhancement to fix bug 139791

* valid.c: small enhancement to fix bug 139791

---
fixing Red Hat bug #120482 , libxml2-python should depend on the version

* libxml.spec.in: fixing Red Hat bug #120482 , libxml2-python
  should depend on the version of python used to compile it.
Daniel

---
fixed problem in xmlRelaxNGCompareNameClasses which was causing

* relaxng.c: fixed problem in xmlRelaxNGCompareNameClasses
  which was causing check-relaxng-test-suite.py test 351 to fail.

---
implemented fix for M$ IIS redirect provided by Ian Hummel fixed problem

* nanohttp.c: implemented fix for M$ IIS redirect provided
  by Ian Hummel
* relaxng.c: fixed problem with notAllowed compilation
  (bug 138793)

---
fix for xmlUriEscape on "http://user@somewhere.com" from Mark Vadok.

* uri.c: fix for xmlUriEscape on "http://user@somewhere.com"
  from Mark Vadok.
Daniel

---
fixed problem with IS_COMPILABLE flag (bug 130216)

* relaxng.c: fixed problem with IS_COMPILABLE flag
  (bug 130216)

---
added a close for the local file descriptor (bug 137474)

* nanohttp.c: added a close for the local file descriptor
  (bug 137474)

---
enhanced to ignore XML_XINCLUDE_START and XML_XINCLUDE_END nodes (bug

* relaxng.c: enhanced to ignore XML_XINCLUDE_START and XML_XINCLUDE_END
  nodes (bug 137153)

---
added new module xmlsave with patch supplied by Eric Zurcher (second

* win32/Makefile.bcb, win32/Makefile.mingw, win32/Makefile.msvc:
  added new module xmlsave with patch supplied by Eric Zurcher
  (second attempt - don't know what happened to the first one!)

---
applied patch from Anthony Carrico providing Python bindings for the

* python/libxml.c python/libxml.py: applied patch from Anthony Carrico
  providing Python bindings for the Canonicalization C14N support.
Daniel

---
modified to make sub-includes inherit the parse flags from the parent

* xinclude.c: modified to make sub-includes inherit the
  parse flags from the parent document (bug 132597)

---
paalied patch from Julio M. Merino Vidal fixing bug #134751 to fix

* configure.in doc/Makefile.am include/libxml/Makefile.am:
  paalied patch from Julio M. Merino Vidal fixing bug #134751
  to fix --with-html-dir option.
* doc/*: rebuilt fully the docs
* doc/html/libxml-xmlsave.html: new file from new header.
Daniel

---
fixing compilation bug with some options disabled as well as

* debugXML.c testHTML.c tree.c doc/examples/*.c
  include/libxml/xmlsave.h: fixing compilation bug with some options
  disabled as well as --with-minimum should fix #134695
Daniel

---
fix a compilation problem about a missing timb include Daniel

* testSAX.c: fix a compilation problem about a missing timb include
Daniel

---
doc/xmllint.xml doc/xmllint.1 doc/xmllint.html doc/xmlcatalog_man.xml


Thu Feb 26 20:19:40 MST 2004 John Fleck <jfleck@inkstain.net>

	* doc/xmllint.xml
	* doc/xmllint.1
	* doc/xmllint.html
	* doc/xmlcatalog_man.xml
	* doc/xmlcatalog.1
	* doc/xmlcatalog_man.html
	applying patch from Mike Hommey to clarify XML_CATALOG_FILES
	use

---
patch for cross-compilation to Windows from Christophe de VIENNE. Daniel

* Makefile.am: patch for cross-compilation to Windows from
  Christophe de VIENNE.
Daniel

---
applied patch from Charles Bozeman to nit use the system xmllint. Daniel

* Makefile.am: applied patch from Charles Bozeman to nit use
  the system xmllint.
Daniel

---
applied patch from Roland Schwingel for MingW Daniel

* include/libxml/xmlexports.h: applied patch from Roland Schwingel
  for MingW
Daniel

---
applied a cleanup patch from Peter Breitenlohner removed a doc build

* Makefile.am catalog.c configure.in: applied a cleanup patch
  from Peter Breitenlohner
* tree.c: removed a doc build warning by fixing a param comment
* doc/* : rebuilt the docs
Daniel

---
fixing compilation and link option when configuring with --without-valid

* debugXML.c relaxng.c valid.c xinclude.c xmllint.c xmlreader.c:
  fixing compilation and link option when configuring with
  --without-valid should fix #135309
Daniel

---
applied patch from Malcolm Tredinnick to avoid tabs in python sources,

* python/tests/*.py: applied patch from Malcolm Tredinnick
  to avoid tabs in python sources, should fix #135095
Daniel

---
small patch to try to fix a warning with Sun One compiler Daniel

* encoding.c: small patch to try to fix a warning with Sun One compiler
Daniel

---
small patch removing a warning with MS compiler. Daniel

* encoding.c: small patch removing a warning with MS compiler.
Daniel

---
applied update from Alfred Mickautsch and the added patch from Lucas

* xmlwriter.c include/libxml/xmlwriter.h: applied update
  from Alfred Mickautsch and the added patch from Lucas Brasilino
Daniel

---
John Fleck <jfleck@inkstain.net>


John Fleck <jfleck@inkstain.net>

ChangeLog to go with
tutorial fix.

---
applied a small patch from Alfred Mickautsch to avoid an out of bound

* encoding.c: applied a small patch from Alfred Mickautsch
  to avoid an out of bound error in isolat1ToUTF8()
Daniel

---
fixed problem with function xmlXIncludeCopyRange (bug 133686).

* xinclude.c: fixed problem with function xmlXIncludeCopyRange
  (bug 133686).

---
fixed problem with return value of xmlTextWriterWriteIndent() (bug 133297)

* xmlwriter.c: fixed problem with return value of
  xmlTextWriterWriteIndent() (bug 133297)

---
changed coding to output good XIncludes when one or more bad ones are

* xinclude.c: changed coding to output good XIncludes when
  one or more bad ones are present (bug 132588)

---
corrected handling of empty fallback condition (bug 132585)

* xinclude.c: corrected handling of empty fallback condition
  (bug 132585)

---
fixed problem regarding freeing of dictionary when there are errors within

* xinclude.c: fixed problem regarding freeing of dictionary
  when there are errors within an XInclude file (bug 133106).
  Thanks to Oleg Paraschenko for the assistance.

---
enhanced output indenting (bug 133264)

* xmlwriter.c: enhanced output indenting (bug 133264)

---
moved serialization of attribute text data (xmlSerializeContent) into a

* tree.c, include/libxml/tree.h: moved serialization of
  attribute text data (xmlSerializeContent) into a separate
  routine (xmlSerializeTxtContent) so it can be used by xmlwriter.c
* xmlwriter.c: changed handling of attribute string to use the
  routine above (fixed bug 131548)

---
applied fix from Alexander Winston for a problem related to automake-1.8 ,

* acinclude.m4: applied fix from Alexander Winston for a problem
  related to automake-1.8 , c.f. #132513 and #129861
Daniel

---
applied patch from Stephane Bidoul to add enums to the Python bindings.

* python/generator.py python/tests/tstLastError.py: applied
  patch from Stephane Bidoul to add enums to the Python bindings.
Daniel

---
another small patch from Mark Vadoc Daniel

* testHTML.c: another small patch from Mark Vadoc
Daniel

---
applying patch from Mark Vakoc for Windows applied doc fixes from Sven

* win32/Makefile.bcb win32/Makefile.mingw win32/Makefile.msvc:
  applying patch from Mark Vakoc for Windows
* doc/catalog.html doc/encoding.html doc/xml.html: applied doc
  fixes from Sven Zimmerman
Daniel

---
applied patch from Lucas Brasilino fixing an indent problem. Daniel

* xmlwriter.c: applied patch from Lucas Brasilino fixing an indent
  problem.
Daniel

---
applied suggestion from Miloslav Trmac (see Bug 130419) and eliminated

* xmlmemory.c: applied suggestion from Miloslav Trmac (see
  Bug 130419) and eliminated xmlInitMemoryDone.  More
  improvement needed.

* xml2-config.in: added an additional flag (--exec-prefix) to
  allow library directory to be different from include directory
  (Bug 129558).

---
applied the patch from Lucas Brasilino to add indentation support to

* include/libxml/xmlwriter.h xmlwriter.c: applied the patch from
  Lucas Brasilino to add indentation support to xmlWriter
Daniel

---
fixed problem with "recursive" include (fallback contains another include

* xinclude.c: fixed problem with "recursive" include (fallback
  contains another include - Bug 129969)

---
found and fixed a bug misallocating some non blank text node strings from

* SAX2.c: found and fixed a bug misallocating some non
  blank text node strings from the dictionnary.
* xmlmemory.c: fixed a problem with the memory debug mutex
  release.
Daniel

---
fixed xmlFAParseCharRange for Unicode ranges with patch from Charles

* xmlregexp.c: fixed xmlFAParseCharRange for Unicode ranges
  with patch from Charles Bozeman.

---
applied fixes to allow build from 'outside' directory (Bug 129172)

* python/Makefile.am, python/tests/Makefile.am,
  doc/Makefile.am: applied fixes to allow build from
  'outside' directory (Bug 129172)

---
trying to fix #129692 xmlTextReaderExpand() when using an

* xmlreader.c: trying to fix #129692 xmlTextReaderExpand() when
  using an xmlReaderWalker()
Daniel

---
tree.c fix misc. typos in doc comments include/libxml/tree.h elaborate on


Thu Dec 18 20:10:34 MST 2003 John Fleck <jfleck@inkstain.net>

	* tree.c fix misc. typos in doc comments
	* include/libxml/tree.h elaborate on macro define doc

---
tree.c doc/* Elaborate in documentation discussion of xmlNewChild and


Tue Dec 16 20:40:40 MST 2003 John Fleck <jfleck@inkstain.net>

	* tree.c
	* doc/*
	Elaborate in documentation discussion of xmlNewChild
	and xmlNewTextChild. Thanks to Steve Lenti for pointing
	out the usefulness of a more explicit explanation of the
	reserved character escaping issue.

---
tree.c doc/* Elaborate in documentation discussion of xmlNewChild and


Tue Dec 16 20:40:40 MST 2003 John Fleck <jfleck@inkstain.net>

	* tree.c
	* doc/*
	Elaborate in documentation discussion of xmlNewChild
	and xmlNewTextChild. Thanks to Steve Lenti for pointing
	out the usefulness of a more explicit explanation of the
	reserved character escaping issue.


---
applied patch from Stefan Kost Daniel

* xmlcatalog.c: applied patch from Stefan Kost
Daniel

---
applied small fix from Lucas Brasilino Daniel

* doc/examples/testWriter.c: applied small fix from Lucas Brasilino
Daniel

---
fixing bug #119264 xmllint failing to report serialization errors in some

* xmllint.c: fixing bug #119264 xmllint failing to report
  serialization errors in some cases.
Daniel

---
applied the patch to xmlTextWriterStartPI() suggested by Daniel Schulman

* xmlwriter.c: applied the patch to xmlTextWriterStartPI()
  suggested by Daniel Schulman in #128313
Daniel

---
another patch from Kenneth Haley for Mingw, c.f. #128787 Daniel

* configure.in Makefile.am: another patch from Kenneth Haley
  for Mingw, c.f. #128787
Daniel

---
applied patch from Kenneth Haley for compiling on Mingw see #128786 Daniel

* include/libxml/xmlexports.h: applied patch from Kenneth Haley
  for compiling on Mingw see #128786
Daniel

---
tentative fix for #126117 character reference in attributes output problem

* tree.c: tentative fix for #126117 character reference in
  attributes output problem in some cornercase.
Daniel

---
fix bug #128401 affecting regexp quantifiers Daniel

* config.h.in configure.in xmlregexp.c: fix bug #128401 affecting
  regexp quantifiers
Daniel

---
Applied the patch for BCB from Eric

---
doc/xml.html doc/python.html fix tst.py text, which didn't import sys


Fri Nov 28 21:39:49 MST 2003 John Fleck <jfleck@inkstain.net>

	* doc/xml.html
	* doc/python.html
	fix tst.py text, which didn't import sys

---
appied patch from Eric

---
remove reference to gtk-doc now that Daniel has removed it, fix link to


Fri Nov 21 20:50:59 MST 2003 John Fleck <jfleck@inkstain.net>

	* doc/xml.html, docs.html: remove reference to gtk-doc now that
	Daniel has removed it, fix link to George's IBM article, other
	minor edits

---
minor error cleanup for gcc-3.3.[12] compilation warnings.

* catalog.c,relaxng.c,testAutomata.c,xpointer.c,genChRanges.py,
  chvalid.c,include/libxml/chvalid.h,doc/examples/test1.c:
  minor error cleanup for gcc-3.3.[12] compilation warnings.

---
minor changes to some comments rebuilt the generated HTML pages for

* tree.c: minor changes to some comments
* doc/*.html: rebuilt the generated HTML pages for changes
  from jfleck (bug 126945)

---
enhanced for range checking, updated to Unicode version 4.0.1 (API docs

* genUnicode.py, xmlunicode.c, include/libxml/xmlunicode.h,
  python/libxml2class.txt: enhanced for range checking,
  updated to Unicode version 4.0.1 (API docs also updated)
* python/generator.py: minor change to fix a warning

---
apply fix from Karl Eichwalder for script path Daniel

* Makefile.am: apply fix from Karl Eichwalder for script path
Daniel

---
applied patch from Mark Vakoc to simplify his work from CVS checkouts.

* win32/configure.js: applied patch from Mark Vakoc to simplify
  his work from CVS checkouts.
Daniel

---
fixed bug #125812, about XPointer in XInclude failing but not returning an

* xinclude.c: fixed bug #125812, about XPointer in XInclude
  failing but not returning an error.
Daniel

---
second BeOS patch from Marcin 'Shard' Konicki Daniel

* tree.c nanohttp.c threads.c: second BeOS patch from
  Marcin 'Shard' Konicki
Daniel

---
be more defensive in the xmlReader python bindings fixing bug #124044

* python/libxml.c: be more defensive in the xmlReader python bindings
  fixing bug #124044
Daniel

---
enhanced to bypass compression detection code when input file is stdin

* xmlIO.c: enhanced to bypass compression detection code
  when input file is stdin (bug 125801)

---
fix needed when HTTP is not compiled in by Mark Vakoc Daniel

* xmlIO.c: fix needed when HTTP is not compiled in by Mark Vakoc
Daniel

---
applied patch from Marcin 'Shard' Konicki to provide BeOS thread support.

* nanoftp.c nanohttp.c testThreads.c threads.c: applied patch from
  Marcin 'Shard' Konicki to provide BeOS thread support.
Daniel

---
applied patch from Kasimier Buchcik which fixes a problem in xmlSearchNs

* tree.c: applied patch from Kasimier Buchcik which fixes a
  problem in xmlSearchNs introduced in 2.6.0
Damniel

---
fix bug #125047 about serializing when finding a document fragment node.

* tree.c: fix bug #125047 about serializing when finding a
  document fragment node.
Daniel

---
fix bug #125592 need a NULL check rename a parameter Daniel

* testSAX.c: fix bug #125592 need a NULL check
* include/libxml/chvalid.h: rename a parameter
Daniel

---
fixed warning message from IRIX (bug 125182) removed tabs, replaced with

* xmllint.c: fixed warning message from IRIX (bug 125182)
* python/libxml.py: removed tabs, replaced with spaces
  (bug 125572)

---
applied patch from Alfred Mickautsch fixing #125180 Daniel

* xmlwriter.c: applied patch from Alfred Mickautsch fixing #125180
Daniel

---
last minute patch from Eric Zurcher making it into 2.6.0 Daniel

* tree.c: last minute patch from Eric Zurcher making it into 2.6.0
Daniel

---
preparing libxml2-2.6.0 updated and regenerated the docs and API moved the

* configure.in NEWS doc/libxml2.xsa: preparing libxml2-2.6.0
* doc/*: updated and regenerated the docs and API
* SAX2.c error.c tree.c: moved the line number to their proper
  field in elements now.
Daniel

---
enhanced the installation of tutorial files to avoid installing CVS

* doc/Makefile.am: enhanced the installation of tutorial files
  to avoid installing CVS subdirectories (bug 122943)

---
added new APIs for creating reader from sources or reusing a reader with a

* xmlreader.c include/libxml/xmlreader.h: added new APIs
  for creating reader from sources or reusing a reader with
  a new source, like the xmlReadxx and xmlCtxtReadxxx
* win32/libxml2.def.src doc/libxml2-api.xml doc/apibuild.py
  doc/Makefile.am: regenerated the APIs
* doc/xml.html: applied a patch from Stefan Kost for namesapce docs
Daniel

---
VMS patch from Craig A. Berry Daniel

* vms/build_libxml.com trionan.c: VMS patch from Craig A. Berry
Daniel

---
small fix from Bjorn Reese Daniel

* Makefile.am: small fix from Bjorn Reese
Daniel

---
fix a call missing arguments Daniel

* valid.c: fix a call missing arguments
Daniel

---
fixed a bug in the range search; enhanced range generation (inline code if

* genChRanges.py, chvalid.c, include/libxml/chvalid.h: fixed
  a bug in the range search; enhanced range generation (inline code
  if a small number of intervals); enhanced the readability of the
  output files.

---
removed some annoying warnings fixed a bug in the PubidChars definition,

* check-xml-test-suite.py: removed some annoying warnings
* chvalid.def chvalid.c include/libxml/chvalid.h: fixed a bug
  in the PubidChars definition, regenerated, there is still
  a bug left somewhere
* genChRanges.py: save the header directly in include/libxml/
* configure.in: I generated a 2.6.0beta6 earlier today
Daniel

---
fixed small error on previous commit (chvalid.h in base dir instead of

* fixed small error on previous commit (chvalid.h in
  base dir instead of include directory)

---
more cleanup through the I/O error path Daniel

* error.c tree.c xmlIO.c xmllint.c: more cleanup through the
  I/O error path
Daniel

---
better handling of error cases Daniel

* xmlIO.c: better handling of error cases
Daniel

---
applied patch from Stphane Bidoul to fix the compilation of 2.6.0 code on

* win32/Makefile.bcb win32/Makefile.mingw win32/Makefile.msvc
  win32/configure.js: applied patch from Stphane Bidoul to
  fix the compilation of 2.6.0 code on Win32
Daniel

---
Applied fix for bug #123481 reported by Peter Derr Daniel

* xmlreader.c: Applied fix for bug #123481 reported by Peter Derr
Daniel

---
last finishing touch to the BeOS patch from Marcin 'Shard' Konicki Daniel

* nanoftp.c nanohttp.c: last finishing touch to the BeOS
  patch from Marcin 'Shard' Konicki
Daniel

---
better fix, avoids breaking the python bindings Daniel

* xmlmemory.c: better fix, avoids breaking the python bindings
Daniel

---
fix a compilation problem when configuring with debug but without

* xmlmemory.c: fix a compilation problem when configuring
  with debug but without mem-debug
Daniel

---
patch from Stephane Bidoul for configuring the beta2 version #123104

* win32/configure.js: patch from Stephane Bidoul for configuring
  the beta2 version #123104
Daniel

---
fixed a warning message (trivial) removed incorrect warning message when

* error.c: fixed a warning message (trivial)
* doc/search.php: removed incorrect warning message when word
  search not found in last of multiple tables (bug 119535)

---
the last patch broke unicity of returned strings, removed Daniel

* dict.c: the last patch broke unicity of returned strings, removed
Daniel

---
valgrind found a newly introduced bug Daniel

* dict.c: valgrind found a newly introduced bug
Daniel

---
add a Timingtests target to check bad behaviour from the streaming engine

* Makefile.am: add a Timingtests target to check bad behaviour
  from the streaming engine
* dbgen.pl dbgenattr.pl: perl script to generate big instances
* xmlreader.c: fix a bad behaviour on large buffer inputs
Daniel

---
use stderr and not stdout for default errors in python environment bug

* python/libxml.c: use stderr and not stdout for default errors
  in python environment bug #122552
Daniel

---
do string allocations in large pools, allowing to find if a string pertain

* dict.c include/libxml/dict.h: do string allocations in large
  pools, allowing to find if a string pertain to a dict quickly
* xmllint.c: fix --stream --repeat --timing
* Makefile.am: the testThreads run output should be seen.
Daniel

---
Fixed bug 121394 - missing ns on attributes

* HTMLtree.c: Fixed bug 121394 - missing ns on attributes

---
fixed bug 121759 - early declaration of attribute-list in external DTD

* valid.c: fixed bug 121759 - early declaration of
  attribute-list in external DTD

---
fixed bug #121210 (callback to sax->error, sax->warning with wrong

* SAX2.c, xmlIO.c: fixed bug #121210 (callback to sax->error,
  sax->warning with wrong params).

---
patch from Stphane Bidoul to export globals entry points to the python

* include/libxml/globals.h: patch from Stphane Bidoul to export
  globals entry points to the python bindings
Daniel

---
patch from Mark Vakoc that allows compiling with XInclude but without

* xinclude.c: patch from Mark Vakoc that allows compiling
  with XInclude but without XPointer support.
Daniel

---
Applied a patch from Kevin P. Fleming to add --libtool-libs option to

* configure.in xml2-config.in: Applied a patch from Kevin P. Fleming
  to add --libtool-libs option to xml2-config script.
Daniel

---
Applied a patch from Kevin P. Fleming to add --libtool-libs option to

* configure.in xml2-config.in: Applied a patch from Kevin P. Fleming
  to add --libtool-libs option to xml2-config script.
Daniel

---
minor path fix

---
fixing bug #120870 try to avoid problem with uninitialized mutexes Daniel

* globals.c threads.c: fixing bug #120870 try to avoid problem
  with uninitialized mutexes
Daniel

---
fixed a couple of stupid bugs in the state allocation routines which led

* relaxng.c: fixed a couple of stupid bugs in the state allocation
  routines which led to bug #120040 and the ones reported by
  Martijn Faassen
Daniel

---
fixes a small bug introduced in last commit and detected by valgrind.

* tree.c: fixes a small bug introduced in last commit and detected
  by valgrind.
Daniel

---
fixed part (2) of bug 119535 (wrong alpha case on filenames)

* doc/parsedecl.py, doc/libxml2-refs.xml, doc/API*.html:
  fixed part (2) of bug 119535 (wrong alpha case on filenames)

---
fixed part (2) of bug 119535 (wrong alpha case on filenames)

* doc/parsedecl.py, doc/libxml2-refs.xml, doc/API*.html:
  fixed part (2) of bug 119535 (wrong alpha case on filenames)

---
regenerated API documentation for xmlsoft.org (part of Bug 119535)

* doc/API*.html, doc/html/*: regenerated API documentation
  for xmlsoft.org (part of Bug 119535)

---
Corrected bug tracking modules to look for libxml2 not libxml, Daniel

---
Applied patch from Mikhail Grushinskiy for mingw compiler on Windows.

* Makefile.am configure.in example/Makefile.am libxml.h nanoftp.c
  nanohttp.c xmllint.c: Applied patch from Mikhail Grushinskiy for
  mingw compiler on Windows.
Daniel

---
changing an enum definition to get a correct API XML description. This was

* include/libxml/xmlreader.h doc/libxml2-api.xml: changing an enum
  definition to get a correct API XML description. This was apparently
  breaking Windows build.
Daniel

---
Added in support for the ISO8859X module (patch provided by Jesse Pelton)

* win32/configure.js: Added in support for the ISO8859X
  module (patch provided by Jesse Pelton)

---
Bug 119343 (with apologies to Igor) - Enhanced handling of docb and

* win32/defgen.xsl, win32/libxml2.def.src: Bug 119343
(with apologies to Igor) - Enhanced handling of docb and
nanohttp.

---
further small changes to elminate most of the remaining warnings.

* error.c trionan.[ch] testThreads.c python/generator.py:
  further small changes to elminate most of the remaining
  warnings.

---
fixed a small problem in the patch for #118763 this reverts back to the

* tree.c: fixed a small problem in the patch for #118763
* result/HTML/doc3.htm*: this reverts back to the previous result
Daniel

---
applied doc patch to xml.html and rebuilt, apparently some C++ wrappers

* doc/FAQ.html doc/xml.html: applied doc patch to xml.html
  and rebuilt, apparently some C++ wrappers are not available,
  c.f. bug #118943
Daniel

---
fixing HTML attribute serialization bug #118763 applying a modified

* tree.c: fixing HTML attribute serialization bug #118763
  applying a modified version of the patch from Bacek
* result/HTML/doc3.htm*: this modifies the output from one test
Daniel

---
trying to fix #118754 of possible recursion in the catalogs. Not

* catalog.c: trying to fix #118754 of possible recursion in the
  catalogs. Not fantastically happy about the current fix since
  it's likely to break under very thread intensive concurrent
  access to the catalog. Better solution might to keep the depth
  an extra argument to the resolution functions.
Daniel

---
=Bug 118559 (continued)

---
fixing bug 118559

---
applying cleanup patch from Bjorn Reese for xmlTextReaderNodeType() and

* xmlreader.c include/libxml/xmlreader.h: applying cleanup
  patch from Bjorn Reese for xmlTextReaderNodeType() and
  significant whitespace. There is an enum for node type
  values now.
Daniel

---
applying patch from Peter Jacobi to added ISO-8859-x encoding support when

* encoding.c: applying patch from Peter Jacobi to added
  ISO-8859-x encoding support when iconv is not available
* configure.in include/libxml/xmlversion.h.in
  include/libxml/xmlwin32version.h.in: added the glue needed
  at the configure level and made it the default for Windows
Daniel

---
patch from Joachim Bauch + cleanup for Relax NG error callbacks in python

* python/generator.py python/libxml.c python/libxml2class.txt:
  patch from Joachim Bauch + cleanup for Relax NG error callbacks
  in python
Daniel

---
fix the previous commit Daniel

* encoding.c: fix the previous commit
Daniel

---
fixed an out of bound error #118052 , the good part if that base64 code

* xmlreader.c: fixed an out of bound error #118052 , the good
  part if that base64 code was not in use yet ...
Daniel

---
added a new API xmlXIncludeProcessTree() to process XInclude only on a

* xinclude.c include/libxml/xinclude.h: added a new API
  xmlXIncludeProcessTree() to process XInclude only on a subtree
  this should fix bug #115385
Daniel

---
Applied fix for "wb" open flag, Daniel

---
regenerated might fix includes problems with the Ipv6 support on solaris

* NEWS doc/*: regenerated
* nanoftp.c nanohttp.c: might fix includes problems with the
  Ipv6 support on solaris
* tree.c: patch from Markus Keim about xmlHasNsProp() on attributes
  defined as #IMPLIED
Daniel

---
Applying IPv6 patch from Archana Shah <archana.shah@wipro.com>
closing bug #114837

* configure.in: Added checks for IPv6 support and getaddrinfo().

* acconfig.h: Defined HAVE_GETADDRINFO and SUPPORT_IP6.

* config.h.in: Defined HAVE_GETADDRINFO and SUPPORT_IP6.

* nanoftp.c: Structure xmlNanoFTPCtxt contains either sockaddr_storage
  field or sockaddr_in field, depending upon the availability of IPv6
  support.
  have_ipv6(): Added to check for run-time IPv6 support.
  (xmlNanoFTPScanURL), (xmlNanoFTPUpdateURL), (xmlNanoFTPScanProxy):
  Modified to parse a URI with IPv6 address given in [].
  (xmlNanoFTPConnect): Changed to use getaddrinfo for address
  resolution, if it is available on the system, as gethostbyname
  does not return IPv6 addresses on some platforms.
  (xmlNanoFTPGetConnection): Modified type of dataAddr variable to
  sockaddr_storage or sockaddr_in depending upon the IPv6 support.
  Sending EPSV, EPRT or PASV, PORT depending upon the type of address
  we are dealing with.

* nanohttp.c: (have_ipv6): Added to check for run-time IPv6 support.
  (xmlNanoHTTPScanURL), (xmlNanoHTTPScanProxy): Modified to parse
  a URI with IPv6 address given in [].
  (xmlNanoHTTPConnectHost): Modified to use getaddrinfo if it is
  available on the system. Also IPv6 addresses will be resolved by
  gethostbyname only if IPv6 run-time support is available.
  (xmlNanoHTTPConnectAttempt): Modified to deal with IPv6 address.

Daniel

---
small addition to bcb patch

---
applied the BCB patch by Eric Zurcher

---
reverted back patch for #113521, due to #115104 and while fixing #115101 .

* doc/Makefile.am doc/html/*: reverted back patch for #113521,
  due to #115104 and while fixing #115101 . HTML URLs must not
  be version dependant.
Daniel

---
applied a patch from Gman for building docs applied a patch from Gary

* doc/*: applied a patch from Gman for building docs
* valid.c xmllint.c include/libxml/valid.h: applied a patch from
  Gary Pennington to provide an allocator for xmlValidCtxt
* xmlreader.c: applied patch from Jacek Konieczny fixing bug
  #113580 about data not being passed immediately.
Daniel

---
applied patch from Stephane for threads

---
fixing bug #112904: html output method escaped plus sign character in URI

* HTMLtree.c: fixing  bug #112904: html output method escaped
  plus sign character in URI attribute.
Daniel

---
Updated testfiles for error.c fix

---
added a comment about bug #112902 Daniel

* libxml.spec.in: added a comment about bug #112902
Daniel

---
Fixed bug 109942

---
PI nodes in external subset were not freed :-\ fixes bug #112842 Daniel

* tree.c: PI nodes in external subset were not freed :-\
  fixes bug #112842
Daniel

---
try to fix Red hat bug #89957, do not output -L/usr/lib64 fixed a typo in

* xml2-config.in: try to fix Red hat bug #89957, do not
  output -L/usr/lib64
* xmlreader.c: fixed a typo in a comment
Daniel

---
applied patch from Stphane Bidoul for the Python bindings on the new

* win32/configure.js python/setup.py.in: applied patch
  from Stphane Bidoul for the Python bindings on the new
  release.
Daniel

---
applied patch from Craig A. Berry to get libxml-2.5.7 to compile on

* triodef.h vms/build_libxml.com: applied patch from Craig A. Berry
  to get libxml-2.5.7 to compile on OpenVMS
Daniel

---
trying to fix #110541 where &nbsp; generated character preventing

* doc/xmllint.*: trying to fix #110541 where &nbsp; generated
  character preventing rendering by the man command.
Daniel

---
applied patch from Brent M Hendricks adding binding for xmlCatalogAddLocal

* python/libxml.c python/libxml.py: applied patch from
  Brent M Hendricks adding binding for xmlCatalogAddLocal
Daniel

---
applied the patch provided by Brent Hendricks fixing #105992 and

* SAX.c test/valid/ns* test/result/ns*: applied the patch
  provided by Brent Hendricks fixing #105992 and integrated the
  examples in the testsuite.
Daniel

---
valgrind pointed out an uninitialized variable error. Daniel

* relaxng.c: valgrind pointed out an uninitialized variable error.
Daniel

---
patch from Vasily Tchekalkin to fix #109865 Daniel

* HTMLtree.c: patch from Vasily Tchekalkin to fix #109865
Daniel

---
more work on bug #109225, and fixed an uninitialized variable pointed out

* relaxng.c: more work on bug #109225, and fixed an uninitialized
  variable pointed out by valgrind
Daniel

---
should fix #109327 errors on memory accesses Daniel

* xinclude.c: should fix #109327 errors on memory accesses
Daniel

---
fixed bug #108801 reported by Malcolm Tredinnick about the DocType node

* xmlreader.c: fixed bug #108801 reported by Malcolm Tredinnick
  about the DocType node not being reported sometimes.
* python/tests/reader.py: added to test to the regression checks
Daniel

---
fixed bug #108546 on long CDATA (or text nodes) reported by Edd Dumbill

* xmlreader.c: fixed bug #108546 on long CDATA (or text nodes)
  reported by Edd Dumbill
Daniel

---
fixed the last core RelaxNG bug known #107083, shemas datatype ID/IDREF

* relaxng.c: fixed the last core RelaxNG bug known #107083,
  shemas datatype ID/IDREF support still missing though.
* xmlreader.c: fix a crashing bug with prefix raised by
  Merijn Broeren
* test/relaxng/testsuite.xml: augmented the testsuite with
  complex inheritance tests
Daniel

---
applied Gennady's patch against buffer overrun

---
fixed a node dump crash on attributes fixed an URI test bug and get better

* tree.c: fixed a node dump crash on attributes
* test/xsdtest/xsdtest.xml test/xsdtest/xsdtest.xsl: fixed
  an URI test bug and get better output.
Daniel

---
give more infos fix a bug reported by Sebastian Rahtz and REF->DEF in

* check-xsddata-test-suite.py: give more infos
* relaxng.c: fix a bug reported by Sebastian Rahtz and
  REF->DEF in attribute values.
Daniel

---
Fixed a couple of problem raised by James Clark in bug #107083, the

* relaxng.c: Fixed a couple of problem raised by James Clark
  in bug #107083, the support for ID/IDREF/IDREFS at the WXS
  datatype level still not fixed though.
Daniel

---
fixed bug #105992 Daniel

* SAX.c: fixed bug #105992
Daniel

---
path handling bug introduced by my recent machinations fixed

---
more RelaxNG bug hunting Daniel

* relaxng.c check-relaxng-test-suite.py: more RelaxNG bug hunting
Daniel

---
applied a patch from Kjartan Maraas to fix some typos Daniel

* ChangeLog tree.c doc/libxml-doc.el doc/libxml2-api.xml: applied
  a patch from Kjartan Maraas to fix some typos
Daniel

---
more bug-hunting added --tree to dump the intermediate rng tree patch from

* relaxng.c: more bug-hunting
* testRelax.c include/libxml/relaxng.h: added --tree to dump the
  intermediate rng tree
* python/generator.py: patch from Stephane Bidoul to fix the generator
  on python < 2.2
Daniel

---
added TODO for the DTD compatibility spec more bug fixes driven by the

* relaxng.c: added TODO for the DTD compatibility spec
* xinclude.c: more bug fixes driven by the testsuite
Daniel

---
trying to fix #104934 about some XHTML1 serialization issues. Daniel

* tree.c: trying to fix #104934 about some XHTML1 serialization
  issues.
Daniel

---
fixing bug #104646 about iconv based encoding conversion when the input

* encoding.c xmlIO.c: fixing bug #104646 about iconv based
  encoding conversion when the input buffer stops in the
  middle of a multibyte char
Daniel

---
applied another bug fix from Sean Chittenden Daniel

* xinclude.c: applied another bug fix from Sean Chittenden
Daniel

---
fixing bug #103969 forgot to add an epsilon transition when building the

* valid.c: fixing bug #103969 forgot to add an epsilon transition
  when building the automata for elem*
Daniel

---
doc/xmlcatalog.1 doc/xmlcatalog_man.html doc/xmlcatalog_man.xml belatedly


Sun Jan 26 17:02:29 MST 2003 John Fleck <jfleck@inkstain.net>

	* doc/xmlcatalog.1
	* doc/xmlcatalog_man.html
	* doc/xmlcatalog_man.xml
	belatedly fixing bug #93622 (adds rewriteURI type to
	"--add" option in xmlcatalog man page

---
applied patch for FreeBSD by Julio Merino, closing #104475 Daniel

* xmlcatalog.c xmllint.c: applied patch for FreeBSD by
  Julio Merino, closing #104475
Daniel

---
applied a new patch from Stphane Bidoul for cleanups rebuilt the API

* xmlreader.c doc/apibuild.py: applied a new patch from
  Stphane Bidoul for cleanups
* doc/libxml2-api.xml: rebuilt the API description with
  new entry points
Daniel

---
cleanup patch from Stphane Bidoul Daniel

* python/libxml.c: cleanup patch from Stphane Bidoul
Daniel

---
fixing bug #103100 with a dummy UTF8ToUTF8 copy Daniel

* encoding.c: fixing bug #103100 with a dummy UTF8ToUTF8 copy
Daniel

---
fixed the streaming property of the reader, it was generating tree faster

* xmlreader.c: fixed the streaming property of the reader,
  it was generating tree faster than consuming it. Pointed out
  by Nate Myers
* tree.c: fixed a bug in xmlSaveFormatFileEnc if passed a NULL doc
Daniel

---
patch from Stefano Zacchiroli to fix some URI/file escaping problems

* nanoftp.c nanohttp.c xmlIO.c: patch from Stefano Zacchiroli
  to fix some URI/file escaping problems
Daniel

---
fixed a bug raised by Raymond Wiker, docSetRootElement() should not raise

* python/generator.py: fixed a bug raised by Raymond Wiker,
  docSetRootElement() should not raise an exception if the
  return is None
Daniel

---
fixed bug #102181 by applying the suggested change and fixing the

* python/libxml.py python/libxml.c python/libxml2-python-api.xml:
  fixed bug #102181 by applying the suggested change and fixing
  the generation/registration problem.
Daniel

---
another fix needed as pointed by Christophe Merlet for --stream --debug if

* xmllint.c: another fix needed as pointed by Christophe Merlet
  for --stream --debug if compiled without debug support.
Daniel

---
applied the patch to fix #101894 Daniel

* libxml-2.0.pc.in: applied the patch to fix #101894
Daniel

---
applied patch from Lukas Schroeder for register callbacks modified patch

* tree.c : applied patch from Lukas Schroeder for register callbacks
* valid.c: modified patch from Lukas Schroeder to test
  register callbacks with --chkregister
Daniel

---
a bit of cleanup small fix more work on the XmlTextReader tutorial a few

* xmllint.c: a bit of cleanup
* xmlreader.c: small fix
* doc/xmlreader.html: more work on the XmlTextReader tutorial
* python/libxml.py: a few fixes pointed out by Hannu Krosing
Daniel

---
patch from Stphane Bidoul to include drv_libxml2.py in setup.py Daniel

* python/setup.py.in: patch from Stphane Bidoul to include
  drv_libxml2.py in setup.py
Daniel

---
applied an old patch from Lukas Schroeder to track node creation and

* global.data globals.c tree.c include/libxml/globals.h: applied
  an old patch from Lukas Schroeder to track node creation and
  destruction. Probably missing a lot of references at the moment
  and not usable reliably.
Daniel

---
modified the generator to allow keeping class references when creating new

* python/generator.py: modified the generator to allow keeping
  class references when creating new classes, needed to fix a bug
  pointed by Stphane Bidoul where the input buffer of the
  xmlTextReader instance gets destroyed if the python wrapper for
  the input is not referenced anymore.
Daniel

---
fixed a bug pointed out by Stphane Bidoul and integrated it into the

* xmlreader.c python/tests/reader.py: fixed a bug pointed out
  by Stphane Bidoul and integrated it into the tests
Daniel

---
trying to fix #102037 Daniel

* python/libxml_wrap.h: trying to fix #102037
Daniel

---
doc/xmllint.xml doc/xmllint.1 Add discussion of XML_DEBUG_CATALOG to


Wed Dec 25 19:22:06 MST 2002 John Fleck <jfleck@inkstain.net>

	* doc/xmllint.xml
	* doc/xmllint.1
	Add discussion of XML_DEBUG_CATALOG to xmllint man
	page - bug #100907

---
patch from Stphane Bidoul for Python 2.1 Daniel

* python/libxml.c python/setup.py.in: patch from Stphane Bidoul
  for Python 2.1
Daniel

---
applied a patch for VMS following the report by Nigel Hall Daniel

* xmlIO.c: applied a patch for VMS following the report by Nigel Hall
Daniel

---
doc/tutorial/xmltutorial.xml doc/tutorial/includekeyword.c


Sun Dec 15 21:27:30 MST 2002 John Fleck <jfleck@inkstain.net>

	* doc/tutorial/xmltutorial.xml
	* doc/tutorial/includekeyword.c
	* doc/tutorial/includegetattribute.c
	plus generated html and pdf
	Adding fix from Niraj Tolia to tutorial to properly free memory.

---
preparing release of 2.4.30 fixups to the api builder, gives enum values,

* configure.in: preparing release of 2.4.30
* doc/apibuild.py doc/libxml2-api.xml: fixups to the api builder,
  gives enum values, fix functype return type, put back fields in
  structs
* doc/*: updated the docs rebuilt
Daniel

---
fixups to the api builder, gives enum values, fix functype return type

* doc/apibuild.py doc/libxml2-api.xml: fixups to the api builder,
  gives enum values, fix functype return type
Daniel

---
applied patch from Magnus Henoch

---
another patch from Stphane Bidoul for Python bindings on Windows small

* python/setup.py.in: another patch from Stphane Bidoul for
  Python bindings on Windows
* doc/parsedecl.py: small cleanup
Daniel

---
Jan Rafaj pointed a bug in the Makefile. Daniel

* doc/Makefile.am: Jan Rafaj pointed a bug in the Makefile.
Daniel

---
trying to fix the Python bindings build on Windows (Stphane Bidoul)

* python/generator.py python/libxml.c python/setup.py.in: trying
  to fix the Python bindings build on Windows (Stphane Bidoul)
Daniel

---
repair some problem if gtk-doc fail or such patch for Solaris on new

* doc/Makefile.am: repair some problem if gtk-doc fail or such
* configure.in: patch for Solaris on new autoconf closes #98880
* doc/parsedecl.py: repair the frigging API building script,
  did I say that python xmllib sucks ?
* doc/libxml2-api.xml doc/libxml2-refs.xml: regenerated, reordering
  and some comment are no more truncated.
Daniel

---
fixing bug #98792 , node may have no doc and dereferencing without

* python/libxml.c: fixing bug #98792 , node may have no doc
  and dereferencing without checking ain't good ...
Daniel

---
trying to fix bug #98517 about building outside the source tree fixed the

* Makefile.am python/Makefile.am python/tests/Makefile.am:
  trying to fix bug #98517 about building outside the source tree
* doc/xml.html doc/FAQ.html: fixed the link to libiconv #94585
Daniel

---
completed the #96963 fix

---
tried to fix bug #97852 reported by Nicolas Noffke Daniel

* xpointer.c: tried to fix bug #97852 reported by Nicolas Noffke
Daniel

---
switched the order of a couple of includes to fix bugs #97100 Daniel

* Makefile.am: switched the order of a couple of includes
  to fix bugs #97100
Daniel

---
fixed bug #96963, reverted to old behaviour of xmlLoadCatalogs

---
applied patch from Brian Stafford to fix a bug in xmlReconciliateNs()

* tree.c: applied patch from Brian Stafford to fix a bug
  in xmlReconciliateNs()
Daniel

---
applied patch from Christian Glahn to allow xmlNewChild() on document

* tree.c: applied patch from Christian Glahn to allow
  xmlNewChild() on document fragment nodes
Daniel

---
added winsockcompat.h to EXTRA_DIST to fix bug #96586 Daniel

* include/Makefile.am: added winsockcompat.h to EXTRA_DIST to
  fix bug #96586
Daniel

---
tried to fix some of the problem with --sgml Daniel

* xmlcatalog.c: tried to fix some of the problem with --sgml
Daniel

---
applied patch from Mark Vakoc except the API change, preserved it. updated

* debugXML.c: applied patch from Mark Vakoc except the API
  change, preserved it.
* doc/*: updated the docs to point to the search engine for
  information lookup or before bug/help reports.
Daniel

---
Fixed a small bug for year wide archive indexing, Daniel

---
Added year archiving + fix a problem on current date archive, Daniel

---
patch from Mark Vakoc to fix xmlNodeGetPath() Daniel

* tree.c: patch from Mark Vakoc to fix xmlNodeGetPath()
Daniel

---
extended slashification to fix the base problem in xslt

---
typo/bug found by Christian Glahn Daniel

* valid.c: typo/bug found by Christian Glahn
Daniel

---
applied WinCE patch, cleaned up

---
applied Javier's WinCE patch

---
fixing bug #94241 on HTML boolean attributes Daniel

* HTMLtree.c: fixing bug #94241 on HTML boolean attributes
Daniel

---
fixed a stupid error breaking the python API Daniel

* python/generator.py python/libxml2class.txt: fixed a stupid error
  breaking the python API
Daniel

---
applied a trio update patch from Bjorn Reese which should work with MinGW

* trio.c trio.h triodef.h trionan.c trionan.h triop.h
  triostr.c triostr.h: applied a trio update patch from
  Bjorn Reese which should work with MinGW
Daniel

---
applied zlib patch

---
trying to fix #88412 by bypassing all the python subdir if python ain't

* Makefile.am configure.in: trying to fix #88412 by bypassing
  all the python subdir if python ain't detected
daniel

---
fixed another stupid bug in xmlGetNodePath() --version now report the

* tree.c: fixed another stupid bug in xmlGetNodePath()
* xmllint.c: --version now report the options compiled in
Daniel

---
stupid bug found by mattam@netcourrier.com Daniel

* python/libxml_wrap.h: stupid bug found by mattam@netcourrier.com
Daniel

---
fixed a stupid out of bound array error Daniel

* xmlIO.c: fixed a stupid out of bound array error
Daniel

---
applied patch from Christophe Merlet to reestablish DESTDIR Daniel

* python/Makefile.am: applied patch from Christophe Merlet to
  reestablish DESTDIR
Daniel

---
quick but apparently working implementation of xi:fallback, should close

* xinclude.c: quick but apparently working implementation of
  xi:fallback, should close bug #89684
* Makefile.am test/XInclude/docs/fallback.xml
  result/XInclude/fallback.xml: added a basic test for fallback,
  and run with --nowarning to avoid a spurious warning
* configure.in: applied patch from Frederic Crozat for python
  bindings on AMD 64bits machines.
Daniel

---
integrated a cleaned up version of Marc Liyanage' patch for boolean

* HTMLtree.c include/libxml/HTMLtree.h: integrated a cleaned up
  version of Marc Liyanage' patch for boolean attributes in HTML
  output
Daniel

---
trying to fix the <style> escaping problem in HTML serialization bug

* HTMLtree.c: trying to fix the <style> escaping problem in
  HTML serialization bug #89342
Daniel

---
applied syntax patch from Rick Jones and rebuilt the web site. Daniel

* doc/xml.html doc/*.html: applied syntax patch from Rick Jones
  and rebuilt the web site.
Daniel

---
fixed python/Makefile.am for bug 72012

---
changed the order of the encoding declaration attributes in the meta tags

* HTMLtree.c: changed the order of the encoding declaration
  attributes in the meta tags due to a bug in IE/Mac
Daniel

---
fixing Red Hat bug #68614 by adding the doc/xmlcatalog_man.xml to the

* doc/Makefile.am: fixing Red Hat bug #68614 by adding the
  doc/xmlcatalog_man.xml to the source distribution
Daniel

---
applied patch from Sander Vesik improving the quality of the hash

* hash.c: applied patch from Sander Vesik improving the quality of
  the hash function.
Daniel

---
patch from Rachel Hestilow to fix bug #84340

* xmlIO.c: patch from Rachel Hestilow to fix bug #84340

---
Makefile.am: updated c14n tests suite
c14n.c: performance improvement for previous c14n patch

---
fixing bug #81112 Daniel

* libxml.spec.in: fixing bug #81112
Daniel

---
fixing bug #82848 Daniel

* uri.c: fixing bug #82848
Daniel

---
amother typo fix, Daniel

---
Applied a spelling patch from Geert Kloosterman to xml.html, and regenerated
the web site, Daniel

---
Applied another patch from Christian Cornelssen to the buildDocBookCatalog
script, Daniel

---
applied a small buffer performance patch from Gary Pennington Daniel

* xmlIO.c: applied a small buffer performance patch from Gary Pennington
Daniel

---
fixed bug #81159 (memory growth in SAX)

---
real fix for bug #78858

---
fixed bug #78858

---
Fixed crash on OSF/1

---
patch from Aleksey Sanin reflecting a change in the ExcC14N specification

* c14n.c: patch from Aleksey Sanin reflecting a change in the
  ExcC14N specification
Daniel

---
fixed & serialization bug introduced in 2.4.20 this changes a few things

* HTMLtree.c: fixed & serialization bug introduced in 2.4.20
* result/HTML/*: this changes a few things in the results
Daniel

---
Remove mailto and point people to the bug report page, Daniel

---
patch from Cristian Gafton to build on Red Hat 6.2, should also fix #75779

* python/Makefile.am: patch from Cristian Gafton to build on
  Red Hat 6.2, should also fix #75779
Daniel

---
fixing bug #78662 i.e. add proper escaping of URI when saving HTML files.

* HTMLtree.c uri.c: fixing bug #78662 i.e. add proper
  escaping of URI when saving HTML files.
* result/HTML/*: this impacted some tests
Daniel

---
trying to fix #77441 Daniel

* configure.in: trying to fix #77441
Daniel

---
applied an IEEE flag patch for OSF/1 #77825 Daniel

* configure.in: applied an IEEE flag patch for OSF/1 #77825
Daniel

---
applied a fix from Anthony Jones for -o /--output Daniel

* xmllint.c: applied a fix from Anthony Jones for -o /--output
Daniel

---
Frdric Crozat gave a patch related to the change of Include paths

* libxml.m4: Frdric Crozat gave a patch related to the change
  of Include paths breaking the libxml.m4
Daniel

---
applied patch from Allan Clark for UnixWare/OpenServer Daniel

* configure.in nanohttp.c: applied patch from Allan Clark for
  UnixWare/OpenServer
Daniel

---
Never commit without running "make tests" :-( fix a couple of stupidities

* valid.c SAX.c: Never commit without running "make tests" :-(
  fix a couple of stupidities in the previous commit
* result/*: a few changes in some attribute order result of previous
  commit.
Daniel

---
fixed a bug in the ISO-Latin 1 to UTF8 encoder raised by Morus Walter

* encoding.c: fixed a bug in the ISO-Latin 1 to UTF8 encoder
  raised by Morus Walter
Daniel

---
patch from Mark Vakoc to build C14N if DocBook and HTML support is not

* c14n.c: patch from Mark Vakoc to build C14N if DocBook and
  HTML support is not configured in.
Daniel

---
applied a new patch from Aleksey Sanin updated the documentation to

* c14n.c: applied a new patch from Aleksey Sanin
* doc/site.xsl doc/xml.html doc/*.html: updated the documentation
  to reference Aleksey implementation of XML digital Signatures
Daniel

---
another patch from Aleksey Sanin Daniel

* c14n.c: another patch from Aleksey Sanin
Daniel

---
applied patch from Aleksey Sanin fixing a problem in the canonicalization

* c14n.c: applied patch from Aleksey Sanin fixing a problem in the
  canonicalization algorithm
* doc/xml.html doc/index.html: added the C14N references on the
  index page.
Daniel

---
applied patch from Dodji Seketeli fixing an uninitailized variable in

* valid.c: applied patch from Dodji Seketeli fixing an
  uninitailized variable in xmlValidGetValidElements()
Daniel

---
fix to adapt varaiations in the bindings fixed to have the version of the

* check-xml-test-suite.py: fix to adapt varaiations in the
  bindings
* configure.in python/setup.py python/setup.py.in: fixed to
  have the version of the python scripts automatically updated
Daniel

---
fixed a bug newly introduced and pointed by Uwe Fechner in xmlCopyProp()

* tree.c: fixed a bug newly introduced and pointed by Uwe Fechner
  in xmlCopyProp()
Daniel

---
owen pointed out a problem with the ftime fix, gettimeofday() was not

* configure.in xmllint.c: owen pointed out a problem with the
ftime fix, gettimeofday() was not detected by configure and
the ftime header wasn't included, dohhh
Daniel

---
trying to fix #71457 for timing precision when gettimeofday() is not

* configure.in xmllint.c: trying to fix #71457 for timing
  precision when gettimeofday() is not availble but ftime() is
Daniel

---
Fixed bug #72570 moved the libxml man page to section 3 Daniel

* Makefile.am libxml.3 libxml.4 libxml.spec.in: Fixed bug #72570
  moved the libxml man page to section 3
Daniel

---
fix bug #72490 added methods serialize() and saveTo() to all node

* tree.c: fix bug #72490
* python/libxml.c python/libxml.py: added methods serialize()
  and saveTo() to all node elements.
Daniel

---
closed #73430, don't read from an input source which indicated an

* xmlIO.c: closed #73430, don't read from an input source
  which indicated an end-of-file or an error.
Daniel

---
applied patch fixing #73450 Daniel

* python/generator.py: applied patch fixing #73450
Daniel

---
fix bug #72706 when loading a NULL entity Daniel

* xmlIO.c: fix bug #72706 when loading a NULL entity
Daniel

---
fixed the test script after some discussion on the semantic of

* check-xml-test-suite.py: fixed the test script after some discussion
  on the semantic of TYPE="error"
* Makefile.am: added the script to the distrib
Daniel

---
avoid a warning bug #71594 Daniel

* xmlmemory.c: avoid a warning bug #71594
Daniel

---
Jesse Perry provided a patch to remove a few warning on alpha/Tru64 Daniel

* xmlmemory.c: Jesse Perry provided a patch to remove a few
  warning on alpha/Tru64
Daniel

---
couple of bug fixes Daniel

* python/libxml.c: couple of bug fixes
Daniel

---
trying to close Red Hat bug #58707

* doc/xmlcatalog_man.xml: trying to close Red Hat bug #58707
  https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=58707
Daniel

---
fix #68882, cleanup the XInclude copying of node, merge back IDs in the

* tree.c valid.c xinclude.c: fix #68882, cleanup the XInclude
  copying of node, merge back IDs in the target document.
* result/XInclude/docids.xml test/XInclude/docs/docids.xml
  test/XInclude/ents/ids.xml: test case
* result/VC/ElementValid4: output changed due to a typo fix
Daniel

---
applied patch from Andris Pavenis for binary name suffixes Daniel

* Makefile.am: applied patch from Andris Pavenis for binary
  name suffixes
Daniel

---
fixed stupid bug #70738 found by alfons hoogervorst

* configure.in: fixed stupid bug #70738 found by alfons hoogervorst

---
fixed a small bug a bit of cleanup. Daniel

* python/Makefile.am python/TODO python/libxml.py: fixed a small
  bug a bit of cleanup.
Daniel

---
adding error redirections and preformat to a python handler cleanup made

* python/Makefile.am python/libxml.c python/libxml2-python-api.xml
  python/libxml2class.txt: adding error redirections and preformat
  to a python handler
* python/tests/Makefile.am python/tests/*.py: cleanup made all
  tests self checking
Daniel

---
fixed a stupid bug when renaming a function Daniel

* python/libxml.c python/libxml.py: fixed a stupid bug when renaming
  a function
Daniel

---
Jacob sent a patch to allow building from tarfile. Daniel

* python/Makefile.am: Jacob sent a patch to allow building from
  tarfile.
Daniel

---
fixed a small error, daniel

---
patch from Anthony Jones to catch NULL nodes in debug routines. Daniel

* debugXML.c: patch from Anthony Jones to catch NULL nodes in
  debug routines.
Daniel

---
apply an patch from Petr Kozelka for unlink and replace support of

* tree.c: apply an patch from Petr Kozelka for unlink and replace
  support of attribute nodes
Daniel

---
Adam Lounds pointed out a bug in xmlSearchNs() Daniel

* tree.c: Adam Lounds pointed out a bug in xmlSearchNs()
Daniel

---
Trying to fix an alignment problem reported in IE, daniel

---
Fixed bug #68830, xmlcatalog now provides return codes in case of errors

* doc/xmlcatalog_man.xml xmlcatalog.c: Fixed bug #68830, xmlcatalog
  now provides return codes in case of errors
Daniel

---
patch from Anthony Jones for hash.c allocation size trying to work around

* hash.c: patch from Anthony Jones for hash.c allocation size
* Makefile.am: trying to work around Yet Another Libtool Madness
  and build the 2.4.13 release finally ...
daniel

---
fixed xmlSaveFormatFileEnc() when encoding == NULL Fixes bug #67229 Daniel

* tree.c: fixed xmlSaveFormatFileEnc() when encoding == NULL
  Fixes bug #67229
Daniel

---
trying to avoid troubles when a subtree is copied and coalesced in part

* tree.c: trying to avoid troubles when a subtree is copied
  and coalesced in part with the target tree. Should fix
  bug #67407
Daniel

---
applied Serguei Narojnyi's patch to add native thread support on the Win32

* threads.c: applied Serguei Narojnyi's patch to add native
  thread support on the Win32 platform
* testThreadsWin32.c Makefile.am: added the test program also
  from Serguei, Win32 specific
* include/win32config.h include/libxml/xmlwin32version.h.in:
  added patch from Igor for the Windows thread specific defines.
Daniel

---
renamed XML.html output page into XMLinfo.html. Close bug #66951 and

* doc/*.html doc/site.xsl doc/Makefile: renamed XML.html
  output page into XMLinfo.html. Close bug #66951 and
  raised by Robert Collins too.
Daniel

---
Anthony Jones pointed out a problem in xmlStringGetNodeList() and provided

* tree.c: Anthony Jones  pointed out a problem in
  xmlStringGetNodeList() and provided a fix for it
Daniel

---
should fix #67674 and avoid troubles if xsltproc is not available or fails

* doc/Makefile.am: should fix #67674 and avoid troubles if
  xsltproc is not available or fails in the prefix provided
Daniel

---
one more doc patch from Charlie Bozeman. Daniel

* xmlmemory.c: one more doc patch from Charlie Bozeman.
Daniel

---
applied Justin Fletcher patch for --output or -o daniel

* xmllint.c: applied Justin Fletcher patch for --output or -o
daniel

---
applied Justin Fletcher generic timing patch similar to the one already

* xmllint.c: applied Justin Fletcher generic timing patch
  similar to the one already applied to xsltproc.
Daniel

---
fix the xmlStrdup() used in the previous patch. added --dropdtd fixed

* valid.c: fix the xmlStrdup() used in the previous patch.
* valid.c: added --dropdtd
* tree.c: fixed xmlUnlinkNode so it also removes the references
  from the document if the node is a DTD
Daniel

---
fix bug #66816 when validating. don't use sys/time.h if configure did not

* valid.c: fix bug #66816 when validating.
* xmllint.c: don't use sys/time.h if configure did not found it
Daniel

---
do not reference strdup() ! trying to fix the libs of the various config

* globals.c: do not reference strdup() !
* configure.in libxml-2.0.pc.in: trying to fix the libs
  of the various config extraction modules
Daniel

---
closed bug #66159 added --escape option some cleanup for xml2-config

* uri.c: closed bug #66159
* testURI.c: added --escape option
* configure.in: some cleanup for xml2-config --cflags
Daniel

---
patch from Gary Pennington fixing a possible problem at initialization

* threads.c: patch from Gary Pennington fixing a possible
  problem at initialization time.
Daniel

---
applied Geert Kloosterman's patch to fix --repeat --timing output Daniel

* xmllint.c: applied Geert Kloosterman's patch to fix
  --repeat --timing output
Daniel

---
Fixed the previous fix, Daniel

---
fixed a compilation bug pointed by Danny Jamshy Daniel

* xpointer.c: fixed a compilation bug pointed by Danny Jamshy
Daniel

---
robert pointed out a loop error in callback cleanups Daniel

* xmlIO.c: robert pointed out a loop error in callback cleanups
Daniel

---
in case of content model validity error, don't print it if validity

* valid.c: in case of content model validity error, don't
  print it if validity warnings were not requested.
Daniel

---
Morus Walter patch to allow --format and --encode Daniel

* xmllint.c: Morus Walter patch to allow --format and --encode
Daniel

---
Heiko Rupp pointed that the shell would crash on empty nodesets returns.

* debugXML.c: Heiko Rupp pointed that the shell would crash
  on empty nodesets returns.
Daniel

---
fix bug #63752 of compiling libxml with a non standard set of options

* encoding.c global.data globals.c testThreads.c: fix bug #63752
  of compiling libxml with a non standard set of options
Daniel

---
closing bug #62711, the library should never close stdin or stdout. Daniel

* xmlIO.c: closing bug #62711, the library should never
  close stdin or stdout.
Daniel

---
second pass at fixing #63336, using Joel Young final patch. looks okay.

* uri.c: second pass at fixing #63336, using Joel Young
  final patch. looks okay.
Daniel

---
Fixed a bug when creating a new HTML document, doc->children
was set to NULL with a DTD child
Daniel

---
*doc/xmlcatalog_man.xml, xmlcatalog_man.html, xmlcatalog.1 finishing up


Sat Oct  6 16:25:52 MDT 2001 John Fleck <jfleck@inkstain.net>

	*doc/xmlcatalog_man.xml, xmlcatalog_man.html, xmlcatalog.1
	finishing up fix to
	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=54392, making
	the xmlcatalog man page display more elegantly

---
Joe Orton provided a patch fixing a problem when iconv is specified to be

* configure.in: Joe Orton provided a patch fixing a problem
  when iconv is specified to be in a non-standard directory
  but wasn't exported in xml2-config --cflags
Daniel

---
tried to incorporate comments from bug #59220 Daniel

* win32/dsp/libxml2.def.src: tried to incorporate comments
  from bug #59220
Daniel

---
Tried to close bug #60131 Daniel

* libxml.h include/libxml/xmlversion.h.in
  include/libxml/xmlwin32version.h include/libxml/xmlwin32version.h.in:
  Tried to close bug #60131
Daniel

---
fixing bug #59946 on xmlns="" Daniel

* SAX.c: fixing bug #59946 on xmlns=""
Daniel

---
Armin Sander pointed a possible text coalescing problem, completed his

* tree.c: Armin Sander pointed a possible text coalescing
  problem, completed his patch.
Daniel

---
const and volatile fix

---
added fix to the header Daniel

* include/libxml/tree.h: added fix to the header
Daniel

---
applied patch from Armin Sander to make some pointers const in

* tree.c: applied patch from Armin Sander to make some pointers
  const in xmlCopyNode()
Daniel

---
started some serious testing and fixed a few bug and optmization needs.

* catalog.c xmlIO.c: started some serious testing and fixed
  a few bug and optmization needs.
Daniel

---
small cleanup closing bug #59108 Daniel

* win32/dsp/libxml2.def.src: small cleanup closing bug
  #59108
Daniel

---
deprecate the non-boundchecking Sprintf functions, add Snprintf this

* include/libxml/valid.h debugXML.c valid.c: deprecate
  the non-boundchecking Sprintf functions, add Snprintf
  this should close bug #57984
Daniel

---
s/LIBXML_VERSION_NUMBER/LIBXML_VERSION/ seems the macro was renamed, this

* libxml.m4: s/LIBXML_VERSION_NUMBER/LIBXML_VERSION/ seems the
  macro was renamed, this should close bug #58683
Daniel

---
John Kroll provided a small fix to xmlNanoHTTPSave Daniel

* nanohttp.c: John Kroll provided a small fix to xmlNanoHTTPSave
Daniel

---
get rid of the readline and libhistory dependancies by default, release

* configure.in: get rid of the readline and libhistory
  dependancies by default, release 2.4.1 with IA64 fix
* nanohttp.c tree.c xmlIO.c include/libxml/nanohttp.h
  include/libxml/tree.h include/libxml/xmlIO.h: incorporated
  John Kroll fixes to allow saving to HTTP via PUT (or
  POST of needed).
* doc/html/*.html: regenerated the docs
Daniel

---
add #undef HAVE_DLFCN_H

2001-07-13  Peter Williams  <peterw@ximian.com>

	* config.h.in: add #undef HAVE_DLFCN_H

	* example/Makefile.am (INCLUDES): Compile fix when srcdir !=
	builddir.

---
fixed an old bug raised by Bernhard Zwisch, the I/O layer should

* xmlIO.c: fixed an old bug raised by Bernhard Zwisch, the I/O
  layer should URI-Unescape before trying to open resources.
Daniel

---
- example/Makefile.am: fixed the include path to add srcdir/include
- Makefile.am configure.in: fix from Albert Chin for iconv detection
  and some cleanup
Daniel

---
- include/win32config.h: bug #56801 Yon Derek provided a patch
  to the windows config file.
Daniel

---
fix a sentence which may sound like i don't take patches, Daniel

---
- xmlversion.h: okay this is a generated file, but Windows
  users need it and they can't generate it, and I want CVS
  Windows users ...
- win32/libxml2/libxml2_so.dsp: Windows project file for
  the shared lib version of libxml2
- win32/libxml2/libxml2.def.src: bug #56527 set of exported
  resources needed for libxslt/xsltproc by Yon Derek
Daniel

---
MSVC fix

---
another small fix for ATTRIBUTE_UNUSED Daniel

* include/win32config.h: another small fix for ATTRIBUTE_UNUSED
Daniel

---
Yon Derek provided a first fix to be able to compile libxslt/xsltproc on

* include/win32config.h: Yon Derek provided a first fix
  to be able to compile libxslt/xsltproc on Windows
Daniel

---
- valid.c: fixed a bug found when post validating an entity ref
- xmllint.c: added --loaddtd and sligly changed --postvalid to
  activate it too
Daniel

---
- tree.c xinclude.c xpointer.c: bug #56402 exposed a number of
  weakness in the node copy the XPointer and the XInclude
  implementations. Serious cleanup.
Daniel

---
Kjartan Maraas provided a small patch to add xml2-config.in to EXTRA_DIST

* Makefile.am: Kjartan Maraas provided a small patch to
  add xml2-config.in to EXTRA_DIST
Daniel

---
- tree.c: fixed xmlHasNsProp() accordingly to bug #55683
- doc/xml.html: updated with 2.3.11
Daniel

---
- TODO: updated adding cleanup of generated doc
- configure.in: prepared to release 2.3.11
- xmllint.c: added --version for bug reporting
- doc/html/*.html: rebuilt the doc
Daniel

---
- Makefile.am example/Makefile.am: Laszlo PETER provided a fix
  when using -liconv
- TODO: updated
Daniel

---
- libxml.h: fixed an error in last commit
- doc/FAQ.html: added an entry for compilation from CVS
Daniel

---
- xmlversion.h.in libxml.h: Cygwin patches
- tree.c: xmlFreeNodeList patch similar to xmlFreeNode one
- tree.h: cleanup
Daniel

---
- valid.c: (a? , b? , c? , ... , z?) was storing/restauring
  state far too often, simple fix used to avoid it.
Daniel

---
- xinclude.c: Raphael Hertzog had a trouble with DTD nodes
  being processed, applied his patch
- tree.c: fixed a bug raised in xmlStaticCopyNodeList()
Daniel

---
- tree.c: applied Steve Tinney patch to xmlNewNsProp to fix bug #55810
Daniel

---
- tree.c: fixed xmlGetNsProp() to close bug #55683
  Note this requires libxslt to use it's own function instead.
Daniel

---
- HTMLtree.c: trying to close bug #55772 escaping in script
  elements
- doc/xml.html: suggest to send mail to the list
Daniel

---
- error.c: attempt to fix the xmlGetVarStr breakage once and for
  good. Use a macro and based on the solution provided in
  vsnprintf manual page from GNU.
Daniel

---
- encoding.c: Robert Collins provided a patch to add the
  "US-ASCII" encoding alias
Daniel

---
- HTMLtree.c: applied patch from Jaroslaw Kolakowski to close bug
  #55380
- tree.c: patch to xmlNodeGetContent() to get CDATA section content
Daniel

---
- Makefile.am include/Makefile.am: small change to have
  include/libxml rebuilt if working from CVS.
- uri.c: applied another patch from Carl Douglas for URI escaping,
  this should close bug #51876
Daniel

---
- uri.[ch]: applied a patch from Carl Douglas for URI escaping,
  related to bug #51876
Daniel

---
LoTR sent a patch fixing the previous commit Daniel

* configure.in: LoTR sent a patch fixing the previous commit
Daniel

---
- valid.c test/VCM/v2[34].xml: Fixed bug #54631 added specific test
  case
- INSTALL: was empty added stuff from the FAQ
Daniel

---
- tree.[ch]: fixing bug #54446, by cleaning some bugs in the
  attributes handling and #54433 by adding xmlUnsetProp()
  and xmlUnsetNsProp()
Daniel

---
- tree.c: zb@bisp.com reported an error in xmlNodeGetLang()
Daniel

---
- HTMLtree.c: fixed the bug reported by Bjorn in htmlNodeDump
Daniel

---
- valid.c: applied small patch from Gary Pennington, reindented
  some part of the code.
Daniel

---
fixed a error introduced in Makefile.am, daniel

---
- xmlIO.c: Bjorn Reese provided a fix for a problem on buffer
  flushing
Daniel

---
- tree.[ch] xmlIO.h: applied patch from Joe McAlerney to add
  xmlSaveFormatFileTo()
Daniel

---
- error.c: Jean Franois Lecomte provided a complete description
  and a fix to bug #53537
Daniel

---
- HTMLtree.c: real fix for  #53402
Daniel

---
- tree.c: fixed #53388 with the provided patch
Daniel

---
- valid.c: removed a state explosion exhibited by RSS
- test/valid/rss.xml result/valid/rss.xml*: added the testcase
  from bug #51872
Daniel

---
Quick fix of a couple of bad links, Daniel

---
- tree.h: include xmlmemory.h this seems to havoid a nasty glibc
  bug where the linktime verions of free() won't work ...
Daniel

---
- error.c: applied the context output patch of the error
  handling submitted by Chuck Griffith
- error/VC/*: this slightly change some error logs
Daniel

---
- config.h.in configure.in error.c: fix a compilation problem
  on platforms without vsnprintf (xml@thewrittenword.com)
Daniel

---
- error.c: removed a C++ like comment
Daniel

---
- doc/Makefile.am configure.in: yearke@eng.buffalo.edu suggested
  a fix for --with-html-dir= configure support. I hope it won't
  break rpm generation
Daniel

---
First patch from SCO :-)
- xmlIO.c: one function comment cleanup.
Daniel

---
Preparing for 2.3.4 release:
- configure.in: bumped to 2.3.4
- error.c: fixed bug #51860
- tree.c: fixed bug #51861
- valid.c: cleanup, more debug, failed to fix one bug crap ...
- tree.[ch] : added xmlDefaultBufferSize
- nanoftp.c: typo in function name header block
- doc/xml.html : updated, added link to XML::LibXSLT
- doc/html/* : rebuilt the docs
Daniel

---
Seems there is still bugs hiding, someone has some flytox ?
- Makefile.am: Martin Baulig suggested to add -lm
- tree.c: found another bug in xmlNodeGetContent()
Daniel

---
- valid.c: new patch from Gary Pennington
Daniel

---
- doc/xml.html: applied patch from Ankh
Daniel

---
Small fix for the release, Daniel

---
cut and past error in Changelog, Daniel

---
Couple of fixes, getting ready for 2.3.1:
- configure.in: applied patch from Daniel van Balen for OpenBSD
  and bumped version to 2.3.1
- HTMLtree.c result/HTML/doc3.htm result/HTML/wired.html: the
  attempt to find autoclosing was simply broken, removed it,
  updated the examples, this is better
Daniel

---
- hash.[ch]: added Paolo Casarini patch to provide Delete from
  hash functionnalities.
- doc/html/* : rebuild the doc
Daniel

---
- hash.[ch]: added a first version of xmlHashSize()
- valid.c: another bug fix from Gary Pennington
Daniel

---
- valid.c: couple of bug fixes pointed by Gary Pennington
- HTMLtree.c: #if 0 cleanup
Daniel

---
- uri.c: applied Marc Sanfacon's patch for xmlNormalizeURIPath
Daniel

---
- tree.c: patch from Bjorn Reese on xmlBufferCCat
Daniel

---
off by 1 and stupidity bug fix:
- xmlIO.c: Gary Pennington <Gary.Pennington@uk.sun.com> fix
  for xmlGzfileOpen() bug
Daniel

---
small bit forgotten from Gary Pennington's patch, Daniel

---
tree.c : xmlSaveFile, xmlSaveFileEnc, applied patch from Gary Pennington, Daniel

---
"Never do a release before the second coffee of the day" releases:
- configure.in doc/html/* doc/xml.html: made a 2.2.9 release
  on a non-updated tree :-(, made a 2.2.10 release to correct the
  situation
Daniel

---
Fixes/enhancements: - tree.[ch] xmlIO.c: added xmlDocDumpMemoryEnc() from

Fixes/enhancements:
- tree.[ch] xmlIO.c: added xmlDocDumpMemoryEnc() from John Kroll
- error.c: applied fix suggested by "Leo Davidson" <leo@ox.compsoc.net>
Daniel

---
- uri.c: Wayne Davison's patch fixing xmlBuildURI()
- Makefile.mingw: Wayne Davison's update adding hash.c
Daniel

---
Applying provided patches :-)
- nanohttp.c : applied Wayne HTTP cleanup patch
- tree.[ch]: applied TOM <ptittom@free.fr> for xmlNodeSetBase()
  and xmlNodeSetSpacePreserve()
Daniel

---
closing bug #29260, Daniel

---
Another patch from Wayne Davison:
- nanoftp.c nanohttp.c xmlIO.c: Win32 patch nanoftp code work now
Daniel

---
- nanohttp.c: added xmlNanoHTTPTimeout(int delay), removed a bug
  xmlNanoHTTPMethod on input MimeType Tony Lam <Tony.Lam@eng.sun.com>
- xpointer.c: slight extension of xmlXPtrLocationSetMerge
Daniel

---
patch for socklen_t detection by Albert Chin-A-Young <china@thewrittenword.com>
Daniel

---
Various attemps at trying to bypass this automake bullshit !!! Daniel
Failing too bad no release before next wed I'm seriously pissed, this
bug has been around for more than one year it seems, piece of crap

---
Patch for solaris libs lookup, Daniel.

---
Use the correct pkg-config syntax
(the pkg-config that comes with the RedHat 7.0 glib-gtkbeta RPM
 and not the one from pkgconfig.sourceforge.net which is old).

---
Got an OSF/1 bug report fixing related problems:
- xmlversion.h.in nanoftp.c nanohttp.c: traying to work out the
  problem of socklen_t being undefined on a number of platforms
- debugXML.c: fixed a compilation problem when without snprintf
Daniel

---
Closing bug #25000, Daniel.

---
- uri.c: applied Wayne Davidson patch
- Makefile.in test/URI/uri.data result/URI/uri.data: updated URI tests
Daniel

---
Closed bug 22941, Daniel

---
Minor fix and add to testsuite, Daniel

---
Patch from Albert Chin-A-Young <china@thewrittenword.com>:
- xmllint.c: workaround a MAP_FAILEd definition bug in DU-4.0
Daniel

---
Patch from Albert Chin-A-Young <china@thewrittenword.com>:
- configure.in: added --with-readline=DIR to accept alternate
  path for readline include/library
- configure.in: added AM_C_PROTOTYPES to add -Aa -D_HPUX_SOURCE
  for ANSI under HP-UX
- config.in: Removed @LIBS@ from xml-config because @XML_LIBS@
  includes @LIBS@
Daniel

---
Fix on the patch, Daniel

---
Patch for HP compilers and patch to xmllint.c from Sven Heinicke, Daniel

---
Fixed bug #7419, dependancies fouled, Daniel.

---
updated with instructions for support of both libxml-1.x and libxml-2.x

* doc/upgrade.html: updated with instructions for support of both
  libxml-1.x and libxml-2.x
* doc/gjobread.c : applied Todd Dukes <tdukes@ibmoto.com> patch
  for 2.x support and also fixed includes
Daniel

---
Second patch from Paul Dubois, Daniel

---
applied doc patch from Paul DuBois, Daniel

---
- Removing warnings on various paltforms
- closing bug #5281
Daniel

---
Commited the snprintf patch courtesy of George Katsirelos <gkatsi@cs.toronto.edu>, Daniel.

---
Candidate libxml-1.8.5, include jody libz patch, Daniel

---
 - fix for PIs name starting with xml
 - fixed a potential problem with || and && ops
 - generate win32config.h for those on the Other Side !
Daniel

---
- Fixed bug #4344 - Fixed C++ problems in headers - Released 1.8.1 Daniel

- Fixed bug #4344
- Fixed C++ problems in headers
- Released 1.8.1
Daniel

---
- Fixed bug #4344 - Fixed C++ problems in headers - Released 1.8.1 Daniel

- Fixed bug #4344
- Fixed C++ problems in headers
- Released 1.8.1
Daniel

---
- Fixed bug #4344 - Fixed C++ problems in headers - Released 1.8.1 Daniel

- Fixed bug #4344
- Fixed C++ problems in headers
- Released 1.8.1
Daniel

---
Closing bug report #3748, changed global compression flag usage, and
added xmlNewTextChild() and xmlNewDocRawNode(), Daniel

---
closing bug #3163 by adding extra flags for the cc compiler on HP-uX, Daniel.

---
Fixed probles in some HTML tag autoclose, XML output bug on mixed-content
and fixed the related output for tests, Daniel.

---
Bug fixes, improvement on ID/IDREF support, 1.6.2, no memleaks, Daniel

---
Patched a bug when creating HTML document structures, Daniel.

---
Just adds 'const' to a couple of important parameters, patch from
Michael Meeks <michael@oasis.edenproject.org>, Daniel.

---
Applied patch from  John Ellson <ellson@lucent.com> closing #1646, Daniel

---
Fixed bug #1638, daniel

---
- fix which allow "make install DESTDIR=</install/prefix>".


- fix which allow "make install DESTDIR=</install/prefix>".

---
Applied a bug fix on file reading code from John Ellson <ellson@lucent.com>, Daniel.

---
Prevent gnome-xml from writing two copies of the xml tree to the dest file in
xmlSaveFile, and free the allocated buffer there

---
Moved error.h to xml-error.h, associated fixed and updates, Daniel

---
Fix Sopwith's autogen.sh hack.  Dunno exactly what he was trying to do here though

---
Patched a bug in the generation of empty attributes, Daniel.

---
simple bug hunting done during rpm2html and rpmfind integration.

---
Redirect all errors reporting through the SAX error function, Daniel.

---
Fixed? a trange bug related to compression, Daniel.

---
Small Makefile fix -mig

---
A small patch and more doc, Daniel.

---
Corrected an error, Daniel.

---
include error.h

---
New file. Contains prototyes from `error.c'.

* error.h: New file.  Contains prototyes from `error.c'.

---
